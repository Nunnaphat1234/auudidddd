{"version":3,"sources":["helpers/CryptoHelper.js","connectors.ts","hooks.ts","../../contracts/src/addresses.js","../../contracts/src/index.js","helpers/EPNSCoreHelper.js","segments/Feedbox.tsx","components/DisplayNotice.js","assets/Device.js","singletons/ChannelsDataStore.js","singletons/UsersDataStore.js","components/ViewChannelItem.js","segments/ViewChannels.tsx","components/SharedStyling.js","components/SendNotifications.tsx","segments/ChannelOwnerDashboard.js","components/CreateChannel.js","segments/ChannelCreationDashboard.js","pages/Home.js","components/BlockiesIdenticon.js","components/Profile.tsx","components/Bell.js","segments/Header.tsx","App.tsx","serviceWorker.js","index.js","components/blockies.js"],"names":["CryptoJS","require","CryptoHelper","encryptWithAES","message","key","AES","encrypt","toString","decryptWithAES","decrypt","enc","Utf8","encryptWithECIES","publicKey","a","compressedKey","EthCrypto","compress","this","encryptWithPublicKey","encryptedSecret","decryptWithECIES","privateKey","decryptWithPrivateKey","pubKeyUint8Array","Uint8Array","from","Buffer","convertedKeyAsUint8Array","publicKeyConvert","convertedPublicKeyHex","pubKey","then","encryptedBuffers","cipher","iv","ephemPublicKey","ciphertext","mac","input","keyConvert","concat","buf","encrypted","length","keyConvertBuffer","uncompressedKey","twoStripped","substring","encryptedBuffer","decryptedBuffer","encryptionDecryptionPublicToPrivateTest","startTime","Date","console","log","publicKeyByPrivateKey","msg","encryptionTime","getTime","decryptMsg","decryptionTime","outputMsgPayload","secret","subject","calltoaction","imageurl","pkey","secretEncrypted","asubE","amsgE","actaE","aimgE","makeid","result","toISOString","characters","charactersLength","i","charAt","Math","floor","random","config","injected","InjectedConnector","supportedChainIds","network","NetworkConnector","urls","3","defaultChainId","pollingInterval","portis","PortisConnector","dAppId","networks","addresses","ceaErc20","epnscore","dai","aDai","abis","erc20","erc20Abi","ownable","ownableAbi","epnscoreAbi","EPNSCoreHelper","getOwnerInfo","contract","Promise","resolve","reject","governance","response","catch","err","getUserInfo","user","users","mappings","addr","getChannelAddressFromID","channelID","mapAddressChannels","getChannelInfo","channel","channels","getChannelEvent","startBlock","updateBlock","filter","filters","AddChannel","block","UpdateChannel","queryFilter","filteredResponse","forEach","item","args","ethers","utils","toUtf8String","identity","getJsonFileFromIdentity","ids","split","url","fetch","json","getChannelJsonFromChannelAddress","channelStartBlock","toNumber","channelUpdateBlock","getChannelJsonFromUserAddress","getTotalNumberOfChannels","channelsCount","getChannelsMetaLatestToOldest","atIndex","numChannels","channelsInfo","channelArrays","assignedChannelID","push","promises","map","all","getTotalNumberOfUsers","usersCount","getPublicKey","address","getSubscribedStatus","memberExists","getTotalSubscribedChannels","subscribedCount","getFairShareOfUserAtBlock","userActivated","calcAllChannelsRatio","getPoolFunds","poolFunds","formatBigNumberToMetric","bignumber","convertToCurrency","div","metricFormatter","e","num","digits","si","value","symbol","toFixed","replace","Container","styled","InterestInfo","InterestRow","Title","span","Msg","props","theme","css","Feedbox","epnsReadProvider","useWeb3React","account","library","React","useState","userInterestInfo","setUserInterestInfo","useEffect","initUserInterest","getBlockNumber","blockNumber","calculateUserInterest","on","contractInstance","Contract","divisor","ratio","userInfo","interestClaimed","adaiERC20","balanceOf","availableFunds","totalProfit","sub","userProfit","mul","obj","pool","Number","formatEther","available","profit","Notice","DisplayNotice","title","animationIn","animationOut","durationOut","size","Device","mobileS","mobileM","mobileL","tablet","laptop","laptopL","desktop","desktopL","ChannelEvents","ChannelsDataStore","state","channelsMeta","channelsJson","callbacks","init","resetChannelsListeners","initChannelsListenersAsync","getChannelsCountAsync","removeAllListeners","listenForAddChannelAnyAsync","listenForAddChannelSelfAsync","listenForUpdateChannelAnyAsync","listenForUpdateChannelSelfAsync","listenForSubscribeAnyAsync","listenForSubscribeSelfAsync","listenForUnsubscribeAnyAsync","listenForUnsubscribeSelfAsync","ipfs","incrementChannelsCountAsync","Object","entries","callback","Subscribe","count","memberCount","bigNumberify","Unsubscribe","addCallbacks","callbackType","callbackID","removeCallbacks","incrementCount","getChannelsMetaAsync","channelsDummy","getChannelMetaAsync","id","sort","b","channelAddress","getChannelMetaViaAddressAsync","getChannelJsonAsync","instance","UserEvents","UsersDataStore","userMeta","ownerMeta","resetUsersListeners","initUsersListenersAsync","getOwnerMetaAsync","getUsersCountAsync","getUserMetaAsync","listenForSubscribedAsync","listenForUnsubscribedAsync","publicKeyRegistered","listenForPublicKeyBroadcastAsync","add","PublicKeyRegistered","once","incrementUsersCountAsync","SkeletonWrapper","atW","atH","borderRadius","marginBottom","marginRight","ChannelLogo","ChannelLogoOuter","ChannelLogoInner","ChannelLogoImg","img","ChannelInfo","ChannelTitle","ChannelTitleLink","ChannelDesc","ChannelDescLabel","label","ChannelMeta","ChannelMetaBox","Subscribers","SubscribersCount","Pool","PoolShare","LineBreak","ChannelActions","ChannelActionButton","button","disabled","ActionTitle","hideit","ActionLoader","SkeletonButton","SubscribeButton","UnsubscribeButton","OwnerButton","Toaster","ToasterMsg","ViewChannelItem","channelObject","isOwner","epnsWriteProvide","channelJson","setChannelJson","subscribed","setSubscribed","loading","setLoading","txInProgress","setTxInProgress","fetchChannelJson","registerCallbacks","subs","subscribe","subscribeAction","getSigner","signMessage","signature","recoverPublicKey","arrayify","hashMessage","formattedPubKey","slice","error","toast","dark","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","withPublicKey","subscribeWithPublicKey","tx","txToast","LoaderToast","color","waitForTransaction","hash","update","render","type","TYPE","SUCCESS","name","ERROR","unsubscribeAction","unsubscribe","height","width","src","icon","href","target","rel","info","poolContribution","onClick","ContainerInfo","Items","ViewChannels","setChannels","setUser","owner","setOwner","fetchChannels","ownerAddr","keys","index","channellized","Section","section","align","direction","gradient","margin","padding","overflow","Content","ItemBreak","Item","wrap","bg","flex","self","justify","minWidth","maxWidth","textAlign","border","radius","filterHover","hover","tabletAlign","tabletTextAlign","ItemH","H2","bottom","top","transform","arcRGB","h1","h2","weight","textTransform","spacing","family","H3","h3","P","p","Span","pos","right","left","z","Anchor","ul","li","hoverBG","Button","FormSubmision","opacity","tabletRight","tabletLeft","tabletTop","tabletBottom","tabletTransform","tabletOpacity","form","Input","display","borderBottom","outline","cursor","hand","TextField","textarea","NFTypes","DropdownStyledParent","DropdownStyled","Dropdown","SendNotifications","active","chainId","nfProcessing","setNFProcessing","nfRecipient","setNFRecipient","nfType","setNFType","nfSub","setNFSub","nfSubEnabled","setNFSubEnabled","nfMsg","setNFMsg","nfCTA","setNFCTA","nfCTAEnabled","setNFCTAEnabled","nfMedia","setNFMedia","nfMediaEnabled","setNFMediaEnabled","nfInfo","setNFInfo","handleSendMessage","preventDefault","notificationToast","signer","nsub","nmsg","asub","amsg","acta","aimg","k","publickey","storagePointer","isEmpty","JSON","stringify","at","identityBytes","toUtf8Bytes","anotherSendTxPromise","sendNotification","INFO","wait","field","trim","onSubmit","options","onChange","option","placeholder","Switch","checked","required","rows","autocomplete","ChannelOwnerDashboard","Channel","Info","Name","ShortInfo","Url","DropzoneContainer","Text","Continue","CreateChannel","processing","setProcessing","uploadDone","setUploadDone","file","setFile","setName","desc","setDesc","setURL","handleCreateChannel","cid","daiContract","randomNumber","ceil","fees","parseUnits","sendTransactionPromise","approve","createChannelWithFees","maxlength","onChangeStatus","status","meta","files","allFiles","f","reader","FileReader","readAsDataURL","onloadend","onDrop","maxFiles","multiple","accept","ChannelCreationDashboard","Controls","ControlButton","ControlImage","ControlText","ControlChannelContainer","ControlChannelImage","ControlChannelText","Interface","Home","setBadgeCount","bellPressed","ReactGA","pageview","setEpnsReadProvider","epnsWriteProvider","setEpnsWriteProvider","controlAt","setControlAt","adminStatusLoaded","setAdminStatusLoaded","channelAdmin","setChannelAdmin","signerInstance","userClickedAt","checkUserForChannelRights","controlIndex","listenerForChannelRights","BlockiesIdenticon","seed","opts","bgcolor","scale","spotcolor","draw","prevProps","blockies","canvas","createElement","ref","Component","Blocky","BlockyInner","Wallet","Profile","setAddress","ens","setENS","ensFetched","setENSFetched","lookupAddress","toLowerCase","tadaaa","keyframes","BellImage","ringme","BellImageAbs","Badge","Bell","badgeCount","bellPressedCB","badge","setBadge","ring","setRing","setResetRinger","setTimeout","className","HeaderStyle","ProfileContainer","Logo","UserControls","NetworkDisplayer","PrimaryTheme","ThirdTheme","Connection","phase","Header","Array","NoEthereumProviderError","UnsupportedChainIdError","UserRejectedRequestErrorInjected","getErrorMessage","dotenv","connectorsByName","Injected","Network","Portis","getLibrary","provider","connector","providers","Web3Provider","App","context","activate","deactivate","setBellPressed","initialize","activatingConnector","setActivatingConnector","triedEager","tried","setTried","isAuthorized","useEagerConnect","suppress","ethereum","window","handleConnect","handleChainChanged","handleAccountsChanged","accounts","handleNetworkChanged","networkId","removeListener","useInactiveListener","HeaderContainer","ParentContainer","HomeContainer","ProviderUpperContainer","ProviderLogo","ProviderContainer","currentConnector","activating","image","ProviderButton","ProviderImage","ProviderLabel","style","gridGap","gridTemplateColumns","marginTop","borderColor","alert","changeChainId","changeNetwork","close","newestOnTop","rtl","pauseOnFocusLoss","ToastContainer","attrs","Boolean","location","hostname","match","client","ApolloClient","uri","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","randseed","rand","t","createColor","buildOpts","newOpts","pow","charCodeAt","seedrand","renderIcon","imageData","dataWidth","mirrorWidth","data","y","row","x","r","reverse","createImageData","sqrt","cc","getContext","fillStyle","fillRect","col","api","create","module","exports"],"mappings":"gYAIIA,EAAWC,EAAQ,KAEjBC,EAAe,CAEnBC,eAAgB,SAASC,EAASC,GAChC,OAAOL,EAASM,IAAIC,QAAQH,EAASC,GAAKG,YAG5CC,eAAgB,SAASL,EAASC,GAEhC,OADaL,EAASM,IAAII,QAAQN,EAASC,GAC9BG,SAASR,EAASW,IAAIC,OAGrCC,iBAAiB,WAAD,4BAAE,WAAeT,EAASU,GAAxB,iBAAAC,EAAA,6DACVC,EAAgBC,IAAUH,UAAUI,SAASJ,GADnC,SAGcK,KAAKC,qBAAqBhB,EAASY,GAHjD,cAGVK,EAHU,yBAQTA,GARS,gDAAF,qDAAC,GAWjBC,iBAAiB,WAAD,4BAAE,WAAelB,EAASmB,GAAxB,SAAAR,EAAA,sEAIHI,KAAKK,sBAAsBpB,EAASmB,GAJjC,wFAAF,qDAAC,GAOjBH,qBAAqB,WAAD,4BAAE,WAAehB,EAASU,GAAxB,qBAAAC,EAAA,6DAEdU,EAAmBC,WAAWC,KAClC,IAAIC,EAAOd,EAAW,QAIlBe,EAA2BC,2BAAiBL,GAAkB,GAG9DM,EAAwB,IAAIH,EAAOC,GAGnCG,EAAS,IAAIJ,EAAOG,EAAuB,OAb7B,kBAgBbxB,kBACHyB,EACAJ,EAAOxB,IACT6B,MAAK,SAAAC,GACL,IAAMC,EAAS,CACXC,GAAIF,EAAiBE,GAAG5B,SAAS,OACjC6B,eAAgBH,EAAiBG,eAAe7B,SAAS,OACzD8B,WAAYJ,EAAiBI,WAAW9B,SAAS,OACjD+B,IAAKL,EAAiBK,IAAI/B,SAAS,QAIjCgC,EAAQd,WAAWC,KACvB,IAAIC,EAAOO,EAAOE,eAAgB,QAE9BI,EAAaX,2BAAiBU,GAAO,GAQrCxB,EALmB,IAAIY,EAAOa,GAKGjC,SAAS,OAWhD,OAPYoB,EAAOc,OAAO,CACxB,IAAId,EAAOO,EAAOC,GAAI,OACtB,IAAIR,EAAOZ,EAAe,OAC1B,IAAIY,EAAOO,EAAOI,IAAK,OACvB,IAAIX,EAAOO,EAAOG,WAAY,SAC7B9B,SAAS,WAhDM,2CAAF,qDAAC,GAsDrBgB,sBAAsB,WAAD,4BAAE,WAAepB,EAASmB,GAAxB,6BAAAR,EAAA,6DAEf4B,EAAM,IAAIf,EADZgB,EAAYxC,EACkB,OAGlCwC,EAAY,CACVR,GAAIO,EAAInC,SAAS,MAAO,EAAG,IAC3B6B,eAAgBM,EAAInC,SAAS,MAAO,GAAI,IACxC+B,IAAKI,EAAInC,SAAS,MAAO,GAAI,IAC7B8B,WAAYK,EAAInC,SAAS,MAAO,GAAImC,EAAIE,SAIpCL,EAAQd,WAAWC,KAAK,IAAIC,EAAOgB,EAAUP,eAAgB,QAC7DI,EAAaX,2BAAiBU,GAAO,GAGrCM,EAAmB,IAAIlB,EAAOa,GAK9BM,EAAkBD,EAAiBtC,SAAS,OAIlDoC,EAAUP,eAAiBU,EACrBC,EAAczB,EAAW0B,UAAU,GAEnCC,EAAkB,CACtBd,GAAI,IAAIR,EAAOgB,EAAUR,GAAI,OAC7BC,eAAgB,IAAIT,EAAOgB,EAAUP,eAAgB,OACrDC,WAAY,IAAIV,EAAOgB,EAAUN,WAAY,OAC7CC,IAAK,IAAIX,EAAOgB,EAAUL,IAAK,QAjCZ,kBAoCd7B,kBACL,IAAIkB,EAAOoB,EAAa,OACxBE,GACAjB,MAAK,SAAAkB,GAAe,OAAIA,EAAgB3C,eAvCrB,4CAAF,qDAAC,GA0CtB4C,wCAAwC,WAAD,4BAAE,WAAe7B,GAAf,2BAAAR,EAAA,6DACjCsC,EAAY,IAAIC,KACtBC,QAAQC,IAAI,4CAA8CH,GAEpDvC,EAAYG,IAAUwC,sBAAsBlC,GAC5CP,EAAgBC,IAAUH,UAAUI,SAASJ,GAM9B,kBAXkB,SAYrBK,KAAKC,qBADF,kBACqCJ,GAZnB,cAYjC0C,EAZiC,OAavCH,QAAQC,IAAI,+CAAiDE,GAEvDC,GAAiB,IAAIL,MAAOM,UAAYP,EAAUO,UACxDL,QAAQC,IAAI,+CAAiDG,EAAiB,IAAO,SAhB9C,UAmBdxC,KAAKK,sBAAsBkC,EAAKnC,GAnBlB,QAmBjCsC,EAnBiC,OAoBvCN,QAAQC,IAAI,kDAAoDK,EAAa,KAEvEC,GAAiB,IAAIR,MAAOM,UAAYP,EAAUO,UAAYD,EACpEJ,QAAQC,IAAI,+CAAiDM,EAAiB,IAAO,SAvB9C,iDAAF,mDAAC,GA0BxCC,iBAAiB,WAAD,4BAAE,WAAeC,EAAQC,EAAS7D,EAAS8D,EAAcC,EAAUC,GAAjE,uBAAArD,EAAA,6DAEhBwC,QAAQC,IAAI,yBAA2B,IAAIF,KAAS,KACpDC,QAAQC,IAAI,yBACZD,QAAQC,IAAI,kBAJI,SAKcrC,KAAKN,iBAAiBmD,EAAQI,GAL5C,cAKVC,EALU,OAMVC,EAAQnD,KAAKhB,eAAe8D,EAASD,GACrCO,EAAQpD,KAAKhB,eAAeC,EAAS4D,GACrCQ,EAAQrD,KAAKhB,eAAe+D,EAAcF,GAC1CS,EAAQtD,KAAKhB,eAAegE,EAAUH,GAE5CT,QAAQC,IAAIa,GACZd,QAAQC,IAAI,gBACZD,QAAQC,IAAIc,GACZf,QAAQC,IAAI,gBACZD,QAAQC,IAAIe,GACZhB,QAAQC,IAAI,gBACZD,QAAQC,IAAIgB,GACZjB,QAAQC,IAAI,gBACZD,QAAQC,IAAIiB,GACZlB,QAAQC,IAAI,4BApBI,KAqBhBD,QArBgB,UAqBEpC,KAAKG,iBAAiB+C,EAAiBD,GArBzC,yBAqBRZ,IArBQ,gBAsBhBD,QAAQC,IAAI,0BACZD,QAAQC,IAAIrC,KAAKV,eAAe6D,EAAON,IACvCT,QAAQC,IAAI,0BACZD,QAAQC,IAAIrC,KAAKV,eAAe8D,EAAOP,IACvCT,QAAQC,IAAI,0BACZD,QAAQC,IAAIrC,KAAKV,eAAe+D,EAAOR,IACvCT,QAAQC,IAAI,0BACZD,QAAQC,IAAIrC,KAAKV,eAAegE,EAAOT,IA7BvB,iDAAF,6DAAC,GA+BjBU,OAAQ,SAAU7B,GAIf,IAHA,IAAI8B,EAAmB,KAAM,IAAIrB,MAAOsB,cAAgB,KACpDC,EAAmB,iEACnBC,EAAmBD,EAAWhC,OACxBkC,EAAI,EAAGA,EAAIlC,EAAQkC,IAC1BJ,GAAUE,EAAWG,OAAOC,KAAKC,MAAMD,KAAKE,SAAWL,IAE1D,OAAOH,IAIGzE,Q,0PC1LfD,EAAQ,KAAUmF,SAElB,IAKaC,EAAW,IAAIC,IAAkB,CAAEC,kBAAmB,CAAC,KAEvDC,EAAU,IAAIC,IAAiB,CAC1CC,KAAM,CAAEC,EANL,iEAOHC,eAAgB,EAChBC,gBAVuB,OAyCZC,EAAS,IAAIC,IAAgB,CAAEC,OAAQ,uCAAkDC,SAAU,CAAC,EAAG,OCnDpHhG,EAAQ,KAAUmF,S,8DCIHc,EAPG,CAChBC,SAAU,6CACVC,SAAU,6CACVC,IAAK,6CACLC,KAAM,8CCFKC,EAAO,CAClBC,MAAOC,EACPC,QAASC,EACTP,SAAUQ,G,0BCANC,EAAiB,CAErBC,aAAa,WAAD,4BAAE,WAAOC,GAAP,SAAAhG,EAAA,6DACO,EADP,kBAGL,IAAIiG,SAAS,SAACC,EAASC,GAE5BH,EAASI,aACNlF,MAAK,SAAAmF,GAEJH,EAAQG,MAETC,OAAM,SAAAC,GACL/D,QAAQC,IAAI,qCAAmC8D,GAC/CJ,EAAOI,UAZD,2CAAF,mDAAC,GAiBbC,YAAY,WAAD,4BAAE,WAAOC,EAAMT,GAAb,SAAAhG,EAAA,6DACQ,EADR,kBAGJ,IAAIiG,SAAS,SAACC,EAASC,GAE5BH,EAASU,MAAMD,GACZvF,MAAK,SAAAmF,GACJ,IAAMM,EAAQ,eAAQN,GACtBM,EAASC,KAAOH,EAGhBP,EAAQS,MAETL,OAAM,SAAAC,GACL/D,QAAQC,IAAI,oCAAkC8D,GAC9CJ,EAAOI,UAfF,2CAAF,qDAAC,GAoBZM,wBAAwB,WAAD,4BAAE,WAAOC,EAAWd,GAAlB,SAAAhG,EAAA,+EAChB,IAAIiG,SAAS,SAACC,EAASC,GAE5BH,EAASe,mBAAmBD,GACzB5F,MAAK,SAAAmF,GACJ7D,QAAQC,IAAI,sCAAoC4D,EAAS5G,YACzDyG,EAAQG,EAAS5G,eAElB6G,OAAM,SAAAC,GAAS/D,QAAQC,IAAI,gDAA8C8D,GAAMJ,EAAOI,UARpE,2CAAF,qDAAC,GAYxBS,eAAe,WAAD,4BAAE,WAAOC,EAASjB,GAAhB,SAAAhG,EAAA,6DACK,EADL,kBAGP,IAAIiG,SAAS,SAACC,EAASC,GAE5BH,EAASkB,SAASD,GACf/F,MAAK,SAAAmF,GAEJ,IAAMM,EAAQ,eAAQN,GACtBM,EAASC,KAAOK,EAGhBf,EAAQS,MAETL,OAAM,SAAAC,GACL/D,QAAQC,IAAI,uCAAqC8D,GACjDJ,EAAOI,UAhBC,2CAAF,qDAAC,GAqBfY,gBAAgB,WAAD,4BAAE,WAAOF,EAASG,EAAYC,EAAarB,GAAzC,SAAAhG,EAAA,6DACI,EADJ,kBAGR,IAAIiG,SAAS,SAACC,EAASC,GAG5B,IAAImB,EAAStB,EAASuB,QAAQC,WAAWP,GACrCQ,EAAQL,EACRA,GAAcC,IAChBC,EAAStB,EAASuB,QAAQG,cAAcT,GACxCQ,EAAQJ,GAGVrB,EAAS2B,YAAYL,EAAQG,EAAOA,GACjCvG,MAAK,SAAAmF,GACJ,IAAIuB,EAIJvB,EAASwB,SAAQ,SAAUC,GACrBA,EAAKC,KAAKd,QAAQxH,YAAcwH,EAAQxH,aAE1CmI,EAAmBI,SAAOC,MAAMC,aAAaJ,EAAKC,KAAKI,cAK3DjC,EAAQ0B,MAETtB,OAAM,SAAAC,GACL/D,QAAQC,IAAI,wCAAsC8D,GAClDJ,EAAOI,UA/BE,2CAAF,yDAAC,GAoChB6B,wBAAwB,WAAD,4BAAE,WAAMD,GAAN,SAAAnI,EAAA,6DACJ,EADI,kBAGhB,IAAIiG,SAAS,SAACC,EAASC,GAE5B,IAAMkC,EAAMF,EAASG,MAAM,KAE3B,GAAc,GAAVD,EAAI,GAAS,CAGf,IAAME,EAAM,wBAA0BF,EAAI,GAC1CG,MAAMD,GACHrH,MAAK,SAAAmF,GAAQ,OAAIA,EAASoC,UAC1BvH,MAAK,SAAAmF,GAEJH,EAAQG,MAETC,OAAM,SAAAC,GACL/D,QAAQC,IAAI,gDAA8C8D,GAC1DJ,EAAOI,WAnBQ,2CAAF,mDAAC,GA0BxBmC,iCAAiC,WAAD,4BAAE,WAAOzB,EAASjB,GAAhB,SAAAhG,EAAA,6DACb,EADa,kBAGzB,IAAIiG,SAAS,SAACC,EAASC,GAE5BL,EAAekB,eAAeC,EAASjB,GACpC9E,MAAK,SAAAmF,GAAQ,OAAIP,EAAeqB,gBAAgBF,EAASZ,EAASsC,kBAAkBC,WAAYvC,EAASwC,mBAAmBD,WAAY5C,MACxI9E,MAAK,SAAAmF,GAAQ,OAAIP,EAAesC,wBAAwB/B,MACxDnF,MAAK,SAAAmF,GAEJH,EAAQG,MAETC,OAAM,SAAAC,GACL/D,QAAQC,IAAI,yDAAuD8D,GACnEJ,EAAOI,UAdmB,2CAAF,qDAAC,GAmBjCuC,8BAA8B,WAAD,4BAAE,WAAOrC,EAAMT,GAAb,SAAAhG,EAAA,6DACV,EADU,kBAGtB,IAAIiG,SAAS,SAACC,EAASC,GAE5BL,EAAeU,YAAYC,EAAMT,GAC9B9E,MAAK,SAAAmF,GAAQ,OAAIP,EAAe4C,iCAAiCjC,EAAMT,MACvE9E,MAAK,SAAAmF,GAEJH,EAAQG,MAETC,OAAM,SAAAC,GACL/D,QAAQC,IAAI,sDAAoD8D,GAChEJ,EAAOI,UAbgB,2CAAF,qDAAC,GAkB9BwC,yBAAyB,WAAD,4BAAE,WAAO/C,GAAP,SAAAhG,EAAA,6DACL,EADK,kBAGjB,IAAIiG,SAAS,SAACC,EAASC,GAE5BH,EAASgD,gBACN9H,MAAK,SAAAmF,GAEJH,EAAQG,EAASuC,eAElBtC,OAAM,SAAAC,GACL/D,QAAQC,IAAI,iDAA+C8D,GAC3DJ,EAAOI,UAZW,2CAAF,mDAAC,GAiBzB0C,8BAA8B,WAAD,4BAAE,WAAOC,EAASC,EAAanD,GAA7B,SAAAhG,EAAA,6DACV,EADU,kBAGtB,IAAIiG,SAAS,SAACC,EAASC,GAC5BL,EAAeiD,yBAAyB/C,GACrC9E,KADH,uCACQ,WAAOmF,GAAP,yBAAArG,EAAA,sDAiBJ,IAhBIoJ,EAAe,IAGfF,GAFEF,EAAgB3C,KAEqB,GAAZ6C,KAC7BA,EAAUF,EAAgB,IAGR,GAAhBG,IACFA,EAAcH,GAIZK,EAAgB,GAGR,EACHrF,EAAImF,EAAc,EAAGnF,GAAK,EAAGA,IAC9BsF,EAAoBJ,EAAUlF,EACpCqF,EAAcE,KAAKD,GAnBjB,OAsBEE,EAAWH,EAAcI,IAAd,uCAAkB,WAAO3C,GAAP,SAAA9G,EAAA,sEAC3B8F,EAAee,wBAAwBC,EAAWd,GACrD9E,MAAK,SAAAmF,GAAQ,OAAIP,EAAekB,eAAeX,EAAUL,MACzD9E,MAAK,SAAAmF,GAEJ+C,EAAY,CAAI/C,GAAJ,mBAAiB+C,OAE9B9C,OAAM,SAAAC,GAAG,OAAI/D,QAAQC,IAAI,qCAAsCqE,MAPjC,2CAAlB,uDAtBb,UAiCEb,QAAQyD,IAAIF,GAjCd,QAJS,EAwCbtD,EAAQkD,GApCJ,4CADR,uDAuCG9C,OAAM,SAAAC,GACL/D,QAAQC,IAAI,sDAAoD8D,GAChEJ,EAAOI,UA7CgB,2CAAF,uDAAC,GAkD9BoD,sBAAsB,WAAD,4BAAE,WAAO3D,GAAP,SAAAhG,EAAA,+EACd,IAAIiG,SAAS,SAACC,EAASC,GAE5BH,EAAS4D,aACN1I,MAAK,SAAAmF,GACJ7D,QAAQC,IAAI,oCAAkC4D,EAASuC,YACvD1C,EAAQG,EAASuC,eAElBtC,OAAM,SAAAC,GAAS/D,QAAQC,IAAI,8CAA4C8D,GAAMJ,EAAOI,UARpE,2CAAF,mDAAC,GAYtBsD,aAAa,WAAD,4BAAE,WAAOC,EAAS9D,GAAhB,SAAAhG,EAAA,6DACO,EADP,kBAGL,IAAIiG,SAAS,SAACC,EAASC,GAE5B,IAAIyB,EACJ5B,EAAS2B,YAAY,uBAClBzG,MAAK,SAAAmF,GAEJA,EAASwB,SAAQ,SAAUC,GACrBA,EAAKC,KAAK,IAAM+B,IAClBlC,EAAmBE,MAOlBF,GAA+C,GAA3BA,EAAiB9F,OAIxCoE,EAAQ0B,EAAiBG,KAAK,IAH9B7B,EAAQ,SAOXI,OAAM,SAACC,GACN/D,QAAQC,IAAI8D,GACZJ,EAAOI,UA5BD,2CAAF,qDAAC,GAiCbwD,oBAAoB,WAAD,4BAAE,WAAOtD,EAAMQ,EAASjB,GAAtB,SAAAhG,EAAA,+EACZ,IAAIiG,SAAS,SAACC,EAASC,GAE5BH,EAASgE,aAAavD,EAAMQ,GACzB/F,MAAK,SAAAmF,GACJ7D,QAAQC,IAAI,kCAAgC4D,GAC5CH,EAAQG,MAETC,OAAM,SAAAC,GAAS/D,QAAQC,IAAI,4CAA0C8D,GAAMJ,EAAOI,UARpE,2CAAF,uDAAC,GAYpB0D,2BAA2B,WAAD,4BAAE,WAAOxD,EAAMT,GAAb,SAAAhG,EAAA,+EACnB,IAAIiG,SAAS,SAACC,EAASC,GAE5BH,EAASU,MAAMD,GAAMyD,kBAClBhJ,MAAK,SAAAmF,GACJ7D,QAAQC,IAAI,yCAAuC4D,EAASuC,YAC5D1C,EAAQG,EAASuC,eAElBtC,OAAM,SAAAC,GAAS/D,QAAQC,IAAI,mDAAiD8D,GAAMJ,EAAOI,UARpE,2CAAF,qDAAC,GAY3B4D,0BAA0B,WAAD,4BAAE,WAAM1D,EAAMgB,EAAOzB,GAAnB,SAAAhG,EAAA,6DACN,EADM,kBAGlB,IAAIiG,SAAS,SAACC,EAASC,GAE5BH,EAASU,MAAMD,GACZvF,MAAK,SAACmF,GACDA,EAAS+D,cACXpE,EAASqE,qBAAqB5D,EAAMgB,GACjCvG,MAAK,SAAAmF,GAEJH,EAAQG,MAETC,OAAM,SAAAC,GACL/D,QAAQC,IAAI,6CAA2C8D,GACvDJ,EAAOI,MAKXJ,EAAO,yBAGVG,OAAM,SAAAC,GACL/D,QAAQC,IAAI,6CAA2C8D,GACvDJ,EAAOI,UAzBY,2CAAF,uDAAC,GA8B1B+D,aAAa,WAAD,4BAAE,WAAMtE,GAAN,SAAAhG,EAAA,6DACO,EADP,kBAGL,IAAIiG,SAAS,SAACC,EAASC,GAC5BH,EAASuE,YACNrJ,MAAK,SAAAmF,GAEJH,EAAQG,MAETC,OAAM,SAAAC,GACL/D,QAAQC,IAAI,qCAAmC8D,GAC/CJ,EAAOI,UAXD,2CAAF,mDAAC,GAiBbiE,wBAAyB,SAACC,EAAWC,GACnC,IAME,OALIA,IAEFD,GADAA,EAAYA,EAAUE,IAAI,OACJA,IAAI,MAE5BF,EAAYA,EAAU7B,WACf9C,EAAe8E,gBAAgBH,EAAW,GAEnD,MAAOI,GAEL,OADArI,QAAQC,IAAIoI,GACL,QAIXD,gBAAiB,SAACE,EAAKC,GACrB,IAUI/G,EAVAgH,EAAK,CACP,CAAEC,MAAO,EAAGC,OAAQ,IACpB,CAAED,MAAO,IAAKC,OAAQ,KACtB,CAAED,MAAO,IAAKC,OAAQ,KACtB,CAAED,MAAO,IAAKC,OAAQ,KACtB,CAAED,MAAO,KAAMC,OAAQ,KACvB,CAAED,MAAO,KAAMC,OAAQ,KACvB,CAAED,MAAO,KAAMC,OAAQ,MAIzB,IAAKlH,EAAIgH,EAAGlJ,OAAS,EAAGkC,EAAI,KACtB8G,GAAOE,EAAGhH,GAAGiH,OADYjH,KAK/B,OAAQ8G,EAAME,EAAGhH,GAAGiH,OAAOE,QAAQJ,GAAQK,QAPlC,2BAO8C,MAAQJ,EAAGhH,GAAGkH,SAK1DpF,I,q5CCnRf,IAAMuF,EAAYC,IAAOX,IAAV,KAYTY,EAAeD,IAAOX,IAAV,KAMZa,EAAcF,IAAOX,IAAV,KAUXc,EAAQH,IAAOI,KAAV,KAILC,EAAML,IAAOI,KAAV,KAOL,SAAAE,GAAK,MAAoB,UAAhBA,EAAMC,OAAqBC,YAA3B,QAQT,SAAAF,GAAK,MAAoB,YAAhBA,EAAMC,OAAuBC,YAA7B,QAIT,SAAAF,GAAK,MAAoB,cAAhBA,EAAMC,OAAyBC,YAA/B,QAIT,SAAAF,GAAK,MAAoB,UAAhBA,EAAMC,OAAqBC,YAA3B,QAOEC,EA/Kf,YAAuC,EAApBC,iBAAqB,IAAD,EACRC,cAArBC,EAD6B,EAC7BA,QAASC,EADoB,EACpBA,QADoB,EAGWC,IAAMC,SAAS,MAH1B,mBAG9BC,EAH8B,KAGZC,EAHY,KAKrCH,IAAMI,WAAU,WAERN,GAAaC,GACjBM,MAGD,CAACP,EAASC,IAGb,IAMMM,EAAmB,WACvBN,EAAQO,iBAAiBxL,MAAK,SAACyL,GAC7BC,EAAsBD,GAPxBR,EAAQU,GAAG,SAAS,SAACF,GACnBC,EAAsBD,UAYpBC,EAAqB,uCAAG,WAAOD,GAAP,mCAAA3M,EAAA,6DAEtB8M,EAAmB,IAAI9E,SAAO+E,SAAS5H,EAAUE,SAAUG,EAAKH,SAAU8G,GAE1Ea,EAAU,IAJY,SAKRlH,EAAeqE,0BAA0B+B,EAASS,EAAaG,GALvD,cAKtBG,EALsB,gBAMJnH,EAAewE,aAAawC,GANxB,cAMtBvC,EANsB,iBAOLzE,EAAeU,YAAY0F,EAASY,GAP/B,eAOtBI,EAPsB,OAQtBC,EAAkBD,EAASC,gBAE3BC,EAAY,IAAIpF,SAAO+E,SAAS5H,EAAUI,KAAMC,EAAKC,MAAO0G,GAVtC,UAWCiB,EAAUC,UAAUlI,EAAUE,UAX/B,QAWtBiI,EAXsB,OAatBC,EAAcD,EAAeE,IAAIjD,GACjCkD,EAAcR,EAAMS,IAAIH,GAAc5C,IAAIqC,GAS1CW,EAAM,CACVlG,MAAOkF,EACPiB,KAAMC,OAAOC,sBAAYvD,IAAYY,QAAQ,GAC7C4C,UAAWF,OAAOC,sBAAYR,IAAiBnC,QAAQ,GACvD6C,OAAQH,OAAOC,sBAAYP,IAAcpC,QAAQ,GACjD8B,OAASA,EAAMrE,WAAaoE,EAAW,KAAK7B,QAAQ,GACpDsC,WAAYI,OAAOC,sBAAYL,IAAatC,QAAQ,GACpDgC,gBAAiBA,EAAkBU,OAAOC,sBAAYX,IAAkBhC,QAAQ,GAAK,OAAS,oCAGhGoB,EAAoBoB,GAjCQ,4CAAH,sDAsC3B,OACE,kBAACtC,EAAD,KACGiB,GACC,kBAACf,EAAD,KACE,kBAACC,EAAD,KACE,kBAACG,EAAD,CAAKE,MAAM,SAAX,iBAAkCS,EAAiB7E,QAErD,kBAAC+D,EAAD,KACE,kBAACC,EAAD,uBACA,kBAACE,EAAD,CAAKE,MAAM,WAAWS,EAAiBsB,KAAvC,SAEF,kBAACpC,EAAD,KACE,kBAACC,EAAD,mCACA,kBAACE,EAAD,CAAKE,MAAM,WAAWS,EAAiByB,UAAvC,SAEF,kBAACvC,EAAD,KACE,kBAACC,EAAD,4BACA,kBAACE,EAAD,CAAKE,MAAM,WAAWS,EAAiB0B,OAAvC,SAEyB,GAAzB1B,EAAiBW,OACjB,oCACE,kBAACzB,EAAD,KACE,kBAACC,EAAD,oCACA,kBAACE,EAAD,CAAKE,MAAM,aAAaS,EAAiBW,MAAzC,MAEF,kBAACzB,EAAD,KACE,kBAACC,EAAD,qBACA,kBAACE,EAAD,CAAKE,MAAM,aAAaS,EAAiBmB,WAAzC,UAIN,kBAACjC,EAAD,KACE,kBAACC,EAAD,0BACA,kBAACE,EAAD,CAAKE,MAAM,SAASS,EAAiBa,oBAIzCb,GACF,mE,msBCtFN,IAAMjB,GAAYC,IAAOX,IAAV,MAITsD,GAAS3C,IAAOI,KAAV,MAaR,SAAAE,GAAK,MAAoB,YAAhBA,EAAMC,OAAuBC,YAA7B,SAIT,SAAAF,GAAK,MAAoB,cAAhBA,EAAMC,OAAyBC,YAA/B,SAIT,SAAAF,GAAK,MAAoB,UAAhBA,EAAMC,OAAqBC,YAA3B,QAMEoC,GApDf,YAA0C,IAAjBC,EAAgB,EAAhBA,MAAOtC,EAAS,EAATA,MAO9B,OANAO,IAAMI,WAAU,cAEb,CAAC2B,EAAOtC,IAKT,kBAAC,GAAD,KACE,kBAAC,kBAAD,CACEuC,YAAY,SACZC,aAAa,UACbC,YAAa,KAEb,kBAACL,GAAD,CAAQpC,MAAOA,GAAQsC,MCrBzBI,GAEK,QAFLA,GAGK,QAHLA,GAII,QAJJA,GAKI,SALJA,GAMK,SANLA,GAOK,SAGEC,GAAS,CACpBC,QAAQ,eAAD,OAVE,QAUF,KACPC,QAAQ,eAAD,OAAiBH,GAAjB,KACPI,QAAQ,eAAD,OAAiBJ,GAAjB,KACPK,OAAO,eAAD,OAAiBL,GAAjB,KACNM,OAAO,eAAD,OAAiBN,GAAjB,KACNO,QAAQ,eAAD,OAAiBP,GAAjB,KACPQ,QAAQ,eAAD,OAAiBR,GAAjB,KACPS,SAAS,eAAD,OAAiBT,GAAjB,M,iDCXGU,GACQ,gBADRA,GAES,iBAFTA,GAGW,mBAHXA,GAIY,oBAJZA,GAKe,uBALfA,GAMgB,wBANhBA,GAOiB,yBAPjBA,GAQkB,0BAGVC,G,kDAGjBC,MAAQ,CACNnG,eAAgB,EAChBoG,aAAc,GACdC,aAAc,GAEdC,UAAW,GAEXpD,QAAS,KACTF,iBAAkB,M,KAIpBuD,KAAO,SAACrD,EAASF,GAEf,EAAKmD,MAAMjD,QAAUA,EAGrB,EAAKsD,yBACL,EAAKL,MAAMnD,iBAAmBA,EAC9B,EAAKyD,6BAGL,EAAKC,yB,KAIPF,uBAAyB,WAEnB,EAAKL,MAAMnD,mBACb,EAAKmD,MAAMnD,iBAAiB2D,mBAAmB,cAC/C,EAAKR,MAAMnD,iBAAiB2D,mBAAmB,iBAC/C,EAAKR,MAAMnD,iBAAiB2D,mBAAmB,aAC/C,EAAKR,MAAMnD,iBAAiB2D,mBAAmB,iB,KAKnDF,2B,sBAA6B,sBAAAzP,EAAA,sEAErB,EAAK4P,8BAFgB,uBAGrB,EAAKC,+BAHgB,uBAKrB,EAAKC,iCALgB,uBAMrB,EAAKC,kCANgB,wBAQrB,EAAKC,6BARgB,yBASrB,EAAKC,8BATgB,yBAUrB,EAAKC,+BAVgB,yBAWrB,EAAKC,gCAXgB,4C,KAe7BP,4B,sBAA8B,8BAAA5P,EAAA,sDACtBgG,EAAW,EAAKmJ,MAAMnD,iBACxB1E,EAAStB,EAASuB,QAAQC,WAAW,KAAM,MAE/CxB,EAAS6G,GAAGvF,EAAZ,uCAAoB,WAAOL,EAASmJ,GAAhB,qBAAApQ,EAAA,sEAEZ,EAAKqQ,4BAA4B,GAFrB,OAKlB,GAAI,EAAKlB,MAAMG,UAAUL,IACvB,UAAmCqB,OAAOC,QAAQ,EAAKpB,MAAMG,UAAUL,KAAvE,eAAyG,EAAD,0BAAlFuB,EAAkF,OACtFA,EAASvJ,EAASmJ,GAPpB,2CAApB,yDAJ4B,2C,KAkB9BP,6B,sBAA+B,8BAAA7P,EAAA,sDACvBgG,EAAW,EAAKmJ,MAAMnD,iBACxB1E,EAAStB,EAASuB,QAAQC,WAAW,EAAK2H,MAAMjD,QAAS,MAE7DlG,EAAS6G,GAAGvF,EAAZ,uCAAoB,WAAOL,EAASmJ,GAAhB,qBAAApQ,EAAA,sDAKlB,GAAI,EAAKmP,MAAMG,UAAUL,IACvB,UAAmCqB,OAAOC,QAAQ,EAAKpB,MAAMG,UAAUL,KAAvE,eAA0G,EAAD,0BAAnFuB,EAAmF,OACvFA,EAASvJ,EAASmJ,GAPpB,2CAApB,yDAJ6B,2C,KAkB/BN,+B,sBAAiC,8BAAA9P,EAAA,sDACzBgG,EAAW,EAAKmJ,MAAMnD,iBACxB1E,EAAStB,EAASuB,QAAQG,cAAc,KAAM,MAElD1B,EAAS6G,GAAGvF,EAAZ,uCAAoB,WAAOL,EAASmJ,GAAhB,qBAAApQ,EAAA,sDAElB,GAAI,EAAKmP,MAAMG,UAAUL,IACvB,UAAmCqB,OAAOC,QAAQ,EAAKpB,MAAMG,UAAUL,KAAvE,eAA4G,EAAD,0BAArFuB,EAAqF,OACzFA,EAASvJ,EAASmJ,GAJpB,2CAApB,yDAJ+B,2C,KAejCL,gC,sBAAkC,8BAAA/P,EAAA,sDAC1BgG,EAAW,EAAKmJ,MAAMnD,iBACxB1E,EAAStB,EAASuB,QAAQG,cAAc,EAAKyH,MAAMjD,QAAS,MAEhElG,EAAS6G,GAAGvF,EAAZ,uCAAoB,WAAOL,EAASmJ,GAAhB,qBAAApQ,EAAA,sDAElB,GAAI,EAAKmP,MAAMG,UAAUL,IACvB,UAAmCqB,OAAOC,QAAQ,EAAKpB,MAAMG,UAAUL,KAAvE,eAA6G,EAAD,0BAAtFuB,EAAsF,OAC1FA,EAASvJ,EAASmJ,GAJpB,2CAApB,yDAJgC,2C,KAelCJ,2B,sBAA6B,8BAAAhQ,EAAA,sDACrBgG,EAAW,EAAKmJ,MAAMnD,iBACxB1E,EAAStB,EAASuB,QAAQkJ,UAAU,KAAM,MAE9CzK,EAAS6G,GAAGvF,EAAZ,uCAAoB,WAAOL,EAASR,GAAhB,yBAAAzG,EAAA,sDAUlB,GARI,EAAKmP,MAAMC,aAAanI,KACpBH,EAAY,EAAKqI,MAAMC,aAAanI,GACtCyJ,EAAQ,EAAKvB,MAAMC,aAAatI,GAAW6J,YAAY/H,WAC3D8H,GAAgB,EAChB,EAAKvB,MAAMC,aAAatI,GAAW6J,YAAcC,uBAAaF,IAI5D,EAAKvB,MAAMG,UAAUL,IACvB,UAAmCqB,OAAOC,QAAQ,EAAKpB,MAAMG,UAAUL,KAAvE,eAAgH,EAAD,0BAAzFuB,EAAyF,OAC7FA,EAASvJ,EAASR,GAZpB,2CAApB,yDAJ2B,2C,KAuB7BwJ,4B,sBAA8B,8BAAAjQ,EAAA,sDACtBgG,EAAW,EAAKmJ,MAAMnD,iBACxB1E,EAAStB,EAASuB,QAAQkJ,UAAU,EAAKtB,MAAMjD,QAAS,MAE5DlG,EAAS6G,GAAGvF,EAAZ,uCAAoB,WAAOL,EAASR,GAAhB,qBAAAzG,EAAA,sDAElB,GAAI,EAAKmP,MAAMG,UAAUL,IACvB,UAAmCqB,OAAOC,QAAQ,EAAKpB,MAAMG,UAAUL,KAAvE,eAAiH,EAAD,0BAA1FuB,EAA0F,OAC9FA,EAASvJ,EAASR,GAJpB,2CAApB,yDAJ4B,2C,KAe9ByJ,6B,sBAA+B,8BAAAlQ,EAAA,sDACvBgG,EAAW,EAAKmJ,MAAMnD,iBACxB1E,EAAStB,EAASuB,QAAQsJ,YAAY,KAAM,MAEhD7K,EAAS6G,GAAGvF,EAAZ,uCAAoB,WAAOL,EAASR,GAAhB,yBAAAzG,EAAA,sDAUlB,GARI,EAAKmP,MAAMC,aAAanI,KACpBH,EAAY,EAAKqI,MAAMC,aAAanI,GACtCyJ,EAAQ,EAAKvB,MAAMC,aAAatI,GAAW6J,YAAY/H,WAC3D8H,GAAgB,EAChB,EAAKvB,MAAMC,aAAatI,GAAW6J,YAAcC,uBAAaF,IAI5D,EAAKvB,MAAMG,UAAUL,IACvB,UAAmCqB,OAAOC,QAAQ,EAAKpB,MAAMG,UAAUL,KAAvE,eAAkH,EAAD,0BAA3FuB,EAA2F,OAC/FA,EAASvJ,EAASR,GAZpB,2CAApB,yDAJ6B,2C,KAuB/B0J,8B,sBAAgC,8BAAAnQ,EAAA,sDACxBgG,EAAW,EAAKmJ,MAAMnD,iBACxB1E,EAAStB,EAASuB,QAAQsJ,YAAY,EAAK1B,MAAMjD,QAAS,MAE9DlG,EAAS6G,GAAGvF,EAAZ,uCAAoB,WAAOL,EAASR,GAAhB,qBAAAzG,EAAA,sDAElB,GAAI,EAAKmP,MAAMG,UAAUL,IACvB,UAAmCqB,OAAOC,QAAQ,EAAKpB,MAAMG,UAAUL,KAAvE,eAAmH,EAAD,0BAA5FuB,EAA4F,OAChGA,EAASvJ,EAASR,GAJpB,2CAApB,yDAJ8B,2C,KAehCqK,aAAe,SAACC,EAAcC,EAAYR,GAEnC,EAAKrB,MAAMG,UAAUyB,KACxB,EAAK5B,MAAMG,UAAUyB,GAAgB,IAGlC,EAAK5B,MAAMG,UAAUyB,GAAcC,KACtC,EAAK7B,MAAMG,UAAUyB,GAAcC,GAAcR,I,KAIrDS,gBAAkB,SAACF,EAAcC,GAE3B,EAAK7B,MAAMG,UAAUyB,GAAcC,KACrC,EAAK7B,MAAMG,UAAUyB,GAAcC,GAAc,O,KAKrDtB,sB,sBAAwB,sBAAA1P,EAAA,6DACH,EADG,kBAGf,IAAIiG,QAAJ,uCAAa,WAAOC,EAASC,GAAhB,SAAAnG,EAAA,uDACe,GAA7B,EAAKmP,MAAMnG,cAEClD,EAAeiD,yBAAyB,EAAKoG,MAAMnD,kBAC9D9K,MAAK,SAAAmF,GACJ,EAAK8I,MAAMnG,cAAgB3C,EAG3BH,EAAQ,EAAKiJ,MAAMnG,kBAEpB1C,OAAM,SAAAC,GACL/D,QAAQC,IAAI,8CAA4C8D,GACxDJ,EAAOI,MAIXL,EAAQ,EAAKiJ,MAAMnG,eAhBH,2CAAb,0DAHe,2C,KAwBxBqH,4B,uCAA8B,WAAOa,GAAP,SAAAlR,EAAA,+EACrB,IAAIiG,SAAS,SAACC,EAASC,GAC5B,EAAKuJ,wBACFxO,MAAK,SAAAmF,GACJ,EAAK8I,MAAMnG,cAAgB3C,EAAW6K,EACtC1O,QAAQC,IAAI,0CAAwC,EAAK0M,MAAMnG,eAC/D9C,EAAQ,EAAKiJ,MAAMnG,kBAEpB1C,OAAM,SAAAC,GAAS/D,QAAQC,IAAI,oDAAkD8D,GAAMJ,EAAOI,UARnE,2C,2DAe9B4K,qB,uCAAuB,WAAOjI,EAASC,GAAhB,SAAAnJ,EAAA,+EACd,IAAIiG,QAAJ,uCAAa,WAAOC,EAASC,GAAhB,2BAAAnG,EAAA,sEAEU,EAAK0P,wBAFf,OAkBlB,IAhBM1G,EAFY,QAIF,GAAZE,IACFA,EAAUF,EAAgB,IAGR,GAAhBG,IACFA,EAAcH,GAIZoG,EAAe,GACfgC,EAAgB,GAGhBV,EAAQ,EACH1M,EAAI,EAAGA,EAAImF,EAAanF,IACzBsF,EAAoBJ,EAAUlF,EACpCoN,EAAcV,GAASpH,EACvBoH,GAAgB,EArBA,OAwBZlH,EAAW4H,EAAc3H,IAAd,uCAAkB,WAAO3C,GAAP,SAAA9G,EAAA,sEAE3B,EAAKqR,oBAAoBvK,GAC5B5F,MAAK,SAAAmF,GACJ,IAAMM,EAAQ,eAAQN,GACtBM,EAAS2K,GAAKxK,EAEdsI,EAAY,CAAIzI,GAAJ,mBAAiByI,OAE9B9I,OAAM,SAAAC,GAAG,OAAI/D,QAAQC,IAAI,2DAAyD8D,MATpD,2CAAlB,uDAxBC,UAqCZN,QAAQyD,IAAIF,GArCA,QAuClB4F,EAAamC,MAAK,SAACvR,EAAGwR,GACpB,OAAIxR,EAAEsR,GAAKE,EAAEF,IAAY,EACrBtR,EAAEsR,GAAKE,EAAEF,GAAW,EACjB,KAIT9O,QAAQC,IAAI,gDAA8CyG,EAAUC,EAAc,EAAGD,EAASkG,GAC9FlJ,EAAQkJ,GA/CU,4CAAb,0DADc,2C,6DAqDvBiC,oB,uCAAsB,WAAOvK,GAAP,SAAA9G,EAAA,+EACb,IAAIiG,QAAJ,uCAAa,WAAOC,EAASC,GAAhB,eAAAnG,EAAA,0DACd,EAAKmP,MAAMC,aAAatI,GADV,gBAEhBtE,QAAQC,IAAI,2CAAyC,EAAK0M,MAAMC,aAAatI,IAC7EZ,EAAQ,EAAKiJ,MAAMC,aAAatI,IAHhB,sCAQVhB,EAAee,wBAAwBC,EAAW,EAAKqI,MAAMnD,kBAChE9K,KADG,uCACE,WAAMmF,GAAN,SAAArG,EAAA,6DACJyR,EAAiBpL,EADb,SAEE,EAAKqL,8BAA8BD,GACtCvQ,MAAK,SAAAmF,GAEJ,EAAK8I,MAAMC,aAAatI,GAAaT,EACrC,EAAK8I,MAAMC,aAAaqC,GAAkB3K,EAG1CtE,QAAQC,IAAI,gDAA8CgP,EAAgBpL,GAC1EH,EAAQG,MAVR,2CADF,uDAcHC,OAAM,SAAAC,GAAS/D,QAAQC,IAAI,4CAA0C8D,GAAMJ,EAAOI,MAtBrE,2CAAb,0DADa,2C,2DA6BtBmL,8B,uCAAgC,WAAOD,GAAP,SAAAzR,EAAA,+EACvB,IAAIiG,QAAJ,uCAAa,WAAOC,EAASC,GAAhB,eAAAnG,EAAA,0DACd,EAAKmP,MAAMC,aAAaqC,GADV,gBAEV3K,EAAY,EAAKqI,MAAMC,aAAaqC,GAE1CjP,QAAQC,IAAI,qDAAmD,EAAK0M,MAAMC,aAAatI,IACvFZ,EAAQ,EAAKiJ,MAAMC,aAAatI,IALhB,sCASVhB,EAAekB,eAAeyK,EAAgB,EAAKtC,MAAMnD,kBAC5D9K,MAAK,SAAAmF,GAEJ7D,QAAQC,IAAI,0DAAwDgP,EAAgBpL,GACpFH,EAAQG,MAETC,OAAM,SAAAC,GAAS/D,QAAQC,IAAI,sDAAoD8D,GAAMJ,EAAOI,MAf/E,2CAAb,0DADuB,2C,2DAuBhCoL,oB,uCAAsB,WAAOF,GAAP,SAAAzR,EAAA,+EACb,IAAIiG,QAAJ,uCAAa,WAAOC,EAASC,GAAhB,SAAAnG,EAAA,0DACd,EAAKmP,MAAME,aAAaoC,GADV,gBAEhBjP,QAAQC,IAAI,2CAAyC,EAAK0M,MAAME,aAAaoC,IAC7EvL,EAAQ,EAAKiJ,MAAME,aAAaoC,IAHhB,sCAMV3L,EAAe4C,iCAAiC+I,EAAgB,EAAKtC,MAAMnD,kBAC9E9K,MAAK,SAAAmF,GAEJ,EAAK8I,MAAME,aAAaoC,GAAkBpL,EAG1C7D,QAAQC,IAAI,gDAA8CgP,EAAgBpL,GAC1EH,EAAQG,MAETC,OAAM,SAAAC,GAAS/D,QAAQC,IAAI,4CAA0C8D,GAAMJ,EAAOI,MAfrE,2CAAb,0DADa,2C,uDAxWL2I,GACV0C,SAAW1C,GAAkB0C,UAAY,IAAI1C,GCZjD,IAAM2C,GACG,aADHA,GAEK,eAMGC,G,kDAGjB3C,MAAQ,CACNvF,YAAa,EACbmI,SAAU,KACVC,UAAW,KAEX1C,UAAW,GAEXpD,QAAS,KACTF,iBAAkB,M,KAIpBuD,KAAO,SAACrD,EAASF,GAEf,EAAKmD,MAAMjD,QAAUA,EAGrB,EAAK+F,sBACL,EAAK9C,MAAMnD,iBAAmBA,EAC9B,EAAKkG,0BAGL,EAAKC,oBACL,EAAKC,qBACL,EAAKC,oB,KAIPJ,oBAAsB,WAEhB,EAAK9C,MAAMnD,mBACb,EAAKmD,MAAMnD,iBAAiB2D,mBAAmB,aAC/C,EAAKR,MAAMnD,iBAAiB2D,mBAAmB,eAC/C,EAAKR,MAAMnD,iBAAiB2D,mBAAmB,uBAC/C,EAAKR,MAAMnD,iBAAiB2D,mBAAmB,cAC/C,EAAKR,MAAMnD,iBAAiB2D,mBAAmB,sBAIjD,EAAKR,MAAM4C,SAAW,M,KAIxBG,wB,sBAA0B,sBAAAlS,EAAA,sEAElB,EAAKsS,2BAFa,uBAGlB,EAAKC,6BAHa,UAKnB,EAAKpD,MAAM4C,YAAa,EAAK5C,MAAM4C,UAAa,EAAK5C,MAAM4C,SAASS,qBALjD,gCAMhB,EAAKC,mCANW,2C,KAW1BH,yB,sBAA2B,8BAAAtS,EAAA,sDACnBgG,EAAW,EAAKmJ,MAAMnD,iBACxB1E,EAAStB,EAASuB,QAAQkJ,UAAU,KAAM,EAAKtB,MAAMjD,SAErD,EAAKiD,MAAM4C,WACb,EAAK5C,MAAM4C,SAAS7H,gBAAkB,EAAKiF,MAAM4C,SAAS7H,gBAAgBwI,IAAI,IAGhF1M,EAAS6G,GAAGvF,EAAZ,uCAAoB,WAAOL,EAASR,GAAhB,qBAAAzG,EAAA,sDAElB,GAAI,EAAKmP,MAAMG,UAAUuC,IACvB,UAAmCvB,OAAOC,QAAQ,EAAKpB,MAAMG,UAAUuC,KAAvE,eAAiG,EAAD,0BAA1ErB,EAA0E,OAC9EA,EAASvJ,EAASR,GAJpB,2CAApB,yDARyB,2C,KAmB3B8L,2B,sBAA6B,8BAAAvS,EAAA,sDACrBgG,EAAW,EAAKmJ,MAAMnD,iBACxB1E,EAAStB,EAASuB,QAAQsJ,YAAY,KAAM,EAAK1B,MAAMjD,SAEvD,EAAKiD,MAAM4C,WACb,EAAK5C,MAAM4C,SAAS7H,gBAAkB,EAAKiF,MAAM4C,SAAS7H,gBAAgBsD,IAAI,IAGhFxH,EAAS6G,GAAGvF,EAAZ,uCAAoB,WAAOL,EAASR,GAAhB,qBAAAzG,EAAA,sDAElB,GAAI,EAAKmP,MAAMG,UAAUuC,IACvB,UAAmCvB,OAAOC,QAAQ,EAAKpB,MAAMG,UAAUuC,KAAvE,eAAmG,EAAD,0BAA5ErB,EAA4E,OAChFA,EAASvJ,EAASR,GAJpB,2CAApB,yDAR2B,2C,KAmB7BgM,iC,sBAAmC,8BAAAzS,EAAA,sDAC3BgG,EAAW,EAAKmJ,MAAMnD,iBACxB1E,EAAStB,EAASuB,QAAQoL,oBAAoB,EAAKxD,MAAMjD,QAAS,MAElE,EAAKiD,MAAM4C,WACb,EAAK5C,MAAM4C,SAASS,qBAAsB,GAG5CxM,EAAS4M,KAAKtL,EAAd,uCAAsB,WAAOL,EAASR,GAAhB,qBAAAzG,EAAA,sDAEpB,GAAI,EAAKmP,MAAMG,UAAUuC,IACvB,UAAmCvB,OAAOC,QAAQ,EAAKpB,MAAMG,UAAUuC,KAAvE,eAAmG,EAAD,0BAA5ErB,EAA4E,OAChFA,EAASvJ,EAASR,GAJlB,2CAAtB,yDARiC,2C,KAmBnCqK,aAAe,SAACC,EAAcC,EAAYR,GAEnC,EAAKrB,MAAMG,UAAUyB,KACxB,EAAK5B,MAAMG,UAAUyB,GAAgB,IAGlC,EAAK5B,MAAMG,UAAUyB,GAAcC,KACtC,EAAK7B,MAAMG,UAAUyB,GAAcC,GAAcR,I,KAIrDS,gBAAkB,SAACF,EAAcC,GAE3B,EAAK7B,MAAMG,UAAUyB,GAAcC,KACrC,EAAK7B,MAAMG,UAAUyB,GAAcC,GAAc,O,KAKrDmB,kB,sBAAoB,sBAAAnS,EAAA,6DACC,EADD,kBAGX,IAAIiG,SAAS,SAACC,EAASC,GACxB,EAAKgJ,MAAM6C,UAEb9L,EAAQ,EAAKiJ,MAAM6C,WAGnBlM,EAAeC,aAAa,EAAKoJ,MAAMnD,kBACpC9K,MAAK,SAAAmF,GACJ,EAAK8I,MAAM6C,UAAY3L,EAGvBH,EAAQ,EAAKiJ,MAAM6C,cAEpB1L,OAAM,SAAAC,GACL/D,QAAQC,IAAI,0CAAwC8D,GACpDJ,EAAOI,UAlBG,2C,KAyBpB6L,mB,sBAAqB,sBAAApS,EAAA,+EACZ,IAAIiG,QAAJ,uCAAa,WAAOC,EAASC,GAAhB,SAAAnG,EAAA,uDACe,GAA7B,EAAKmP,MAAMnG,cAEClD,EAAe6D,sBAAsB,EAAKwF,MAAMnD,kBAC3D9K,MAAK,SAAAmF,GACJ,EAAK8I,MAAMvF,WAAavD,EACxB7D,QAAQC,IAAI,iCAA+B4D,GAC3CH,EAAQ,EAAKiJ,MAAMvF,eAEpBtD,OAAM,SAAAC,GAAS/D,QAAQC,IAAI,2CAAyC8D,GAAMJ,EAAOI,MAGpFL,EAAQ,EAAKiJ,MAAMvF,YAZH,2CAAb,0DADY,2C,KAkBrBiJ,yB,uCAA2B,WAAO3B,GAAP,SAAAlR,EAAA,+EAClB,IAAIiG,SAAS,SAACC,EAASC,GAC5B,EAAKiM,qBACFlR,MAAK,SAAAmF,GACJ,EAAK8I,MAAMvF,WAAavD,EAAW6K,EACnC1O,QAAQC,IAAI,0CAAwC,EAAK0M,MAAMvF,YAC/D1D,EAAQ,EAAKiJ,MAAMvF,eAEpBtD,OAAM,SAAAC,GAAS/D,QAAQC,IAAI,2CAAyC8D,GAAMJ,EAAOI,UAR7D,2C,2DAa3B8L,iB,sBAAmB,sBAAArS,EAAA,6DACE,EADF,kBAGV,IAAIiG,SAAS,SAACC,EAASC,GACxB,EAAKgJ,MAAM4C,SAEb7L,EAAQ,EAAKiJ,MAAM4C,UAGnBjM,EAAeU,YAAY,EAAK2I,MAAMjD,QAAS,EAAKiD,MAAMnD,kBACvD9K,MAAK,SAAAmF,GACJ,EAAK8I,MAAM4C,SAAW1L,EAGtBH,EAAQ,EAAKiJ,MAAM4C,aAEpBzL,OAAM,SAAAC,GACL/D,QAAQC,IAAI,yCAAuC8D,GACnDJ,EAAOI,UAlBE,4C,uqKA7LFuL,GACVF,SAAWE,GAAeF,UAAY,IAAIE,GC6WrD,IAAMzG,GAAYC,IAAOX,IAAV,MAcTmI,GAAkBxH,IAAOX,IAAV,MAEV,SAAAiB,GAAK,OAAIA,EAAMmH,IAAM,MAAO,KAC3B,SAAAnH,GAAK,OAAIA,EAAMoH,OACR,SAAApH,GAAK,OAAIA,EAAMqH,cAAgB,MAC/B,SAAArH,GAAK,OAAIA,EAAMsH,cAAgB,KAChC,SAAAtH,GAAK,OAAIA,EAAMuH,aAAe,KAG1CC,GAAc9H,IAAOX,IAAV,MAeX0I,GAAmB/H,IAAOX,IAAV,MAKhB2I,GAAmBhI,IAAOX,IAAV,MAahB4I,GAAiBjI,IAAOkI,IAAV,MAOdC,GAAcnI,IAAOX,IAAV,MASX+I,GAAepI,IAAOX,IAAV,MAIZgJ,GAAmBrI,IAAOtL,EAAV,MAYhB4T,GAActI,IAAOX,IAAV,MASXkJ,GAAmBvI,IAAOwI,MAAV,MAIhBC,GAAczI,IAAOX,IAAV,MAMXqJ,GAAiB1I,IAAOwI,MAAV,MASdG,GAAc3I,IAAOX,IAAV,MAMXuJ,GAAmB5I,YAAO0I,GAAP1I,CAAH,MAIhB6I,GAAO7I,IAAOX,IAAV,MAOJyJ,GAAY9I,YAAO0I,GAAP1I,CAAH,MAIT+I,GAAY/I,IAAOX,IAAV,KAKJ6D,GAAOI,QAKZ0F,GAAiBhJ,IAAOX,IAAV,MASd4J,GAAsBjJ,IAAOkJ,OAAV,MAuBpB,SAAA5I,GAAK,OAAIA,EAAM6I,UAAY3I,YAAlB,SAcR4I,GAAcpJ,IAAOI,KAAV,MACZ,SAAAE,GAAK,OAAIA,EAAM+I,QAAU7I,YAAhB,SAKR8I,GAAetJ,IAAOX,IAAV,MAWZkK,GAAiBvJ,IAAOX,IAAV,MAYdmK,GAAkBxJ,YAAOiJ,GAAPjJ,CAAH,MAIfyJ,GAAoBzJ,YAAOiJ,GAAPjJ,CAAH,MAIjB0J,GAAc1J,YAAOiJ,GAAPjJ,CAAH,MAIX2J,GAAU3J,IAAOX,IAAV,MAOPuK,GAAa5J,IAAOX,IAAV,MAKDwK,GA9lBf,YAA0F,IAA/DC,EAA8D,EAA9DA,cAAeC,EAA+C,EAA/CA,QAASrJ,EAAsC,EAAtCA,iBAAkBsJ,EAAoB,EAApBA,iBAAoB,EAC1DrJ,cAArBC,EAD+E,EAC/EA,QAASC,EADsE,EACtEA,QADsE,EAG/CC,IAAMC,SAAS,IAHgC,mBAG/EkJ,EAH+E,KAGlEC,EAHkE,OAIjDpJ,IAAMC,UAAS,GAJkC,mBAI/EoJ,EAJ+E,KAInEC,EAJmE,OAKvDtJ,IAAMC,UAAS,GALwC,mBAK/EsJ,EAL+E,KAKtEC,EALsE,OAO7CxJ,IAAMC,UAAS,GAP8B,mBAO/EwJ,EAP+E,KAOjEC,EAPiE,KAUvF1J,IAAMI,WAAU,WACduJ,IACAC,MACC,CAAC9J,EAASkJ,IAGb,IAAMW,EAAgB,uCAAG,8BAAA/V,EAAA,sEACGkP,GAAkB0C,SAASD,oBAAoByD,EAAcxO,MADhE,cACjB2O,EADiB,gBAEJzP,EAAeiE,oBAAoBmC,EAASkJ,EAAcxO,KAAMoF,GAF5D,OAEjBiK,EAFiB,OAGvBP,EAAcO,GAEdT,EAAeD,GACfK,GAAW,GANY,2CAAH,qDAUhBI,EAAoB,WACxBlE,GAAeF,SAASd,aACtBe,GACA,uBACA,WACE6D,GAAc,GACdN,EAAczE,YAAcyE,EAAczE,YAAY+B,IAAI,MAI9DZ,GAAeF,SAASd,aACtBe,GACA,uBACA,WACE6D,GAAc,GACdN,EAAczE,YAAcyE,EAAczE,YAAYnD,IAAI,MAI9D0B,GAAkB0C,SAASd,aACzB7B,GACA,uBACA,SAAChI,EAASR,GACJQ,IAAYmO,EAAcxO,OAC5BwO,EAAczE,YAAcyE,EAAczE,YAAY+B,IAAI,OAKhExD,GAAkB0C,SAASd,aACzB7B,GACA,uBACA,SAAChI,EAASR,GACJQ,IAAYmO,EAAcxO,OAC5BwO,EAAczE,YAAcyE,EAAczE,YAAYnD,IAAI,QAO5D0I,EAAS,uCAAG,4BAAAlW,EAAA,sEAEO8R,GAAeF,SAASS,mBAF/B,cAGFG,oBA6BZ2D,GAAgB,IA5BVxT,EAAM,4FAGZwJ,EACGiK,UAAUlK,GACVmK,YAAY1T,GACZzB,KAHH,uCAGQ,WAAMoV,GAAN,iBAAAtW,EAAA,sDACED,EAAYwW,2BAAiBC,mBAASC,sBAAY9T,IAAO2T,GACzDI,EAAkB3W,EAAU4W,MAAM,EAAG,GAAK5W,EAAU4W,MAAM,GAEhER,EAAgBO,GAJZ,2CAHR,uDASGpQ,OAAM,SAAAsQ,GAELC,IAAMC,KAAK,2DAA4D,CACrEC,SAAU,eACVC,UAAW,IACXC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,EACXC,cAAUC,IAGZnB,GAAgB,OA5BN,2CAAH,qDAoCTA,EAAe,uCAAG,WAAOoB,GAAP,SAAAvX,EAAA,sDACtB8V,GAAgB,IAIZyB,EACkBjC,EAAiBkC,uBAAuBpC,EAAcxO,KAAM2Q,GAG5DjC,EAAiBY,UAAUd,EAAcxO,OAI5D1F,KADH,uCACQ,WAAMuW,GAAN,eAAAzX,EAAA,6DAEA0X,EAAUb,IAAMC,KAAK,kBAACa,EAAD,CAAahV,IAAI,8BAA8BiV,MAAM,YAAa,CACzFb,SAAU,eACVC,WAAW,EACXC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,EACXC,cAAUC,IATR,kBAaInL,EAAQ0L,mBAAmBJ,EAAGK,MAblC,OAeFjB,IAAMkB,OAAOL,EAAS,CACpBM,OAAQ,yBACRC,KAAMpB,IAAMqB,KAAKC,QACjBnB,UAAW,MAGblB,GAAgB,GArBd,gDAwBFe,IAAMkB,OAAOL,EAAS,CACpBM,OAAQ,wBAA0B,KAAEI,KAAO,IAC3CH,KAAMpB,IAAMqB,KAAKG,MACjBrB,UAAW,MAGblB,GAAgB,GA9Bd,yDADR,uDAkCGxP,OAAM,SAAAC,GACLsQ,IAAMC,KAAK,yBAA0B,CACnCC,SAAU,eACVkB,KAAMpB,IAAMqB,KAAKG,MACjBrB,UAAW,IACXC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,EACXC,cAAUC,IAGZxB,GAAgB,MA1DE,2CAAH,sDA8DfwC,EAAiB,uCAAG,sBAAAtY,EAAA,sDACxB8V,GAAgB,GAEQR,EAAiBiD,YAAYnD,EAAcxO,MAGhE1F,KADH,uCACQ,WAAMuW,GAAN,eAAAzX,EAAA,6DAEA0X,EAAUb,IAAMC,KAAK,kBAACa,EAAD,CAAahV,IAAI,8BAA8BiV,MAAM,YAAa,CACzFb,SAAU,eACVC,WAAW,EACXC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,EACXC,cAAUC,IATR,kBAaInL,EAAQ0L,mBAAmBJ,EAAGK,MAblC,OAeFjB,IAAMkB,OAAOL,EAAS,CACpBM,OAAQ,yBACRC,KAAMpB,IAAMqB,KAAKC,QACjBnB,UAAW,MAGblB,GAAgB,GArBd,gDAwBFe,IAAMkB,OAAOL,EAAS,CACpBM,OAAQ,wBAA0B,KAAEI,KAAO,IAC3CH,KAAMpB,IAAMqB,KAAKG,MACjBrB,UAAW,MAGblB,GAAgB,GA9Bd,yDADR,uDAkCGxP,OAAM,SAAAC,GACLsQ,IAAMC,KAAK,yBAA0B,CACnCC,SAAU,eACVkB,KAAMpB,IAAMqB,KAAKG,MACjBrB,UAAW,IACXC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,EACXC,cAAUC,IAGZxB,GAAgB,MAnDI,2CAAH,qDAwDjB6B,EAAc,SAAC,GAAD,IAAGhV,EAAH,EAAGA,IAAKiV,EAAR,EAAQA,MAAR,OAClB,kBAAC3C,GAAD,KACE,kBAAC,IAAD,CACCgD,KAAK,OACLL,MAAOA,EACPY,OAAQ,GACRC,MAAO,KAER,kBAACvD,GAAD,KAAavS,KAKjB,OACE,kBAAC,GAAD,CAAWrD,IAAK8V,EAAcxO,MAC5B,kBAACwM,GAAD,KACE,kBAACC,GAAD,KACE,kBAACC,GAAD,KACCqC,GACC,kBAAC,KAAD,CAAUiC,MAAM,OAAOa,MAAM,OAAOD,OAAO,UAE3C7C,GACA,kBAACpC,GAAD,CAAgBmF,IAAG,UAAKnD,EAAYoD,WAM1C,kBAAClF,GAAD,KACE,kBAACC,GAAD,KACGiC,GACC,kBAAC,KAAD,CAAUiC,MAAM,OAAOa,MAAM,MAAMD,OAAQ,MAE3C7C,GACA,kBAAChC,GAAD,CAAkBiF,KAAMrD,EAAYhN,IAAKsQ,OAAO,SAASC,IAAI,YAAYvD,EAAY6C,OAIzF,kBAACxE,GAAD,KACG+B,GACC,oCACE,kBAAC7C,GAAD,CAAiBE,IAAK,EAAGD,IAAK,KAC5B,kBAAC,KAAD,CAAU6E,MAAM,OAAOa,MAAM,OAAOD,OAAQ,KAG9C,kBAAC1F,GAAD,CAAiBE,IAAK,EAAGD,IAAK,KAC5B,kBAAC,KAAD,CAAU6E,MAAM,OAAOa,MAAM,OAAOD,OAAQ,KAG9C,kBAAC1F,GAAD,CAAiBE,IAAK,EAAGD,IAAK,KAC5B,kBAAC,KAAD,CAAU6E,MAAM,OAAOa,MAAM,MAAMD,OAAQ,OAI/C7C,GACA,kBAAC9B,GAAD,KAAmB0B,EAAYwD,OAInC,kBAAChF,GAAD,KACG4B,GACC,oCACE,kBAAC7C,GAAD,CAAiBE,IAAK,GAAID,IAAK,GAAIG,aAAa,KAC9C,kBAAC,KAAD,SAIJyC,GACA,oCACE,kBAAC1B,GAAD,KACE,kBAAC,KAAD,CAAY1F,KAAM,GAAIqJ,MAAM,SAC5B,kBAAC1D,GAAD,KACGpO,EAAe0E,wBAAwB4K,EAAczE,eAG1D,kBAACwD,GAAD,KACE,kBAAC,KAAD,CAAY5F,KAAM,GAAIqJ,MAAM,SAC5B,kBAACxD,GAAD,KACGtO,EAAe0E,wBAAwB4K,EAAc4D,kBAAkB,GAAQ,cAOzF9M,KAAaC,GACd,oCACE,kBAACkI,GAAD,MACA,kBAACC,GAAD,KACGqB,GACC,kBAACd,GAAD,KACE,kBAAC,KAAD,QAGFc,IAAYF,GACZ,kBAACX,GAAD,CAAiBmE,QAAS/C,EAAWzB,SAAUoB,GAC5CA,GACC,kBAACjB,GAAD,KACE,kBAAC,IAAD,CACCqD,KAAK,OACLL,MAAM,OACNY,OAAQ,GACRC,MAAO,MAIZ,kBAAC/D,GAAD,CAAaC,OAAQkB,GAArB,eAGFF,GAAWF,GACX,oCACCJ,GACC,kBAACL,GAAD,CAAaP,UAAQ,GAArB,UAEAY,GACA,kBAACN,GAAD,CAAmBkE,QAASX,EAAmB7D,SAAUoB,GACtDA,GACC,kBAACjB,GAAD,KACE,kBAAC,IAAD,CACCqD,KAAK,OACLL,MAAM,OACNY,OAAQ,GACRC,MAAO,MAIZ,kBAAC/D,GAAD,CAAaC,OAAQkB,GAArB,qB,mhBC3PlB,IAAMxK,GAAYC,IAAOX,IAAV,MAaTuO,GAAgB5N,IAAOX,IAAV,MAIbwO,GAAQ7N,IAAOX,IAAV,MASIyO,GA/Hf,YAA+D,IAAvCpN,EAAsC,EAAtCA,iBAAkBsJ,EAAoB,EAApBA,iBAAoB,EAC/BrJ,cAArBC,EADoD,EACpDA,QADoD,KAC3CC,QAEaC,IAAMC,UAAS,IAHe,mBAGrDsJ,EAHqD,KAG5CC,EAH4C,OAI5BxJ,IAAMC,SAAS,IAJa,mBAIrDnF,EAJqD,KAI3CmS,EAJ2C,OAKpCjN,IAAMC,SAAS,MALqB,mBAKrD5F,EALqD,KAK/C6S,EAL+C,OAMlClN,IAAMC,SAAS,MANmB,mBAMrDkN,EANqD,KAM9CC,EAN8C,KAQ5DpN,IAAMI,WAAU,WACdiN,MACC,CAACvN,IAGJ,IAAMuN,EAAa,uCAAG,gCAAAzZ,EAAA,sEAEG8R,GAAeF,SAASS,mBAF3B,cAEdN,EAFc,OAGpBuH,EAAQvH,GAHY,SAKID,GAAeF,SAASO,oBAL5B,cAKduH,EALc,OAMpBF,EAASE,GANW,UASOxK,GAAkB0C,SAAST,sBAAsB,GAAI,GAT5D,QASd/B,EATc,OAoBpBiK,EAAYjK,GACZwG,GAAW,GArBS,4CAAH,qDAwBnB,OACE,kBAAC,GAAD,KACGD,GACC,kBAACuD,GAAD,KACE,kBAAC,IAAD,CACCjB,KAAK,OACLL,MAAM,UACNY,OAAQ,GACRC,MAAO,OAKV9C,GAA8B,GAAnBzO,EAASpF,QACpB,kBAACoX,GAAD,KACE,kBAAC,GAAD,CACE/K,MAAM,iEACNtC,MAAM,cAKV8J,GAA8B,GAAnBzO,EAASpF,QACpB,kBAACqX,GAAD,CAAO7H,GAAG,yBAEPhB,OAAOqJ,KAAKzS,GAAUuC,KAAI,SAAAmQ,GACzB,IAAMvE,EACJnO,EAAS0S,GAAOhT,OAASsF,GACxBA,IAAYqN,GAAkC,+CAAzBrS,EAAS0S,GAAOhT,KAGxC,MAA6B,+CAAzBM,EAAS0S,GAAOhT,MAWc,+CAAzBM,EAAS0S,GAAOhT,MAAyDH,EAAKoT,aATnF,kBAAC,GAAD,CACEva,IAAK4H,EAAS0S,GAAOhT,KACrBwO,cAAelO,EAAS0S,GACxBvE,QAASA,EACTrJ,iBAAkBA,EAClBsJ,iBAAkBA,IAgBf,W,62RCzGd,IAAMwE,GAAUxO,IAAOyO,QAAV,MAIH,SAAAnO,GAAK,OAAIA,EAAMoO,OAAS,aACrB,SAAApO,GAAK,OAAIA,EAAMqO,WAAa,YAChC,SAAArO,GAAK,OAAIA,EAAMC,OAAS,iBACxB,SAAAD,GAAK,OAAIA,EAAMsO,UAAY,eAC/B,SAAAtO,GAAK,OAAIA,EAAMuO,QAAU,SACxB,SAAAvO,GAAK,OAAIA,EAAMwO,SAAW,SACzB,SAAAxO,GAAK,OAAIA,EAAMyO,UAAY,aAoB5BC,IAfYhP,YAAOwO,GAAPxO,CAAH,MAIOA,YAAOwO,GAAPxO,CAAH,MAMCA,YAAOwO,GAAPxO,CAAH,MAKDA,IAAOX,IAAV,MAGP,SAAAiB,GAAK,OAAIA,EAAMwO,SAAW,UAI1BG,GAAYjP,IAAOX,IAAV,MAIT6P,GAAOlP,IAAOX,IAAV,MAGF,SAAAiB,GAAK,OAAIA,EAAM6O,MAAQ,UAGtB,SAAA7O,GAAK,OAAIA,EAAM8O,IAAM,iBAC3B,SAAA9O,GAAK,OAAIA,EAAM+O,MAAQ,OACb,SAAA/O,GAAK,OAAIA,EAAMqO,WAAa,YAChC,SAAArO,GAAK,OAAIA,EAAMgP,MAAQ,UACtB,SAAAhP,GAAK,OAAIA,EAAMoO,OAAS,YACpB,SAAApO,GAAK,OAAIA,EAAMiP,SAAW,YAClC,SAAAjP,GAAK,OAAIA,EAAMwO,SAAW,SAC3B,SAAAxO,GAAK,OAAIA,EAAMuO,QAAU,SACtB,SAAAvO,GAAK,OAAIA,EAAMkP,UAAY,UAC3B,SAAAlP,GAAK,OAAIA,EAAMmP,UAAY,aAC3B,SAAAnP,GAAK,OAAIA,EAAM2C,MAAQ,aACtB,SAAA3C,GAAK,OAAIA,EAAMoP,WAAa,aAChC,SAAApP,GAAK,OAAIA,EAAMtE,QAAU,UAE1B,SAAAsE,GAAK,OAAIA,EAAM6M,OAAS,UACvB,SAAA7M,GAAK,OAAIA,EAAM4M,QAAU,UAEzB,SAAA5M,GAAK,OAAIA,EAAMqP,QAAU,UAClB,SAAArP,GAAK,OAAIA,EAAMsP,QAAU,SAC9B,SAAAtP,GAAK,OAAIA,EAAMyO,UAAY,YAG3B,SAAAzO,GAAK,OAAKA,EAAMuP,YAAcvP,EAAMuP,YAAevP,EAAMwP,MAAQxP,EAAMwP,MAAQ,SAAY,UAItF,SAAAxP,GAAK,OAAKA,EAAMyP,YAAczP,EAAMyP,YAAezP,EAAMoO,MAAQpO,EAAMoO,MAAQ,WAAc,YAC9F,SAAApO,GAAK,OAAKA,EAAM0P,gBAAkB1P,EAAM0P,gBAAmB1P,EAAMoP,UAAYpP,EAAMoP,UAAY,YAAe,YAG5HT,IAKSgB,GAAQjQ,YAAOkP,GAAPlP,CAAH,MAER,SAAAM,GAAK,OAAIA,EAAM+O,MAAQ,MAE7BJ,IAqDSiB,IA/CYlQ,IAAOX,IAAV,MAIV,SAAAiB,GAAK,OAAIA,EAAM6P,QAAU,WAC5B,SAAA7P,GAAK,OAAIA,EAAM8P,KAAO,UAChB,SAAA9P,GAAK,OAAIA,EAAM+P,WAAa,aAGlBrQ,IAAOX,IAAV,MAKP,SAAAiB,GAAK,OAAIA,EAAM+P,WAAa,aAGxBrQ,IAAOX,IAAV,MAMJ,SAAAiB,GAAK,OAAIA,EAAM6P,QAAU,UAC5B,SAAA7P,GAAK,OAAIA,EAAM8P,KAAO,UAWxB,SAAA9P,GAAK,OAAIA,EAAMgQ,QAAU9P,YAAhB,KACwCF,EAAMgQ,OAAgBhQ,EAAMgQ,OAAiBhQ,EAAMgQ,OAAiBhQ,EAAMgQ,WAKhHtQ,IAAOuQ,GAAV,MAMGvQ,IAAOwQ,GAAV,MACJ,SAAAlQ,GAAK,OAAIA,EAAMgM,OAAS,UAClB,SAAAhM,GAAK,OAAIA,EAAMmQ,QAAU,OAC3B,SAAAnQ,GAAK,OAAIA,EAAM2C,MAAQ,UAClB,SAAA3C,GAAK,OAAIA,EAAMoQ,eAAiB,aACxC,SAAApQ,GAAK,OAAIA,EAAMuO,QAAU,cACxB,SAAAvO,GAAK,OAAIA,EAAMwO,SAAW,SACnB,SAAAxO,GAAK,OAAIA,EAAMqQ,SAAW,aAC7B,SAAArQ,GAAK,OAAIA,EAAMsQ,QAAU,8CAC1B,SAAAtQ,GAAK,OAAIA,EAAMoP,WAAa,cAG/BmB,GAAK7Q,IAAO8Q,GAAV,MACJ,SAAAxQ,GAAK,OAAIA,EAAMgM,OAAS,sBAClB,SAAAhM,GAAK,OAAIA,EAAMmQ,QAAU,OAC3B,SAAAnQ,GAAK,OAAIA,EAAM2C,MAAQ,UAClB,SAAA3C,GAAK,OAAIA,EAAMoQ,eAAiB,eACxC,SAAApQ,GAAK,OAAIA,EAAMuO,QAAU,wBACxB,SAAAvO,GAAK,OAAIA,EAAMwO,SAAW,SACnB,SAAAxO,GAAK,OAAIA,EAAMqQ,SAAW,WAC7B,SAAArQ,GAAK,OAAIA,EAAMsQ,QAAU,8CAC1B,SAAAtQ,GAAK,OAAIA,EAAMoP,WAAa,aAC7B,SAAApP,GAAK,OAAIA,EAAMmP,UAAY,aAS7BsB,IANQ/Q,IAAOkI,IAAV,MAMDlI,IAAOgR,EAAV,MACJ,SAAA1Q,GAAK,OAAIA,EAAM+O,MAAQ,aACjB,SAAA/O,GAAK,OAAIA,EAAMgP,MAAQ,UAE5B,SAAAhP,GAAK,OAAIA,EAAMgM,OAAS,UACnB,SAAAhM,GAAK,OAAIA,EAAM8O,IAAM,iBACpB,SAAA9O,GAAK,OAAIA,EAAMmQ,QAAU,OAC3B,SAAAnQ,GAAK,OAAIA,EAAM2C,MAAQ,aAClB,SAAA3C,GAAK,OAAIA,EAAMoQ,eAAiB,aACxC,SAAApQ,GAAK,OAAIA,EAAMuO,QAAU,cACxB,SAAAvO,GAAK,OAAIA,EAAMwO,SAAW,SACnB,SAAAxO,GAAK,OAAIA,EAAMqQ,SAAW,aAC9B,SAAArQ,GAAK,OAAIA,EAAMoP,WAAa,aAU/BuB,IAPOjR,YAAO+Q,GAAP/Q,CAAH,MACA,SAAAM,GAAK,OAAIA,EAAMmQ,QAAU,OACtB,SAAAnQ,GAAK,OAAIA,EAAMqQ,SAAW,YAC/B,SAAArQ,GAAK,OAAIA,EAAM2C,MAAQ,WAC3B,SAAA3C,GAAK,OAAIA,EAAMgM,OAAS,eAGftM,IAAOI,KAAV,MACP,SAAAE,GAAK,OAAIA,EAAM+O,MAAQ,aACjB,SAAA/O,GAAK,OAAIA,EAAMgP,MAAQ,UAE5B,SAAAhP,GAAK,OAAIA,EAAMgM,OAAS,UACnB,SAAAhM,GAAK,OAAIA,EAAM8O,IAAM,iBACpB,SAAA9O,GAAK,OAAIA,EAAMmQ,QAAU,OAC3B,SAAAnQ,GAAK,OAAIA,EAAM2C,MAAQ,aAClB,SAAA3C,GAAK,OAAIA,EAAMoQ,eAAiB,aACxC,SAAApQ,GAAK,OAAIA,EAAMuO,QAAU,SACxB,SAAAvO,GAAK,OAAIA,EAAMwO,SAAW,SACnB,SAAAxO,GAAK,OAAIA,EAAMqQ,SAAW,aAC9B,SAAArQ,GAAK,OAAIA,EAAMoP,WAAa,YAE9B,SAAApP,GAAK,OAAIA,EAAM4Q,KAAO,aACzB,SAAA5Q,GAAK,OAAIA,EAAM6Q,OAAS,UACzB,SAAA7Q,GAAK,OAAIA,EAAM8Q,MAAQ,UACrB,SAAA9Q,GAAK,OAAIA,EAAM6P,QAAU,UAC5B,SAAA7P,GAAK,OAAIA,EAAM8P,KAAO,UAEZ,SAAA9P,GAAK,OAAIA,EAAMsP,QAAU,SAC9B,SAAAtP,GAAK,OAAIA,EAAMyO,UAAY,YAE5B,SAAAzO,GAAK,OAAIA,EAAM+Q,GAAK,WAgBpBC,IAbItR,IAAOI,KAAV,MACH,SAAAE,GAAK,OAAIA,EAAMgM,OAAS,UAClB,SAAAhM,GAAK,OAAIA,EAAMmQ,QAAU,UAGxBzQ,IAAOuR,GAAV,MAIGvR,IAAOwR,GAAV,MAIOxR,IAAOtL,EAAV,MAEC,SAAA4L,GAAK,OAAIA,EAAMqO,WAAa,SACtC,SAAArO,GAAK,OAAIA,EAAM+O,MAAQ,aACjB,SAAA/O,GAAK,OAAIA,EAAMgP,MAAQ,UACtB,SAAAhP,GAAK,OAAIA,EAAMoO,OAAS,YACpB,SAAApO,GAAK,OAAIA,EAAMiP,SAAW,YAC9B,SAAAjP,GAAK,OAAIA,EAAMmQ,QAAU,OAC3B,SAAAnQ,GAAK,OAAIA,EAAM2C,MAAQ,aAC3B,SAAA3C,GAAK,OAAIA,EAAMgM,OAAS,UACnB,SAAAhM,GAAK,OAAIA,EAAM8O,IAAM,iBACzB,SAAA9O,GAAK,OAAIA,EAAMuO,QAAU,OACxB,SAAAvO,GAAK,OAAIA,EAAMwO,SAAW,eACnB,SAAAxO,GAAK,OAAIA,EAAMqQ,SAAW,WAClC,SAAArQ,GAAK,OAAIA,EAAMqP,QAAU,UAClB,SAAArP,GAAK,OAAIA,EAAMsP,QAAU,SAI9B,SAAAtP,GAAK,OAAIA,EAAMyO,UAAY,YAG7B,SAAAzO,GAAK,OAAIA,EAAMtE,QAAU,UAMvB,SAAAsE,GAAK,OAAKA,EAAMuP,YAAcvP,EAAMuP,YAAevP,EAAMwP,MAAQxP,EAAMwP,MAAQ,SAAY,UAUvF,SAAAxP,GAAK,OAAIA,EAAMwP,QAAUxP,EAAM8O,GAAK9O,EAAM8O,GAAK,kBAY/C,SAAA9O,GAAK,OAAIA,EAAMmR,SAAW,WA0B/BC,IATI1R,YAAOsR,GAAPtR,CAAH,MASQA,IAAOkJ,OAAV,MAET,SAAA5I,GAAK,OAAIA,EAAM+O,MAAQ,aACjB,SAAA/O,GAAK,OAAIA,EAAMgP,MAAQ,UACtB,SAAAhP,GAAK,OAAIA,EAAMoO,OAAS,YACpB,SAAApO,GAAK,OAAIA,EAAMiP,SAAW,YAC9B,SAAAjP,GAAK,OAAIA,EAAMmQ,QAAU,OAC3B,SAAAnQ,GAAK,OAAIA,EAAM2C,MAAQ,aAC3B,SAAA3C,GAAK,OAAIA,EAAMgM,OAAS,UACnB,SAAAhM,GAAK,OAAIA,EAAM8O,IAAM,gBACzB,SAAA9O,GAAK,OAAIA,EAAMuO,QAAU,OACxB,SAAAvO,GAAK,OAAIA,EAAMwO,SAAW,eAC3B,SAAAxO,GAAK,OAAIA,EAAMqP,QAAU,UAClB,SAAArP,GAAK,OAAIA,EAAMsP,QAAU,SAI9B,SAAAtP,GAAK,OAAIA,EAAMyO,UAAY,YAavB,SAAAzO,GAAK,OAAIA,EAAMwP,QAAUxP,EAAM8O,GAAK9O,EAAM8O,GAAK,kBAY/C,SAAA9O,GAAK,OAAIA,EAAMmR,SAAW,WA4C/BE,IAvBU3R,IAAOX,IAAV,MAET,SAAAiB,GAAK,OAAIA,EAAM6Q,OAAS,UACzB,SAAA7Q,GAAK,OAAIA,EAAM8Q,MAAQ,UACrB,SAAA9Q,GAAK,OAAIA,EAAM6P,QAAU,UAC5B,SAAA7P,GAAK,OAAIA,EAAM8P,KAAO,UAChB,SAAA9P,GAAK,OAAIA,EAAM+P,WAAa,aAC9B,SAAA/P,GAAK,OAAIA,EAAMsR,SAAW,aAGpB,SAAAtR,GAAK,OAAKA,EAAMyP,YAAczP,EAAMyP,YAAezP,EAAMoO,MAAQpO,EAAMoO,MAAQ,WAAc,YAEnG,SAAApO,GAAK,OAAKA,EAAMuR,YAAcvR,EAAMuR,YAAevR,EAAM6Q,MAAQ7Q,EAAM6Q,MAAQ,SAAY,UAC5F,SAAA7Q,GAAK,OAAKA,EAAMwR,WAAaxR,EAAMwR,WAAcxR,EAAM8Q,KAAO9Q,EAAM8Q,KAAO,SAAY,UACxF,SAAA9Q,GAAK,OAAKA,EAAMyR,UAAYzR,EAAMyR,UAAazR,EAAM8P,IAAM9P,EAAM8P,IAAM,SAAY,UAChF,SAAA9P,GAAK,OAAKA,EAAM0R,aAAe1R,EAAM0R,aAAgB1R,EAAM6P,OAAS7P,EAAM6P,OAAS,SAAY,UAE5F,SAAA7P,GAAK,OAAKA,EAAM2R,gBAAkB3R,EAAM2R,gBAAmB3R,EAAM+P,UAAY/P,EAAM+P,UAAY,SAAY,UAE7G,SAAA/P,GAAK,OAAKA,EAAM4R,cAAgB5R,EAAM4R,cAAiB5R,EAAMsR,QAAUtR,EAAMsR,QAAU,SAAY,aAIrF5R,IAAOmS,KAAV,MAEX,SAAA7R,GAAK,OAAIA,EAAM6O,MAAQ,UAE5B,SAAA7O,GAAK,OAAIA,EAAM+O,MAAQ,aACb,SAAA/O,GAAK,OAAIA,EAAMqO,WAAa,YAEhC,SAAArO,GAAK,OAAIA,EAAMgP,MAAQ,UACtB,SAAAhP,GAAK,OAAIA,EAAMoO,OAAS,YACpB,SAAApO,GAAK,OAAIA,EAAMiP,SAAW,YAC9B,SAAAjP,GAAK,OAAIA,EAAMmQ,QAAU,OAC3B,SAAAnQ,GAAK,OAAIA,EAAM2C,MAAQ,aAClB,SAAA3C,GAAK,OAAIA,EAAMoQ,eAAiB,aACzC,SAAApQ,GAAK,OAAIA,EAAMgM,OAAS,UACnB,SAAAhM,GAAK,OAAIA,EAAM8O,IAAM,iBACzB,SAAA9O,GAAK,OAAIA,EAAMuO,QAAU,SACxB,SAAAvO,GAAK,OAAIA,EAAMwO,SAAW,SAC3B,SAAAxO,GAAK,OAAIA,EAAMqP,QAAU,UAClB,SAAArP,GAAK,OAAIA,EAAMsP,QAAU,UAI/BwC,GAAQpS,IAAO7J,MAAV,MACL,SAAAmK,GAAK,OAAIA,EAAM+R,SAAW,UAC7B,SAAA/R,GAAK,OAAIA,EAAM+O,MAAQ,aACjB,SAAA/O,GAAK,OAAIA,EAAMgP,MAAQ,UACtB,SAAAhP,GAAK,OAAIA,EAAMoO,OAAS,YACpB,SAAApO,GAAK,OAAIA,EAAMiP,SAAW,YAC9B,SAAAjP,GAAK,OAAIA,EAAMmQ,QAAU,OAC3B,SAAAnQ,GAAK,OAAIA,EAAM2C,MAAQ,aAClB,SAAA3C,GAAK,OAAIA,EAAMoQ,eAAiB,aACzC,SAAApQ,GAAK,OAAIA,EAAMgM,OAAS,UACnB,SAAAhM,GAAK,OAAIA,EAAM8O,IAAM,iBACzB,SAAA9O,GAAK,OAAIA,EAAMuO,QAAU,SACxB,SAAAvO,GAAK,OAAIA,EAAMwO,SAAW,SACnB,SAAAxO,GAAK,OAAIA,EAAMqQ,SAAW,aAClC,SAAArQ,GAAK,OAAIA,EAAMqP,QAAU,UAClB,SAAArP,GAAK,OAAIA,EAAMgS,cAAgB,YAC/B,SAAAhS,GAAK,OAAIA,EAAMsP,QAAU,SAC/B,SAAAtP,GAAK,OAAIA,EAAMiS,SAAW,UACzB,SAAAjS,GAAK,OAAIA,EAAMyO,UAAY,YAG7B,SAAAzO,GAAK,OAAIA,EAAMkS,QAAU,aACxB,SAAAlS,GAAK,OAAIA,EAAMmS,MAAQ,aAYvBC,GAAY1S,IAAO2S,SAAV,MAEZ,SAAArS,GAAK,OAAIA,EAAM+O,MAAQ,aACjB,SAAA/O,GAAK,OAAIA,EAAMgP,MAAQ,UACtB,SAAAhP,GAAK,OAAIA,EAAMoO,OAAS,YACpB,SAAApO,GAAK,OAAIA,EAAMiP,SAAW,YAC9B,SAAAjP,GAAK,OAAIA,EAAMmQ,QAAU,OAC3B,SAAAnQ,GAAK,OAAIA,EAAM2C,MAAQ,aAClB,SAAA3C,GAAK,OAAIA,EAAMoQ,eAAiB,aACzC,SAAApQ,GAAK,OAAIA,EAAMgM,OAAS,UACnB,SAAAhM,GAAK,OAAIA,EAAM8O,IAAM,iBACzB,SAAA9O,GAAK,OAAIA,EAAMuO,QAAU,SACxB,SAAAvO,GAAK,OAAIA,EAAMwO,SAAW,SACnB,SAAAxO,GAAK,OAAIA,EAAMqQ,SAAW,aAClC,SAAArQ,GAAK,OAAIA,EAAMqP,QAAU,UAClB,SAAArP,GAAK,OAAIA,EAAMsP,QAAU,SAC/B,SAAAtP,GAAK,OAAIA,EAAMiS,SAAW,UACzB,SAAAjS,GAAK,OAAIA,EAAMyO,UAAY,Y,w6CC7bzC,IAAMrS,GAAS9I,EAAQ,IAKjBgf,IAHOhf,EAAQ,IAARA,GAGG,CACd,CAAE+L,MAAO,IAAK6I,MAAO,4BACrB,CAAE7I,MAAO,IAAK6I,MAAO,yBACrB,CAAE7I,MAAO,IAAK6I,MAAO,8BAuhBvB,IAAMmB,GAAU3J,IAAOX,IAAV,MAOPuK,GAAa5J,IAAOX,IAAV,MAIVwT,GAAuB7S,IAAOX,IAAV,MAMpByT,GAAiB9S,YAAO+S,KAAP/S,CAAH,MAmDLgT,GAvlBf,WAA8B,IAAD,EAC0BrS,cAA9BC,GADI,EACnBqS,OADmB,EACX3H,MADW,EACJ1K,SAASC,EADL,EACKA,QADL,KACcqS,QAEDpS,IAAMC,SAAS,IAH5B,mBAGpBoS,EAHoB,KAGNC,EAHM,OAKWtS,IAAMC,SAAS,IAL1B,mBAKpBsS,EALoB,KAKPC,EALO,OAMCxS,IAAMC,SAAS,IANhB,mBAMpBwS,EANoB,KAMZC,EANY,OAQD1S,IAAMC,SAAS,IARd,mBAQpB0S,EARoB,KAQbC,EARa,OASa5S,IAAMC,UAAS,GAT5B,mBASpB4S,EAToB,KASNC,EATM,OAWD9S,IAAMC,SAAS,IAXd,mBAWpB8S,EAXoB,KAWbC,EAXa,OAaDhT,IAAMC,SAAS,IAbd,mBAapBgT,EAboB,KAabC,EAba,OAcalT,IAAMC,UAAS,GAd5B,mBAcpBkT,EAdoB,KAcNC,EAdM,OAgBGpT,IAAMC,SAAS,IAhBlB,mBAgBpBoT,EAhBoB,KAgBXC,EAhBW,OAiBiBtT,IAAMC,UAAS,GAjBhC,mBAiBpBsT,EAjBoB,KAiBJC,EAjBI,QAmBCxT,IAAMC,SAAS,IAnBhB,qBAmBpBwT,GAnBoB,MAmBZC,GAnBY,MAqB3B1T,IAAMI,WAAU,WAGZoS,EAFa,MAAXC,EAEa3S,EAGA,MAEhB,CAAC2S,IAEJ,IAAMkB,GAAiB,uCAAG,WAAOlV,GAAP,mDAAA7K,EAAA,sDAExB6K,EAAEmV,iBAGFtB,EAAgB,GAGZuB,EAAoBpJ,IAAMC,KAAK,kBAACa,GAAD,CAAahV,IAAI,yBAAyBiV,MAAM,SAAU,CAC3Fb,SAAU,eACVC,WAAW,EACXC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,EACXC,cAAUC,IAIR4I,EAAS/T,EAAQiK,UAAUlK,GAC3BlG,EAAW,IAAIgC,GAAO+E,SAAS5H,EAAUE,SAAUG,EAAKH,SAAU6a,GAGlEC,EAAOpB,EACPqB,EAAOjB,EAGPkB,EAAOtB,EACPuB,EAAOnB,EACPoB,EAAOlB,EACPmB,EAAOf,EA9Ba,KAiChBZ,EAjCgB,OAmCjB,MAnCiB,QAuCjB,MAvCiB,QA2CjB,MA3CiB,4EA6ChB5b,EAAS9D,KAAawE,OAAO,IAGjCwc,EAAO,6BACPC,EAAO,2CAjDa,UAoDNta,EAAe+D,aAAa8U,EAAa3Y,GApDnC,WAqDX,OADLya,EApDgB,gCAuDlBX,GAAU,uDACVpB,EAAgB,GAEhB7H,IAAMkB,OAAOkI,EAAmB,CAC9BjI,OAAQ,4DACRC,KAAMpB,IAAMqB,KAAKG,MACjBrB,UAAW,MA7DK,kCAmEhB0J,EAAYD,EAAEhhB,WAAWyC,UAAU,GAnEnB,UAsEI/C,KAAaW,iBAAiBmD,EAAQyd,GAtE1C,eAsEpBpd,EAtEoB,OAuEpB+c,EAAOlhB,KAAaC,eAAe2f,EAAO9b,GAC1Cqd,EAAOnhB,KAAaC,eAAe+f,EAAOlc,GAC1Csd,EAAOphB,KAAaC,eAAeigB,EAAOpc,GAC1Cud,EAAOrhB,KAAaC,eAAeqgB,EAASxc,GA1ExB,oEAkFpB0d,EAAiB,GAGN,MAAX9B,GAA6B,MAAXA,GAA6B,MAAXA,EArFhB,qBAuFlBI,IAAgB2B,GAAQ7B,GAvFN,wBAwFpBe,GAAU,+BACVpB,EAAgB,GAEhB7H,IAAMkB,OAAOkI,EAAmB,CAC9BjI,OAAQ,oBACRC,KAAMpB,IAAMqB,KAAKG,MACjBrB,UAAW,MA9FO,+BAoGlB2I,IAAkBiB,GAAQjB,GApGR,wBAqGpBG,GAAU,iCACVpB,EAAgB,GAEhB7H,IAAMkB,OAAOkI,EAAmB,CAC9BjI,OAAQ,oBACRC,KAAMpB,IAAMqB,KAAKG,MACjBrB,UAAW,MA3GO,+BAgHlBuI,IAAgBqB,GAAQvB,GAhHN,wBAiHpBS,GAAU,2CACVpB,EAAgB,GAEhB7H,IAAMkB,OAAOkI,EAAmB,CAC9BjI,OAAQ,oBACRC,KAAMpB,IAAMqB,KAAKG,MACjBrB,UAAW,MAvHO,+BA4HlB4J,GAAQzB,GA5HU,wBA6HpBW,GAAU,2BACVpB,EAAgB,GAEhB7H,IAAMkB,OAAOkI,EAAmB,CAC9BjI,OAAQ,oBACRC,KAAMpB,IAAMqB,KAAKG,MACjBrB,UAAW,MAnIO,kCAwIhBvV,EAAQof,KAAKC,UACjB,CACE,aAAgB,CACd,MAASX,EACT,KAAQC,GAEV,KAAQ,CACN,KAAQvB,EACR,OAAUvb,EACV,KAAQ+c,EACR,KAAQC,EACR,KAAQC,EACR,KAAQC,KAKdhe,QAAQC,IAAI,uBACZoU,IAAMkB,OAAOkI,EAAmB,CAC9BjI,OAAQ,wBAGJ5H,EAAOlR,EAAQ,KAAmB6hB,GAAG,+BA9JrB,oBAiKG3Q,EAAKsC,IAAIjR,GAjKZ,QAiKpBkf,EAjKoB,0DAoKpBjC,EAAgB,GAChBoB,GAAU,qBArKU,QAwKtBtd,QAAQC,IAAK,eAAgBke,GAC7B9J,IAAMkB,OAAOkI,EAAmB,CAC9BjI,OAAQ,cAAgB2I,IA1KJ,QAgLlBxY,EAAW0W,EAAS,IAAM8B,EAC1BK,EAAgBhZ,GAAOC,MAAMgZ,YAAY9Y,GAE3C+Y,EAAuBlb,EAASmb,iBAAiBxC,EAAaqC,GAElExe,QAAQC,IAAK,2BACboU,IAAMkB,OAAOkI,EAAmB,CAC9BjI,OAAQ,2BAGVkJ,EACGhgB,KADH,+BAAAlB,EAAA,MACQ,WAAOyX,GAAP,SAAAzX,EAAA,6DACJwC,QAAQC,IAAIgV,GACZjV,QAAQC,IAAK,qBAEboU,IAAMkB,OAAOkI,EAAmB,CAC9BjI,OAAQ,mBACRC,KAAMpB,IAAMqB,KAAKkJ,KACjBpK,UAAW,MAPT,SAUES,EAAG4J,KAAK,GAVV,OAWJ7e,QAAQC,IAAK,sBAEbic,EAAgB,GAChBI,EAAU,IACVgB,GAAU,qBAEVjJ,IAAMkB,OAAOkI,EAAmB,CAC9BjI,OAAQ,wCACRC,KAAMpB,IAAMqB,KAAKC,QACjBnB,UAAW,MApBT,4CADR,uDAwBG1Q,OAAM,SAAAC,GACL/D,QAAQC,IAAI,yCAAuC8D,GACnDuZ,GAAU,wCAEVjJ,IAAMkB,OAAOkI,EAAmB,CAC9BjI,OAAQ,sBAAwBzR,EAChC0R,KAAMpB,IAAMqB,KAAKG,MACjBrB,UAAW,SAzNO,2DAAH,sDA8NjB4J,GAAU,SAACU,GACf,OAA2B,GAAvBA,EAAMC,OAAOzf,QAQb6V,GAAc,SAAC,GAAD,IAAGhV,EAAH,EAAGA,IAAKiV,EAAR,EAAQA,MAAR,OAClB,kBAAC,GAAD,KACE,kBAAC,IAAD,CACCK,KAAK,OACLL,MAAOA,EACPY,OAAQ,GACRC,MAAO,KAER,kBAAC,GAAD,KAAa9V,KAIjB,OACE,oCACE,kBAACmX,GAAD,KACE,kBAACQ,GAAD,CAASF,QAAQ,kBACf,kBAACI,GAAD,CAAMR,MAAM,cACV,kBAACwB,GAAD,CAAIQ,cAAc,YAAYC,QAAQ,SACpC,kBAACM,GAAD,CAAMR,OAAO,OAAb,SAA+B,kBAACQ,GAAD,CAAM7B,GAAG,UAAU9C,MAAM,OAAOmE,OAAO,MAAM3B,QAAQ,WAArD,iBAEjC,kBAAC+B,GAAD,+DAA2D,qCAA3D,KAA0E,sCAA1E,QAA6F,wCAA7F,QAKN,kBAACrC,GAAD,KACE,kBAACQ,GAAD,KACE,kBAACE,GAAD,CAAMR,MAAM,WACV,kBAACiD,GAAD,CACEtC,KAAK,IACLV,UAAU,SACVE,OAAO,MACPU,QAAQ,SACRtM,KAAK,SACLiT,SAAUzB,IAEV,kBAACvF,GAAD,CAAML,OAAQ,WAAWQ,KAAK,IAAIC,KAAK,UAAUZ,MAAM,WACrD,kBAACQ,GAAD,CAAMG,KAAK,IAAIE,QAAQ,aAAab,MAAM,UAAUc,SAAS,SAC3D,kBAACqD,GAAD,KACE,kBAACC,GAAD,CAAgBqD,QAASvD,GAASwD,SAAU,SAACC,GAAY7C,EAAU6C,EAAO1W,OAAQzI,QAAQC,IAAIkf,IAAU1W,MAAO4T,EAAQ+C,YAAY,0CAGvI,kBAAClE,GAAD,CAAOC,QAAQ,OAAO1S,MAAO4T,EAAQ6C,SAAU,SAAC7W,GAAOiU,EAAUjU,EAAEgO,OAAO5N,UAEzE4T,GACC,kBAACtD,GAAD,CAAOpB,OAAO,qBAAqBO,GAAG,UAAUC,KAAK,IAAIC,KAAK,UAAUC,QAAQ,iBAC9E,kBAACU,GAAD,CAAOpB,OAAO,YAAYQ,KAAK,UAC7B,kBAAC4B,GAAD,CAAMpC,OAAO,mBAAmB4B,OAAO,MAAME,QAAQ,QAAQD,cAAc,YAAYzN,KAAK,QAAQmM,GAAG,UAAU9C,MAAM,OAAOwC,QAAQ,WAAWc,OAAO,QAAxJ,kBACA,kBAAC2G,GAAA,EAAD,CAAQjK,MAAM,UAAUrJ,KAAK,QAAQuT,QAAS7C,EAAcyC,SAAU,kBAAMxC,GAAiBD,OAG/F,kBAAC1D,GAAD,CAAOpB,OAAO,YAAYQ,KAAK,UAC7B,kBAAC4B,GAAD,CAAMpC,OAAO,mBAAmB4B,OAAO,MAAME,QAAQ,QAAQD,cAAc,YAAYzN,KAAK,QAAQmM,GAAG,UAAU9C,MAAM,OAAOwC,QAAQ,WAAWc,OAAO,QAAxJ,gBACA,kBAAC2G,GAAA,EAAD,CAAQjK,MAAM,UAAUrJ,KAAK,QAAQuT,QAASnC,EAAgB+B,SAAU,kBAAM9B,GAAmBD,OAGnG,kBAACpE,GAAD,CAAOpB,OAAO,YAAYQ,KAAK,UAC7B,kBAAC4B,GAAD,CAAMpC,OAAO,mBAAmB4B,OAAO,MAAME,QAAQ,QAAQD,cAAc,YAAYzN,KAAK,QAAQmM,GAAG,UAAU9C,MAAM,OAAOwC,QAAQ,WAAWc,OAAO,QAAxJ,cACA,kBAAC2G,GAAA,EAAD,CAAQjK,MAAM,UAAUrJ,KAAK,QAAQuT,QAASvC,EAAcmC,SAAU,kBAAMlC,GAAiBD,UAMnGV,GACA,kBAACrE,GAAD,CAAMJ,QAAQ,wBAGH,MAAXyE,GAA6B,MAAXA,IAClB,kBAACrE,GAAD,CAAML,OAAO,sBAAsBQ,KAAK,IAAIC,KAAK,UAAUZ,MAAM,WAC/D,kBAAC0D,GAAD,CACEqE,UAAQ,EACRH,YAAY,iCACZ1G,OAAO,MACPd,QAAQ,OACRa,OAAO,oBACPP,GAAG,OACHzP,MAAO0T,EACP+C,SAAU,SAAC7W,GAAO+T,EAAe/T,EAAEgO,OAAO5N,UAEd,GAA7B0T,EAAY4C,OAAOzf,QAChB,kBAACya,GAAD,CACEnC,QAAQ,WACRqC,MAAM,MACNf,IAAI,MACJc,IAAI,WACJ5E,MAAM,OACN8C,GAAG,OACHnM,KAAK,SACLoO,EAAE,KARJ,qBAgBPkC,GAAUI,GACT,kBAACzE,GAAD,CAAML,OAAO,sBAAsBQ,KAAK,IAAIC,KAAK,UAAUZ,MAAM,WAC/D,kBAAC0D,GAAD,CACEqE,UAAQ,EACRH,YAAY,0BACZxH,QAAQ,OACRwD,aAAa,iBACb7B,OAAO,MACPxN,KAAK,QACLmM,GAAG,OACHzP,MAAO8T,EACP2C,SAAU,SAAC7W,GAAOmU,EAASnU,EAAEgO,OAAO5N,UAEd,GAAvB8T,EAAMwC,OAAOzf,QACV,kBAACya,GAAD,CACEnC,QAAQ,WACRqC,MAAM,MACNf,IAAI,MACJc,IAAI,WACJ5E,MAAM,OACN8C,GAAG,OACHnM,KAAK,SACLoO,EAAE,KARJ,YAgBPkC,GACC,kBAACrE,GAAD,CAAML,OAAO,sBAAsBQ,KAAK,IAAIC,KAAK,UAAUZ,MAAM,WAC/D,kBAACgE,GAAD,CACE+D,UAAQ,EACRH,YAAY,uBACZI,KAAK,IACL9G,OAAO,MACPd,QAAQ,OACR2B,OAAO,MACPd,OAAO,iBACPP,GAAG,OACHzP,MAAOkU,EACPuC,SAAU,SAAC7W,GAAOuU,EAASvU,EAAEgO,OAAO5N,QACpCgX,aAAa,SAKlBpD,GAAUc,GACT,kBAACpE,GAAD,CAAOnB,QAAQ,sBAAsBO,KAAK,IAAIC,KAAK,UAAUZ,MAAM,UACjE,kBAACQ,GAAD,CAAMG,KAAK,IAAIR,OAAO,mBACpB,kBAAC,KAAD,CAAiB5L,KAAM,GAAIqJ,MAAM,UAEnC,kBAAC4C,GAAD,CAAMG,KAAK,IAAIR,OAAO,kBAAkBH,MAAM,WAC5C,kBAAC0D,GAAD,CACEqE,UAAQ,EACRH,YAAY,6BACZxH,QAAQ,OACRa,OAAO,iBACPC,OAAO,MACPa,OAAO,MACPrB,GAAG,UACHzP,MAAOwU,EACPiC,SAAU,SAAC7W,GAAO6U,EAAW7U,EAAEgO,OAAO5N,UAEd,GAAzBwU,EAAQ8B,OAAOzf,QACZ,kBAACya,GAAD,CACEnC,QAAQ,WACRqC,MAAM,MACNf,IAAI,MACJc,IAAI,WACJ5E,MAAM,OACN8C,GAAG,OACHnM,KAAK,SACLoO,EAAE,KARJ,eAiBTkC,GAAUU,GACT,kBAAChE,GAAD,CAAOpB,OAAO,sBAAsBQ,KAAK,IAAIC,KAAK,UAAUZ,MAAM,UAChE,kBAACQ,GAAD,CAAMG,KAAK,IAAIR,OAAO,mBACpB,kBAAC,KAAD,CAAQ5L,KAAM,GAAIqJ,MAAM,UAE1B,kBAAC4C,GAAD,CAAMG,KAAK,IAAIR,OAAO,kBAAkBH,MAAM,WAC5C,kBAAC0D,GAAD,CACEqE,UAAQ,EACRH,YAAY,sBACZxH,QAAQ,OACRa,OAAO,iBACPC,OAAO,MACPa,OAAO,MACPrB,GAAG,UACHzP,MAAOoU,EACPqC,SAAU,SAAC7W,GAAOyU,EAASzU,EAAEgO,OAAO5N,UAEd,GAAvBoU,EAAMkC,OAAOzf,QACV,kBAACya,GAAD,CACEnC,QAAQ,WACRqC,MAAM,MACNf,IAAI,MACJc,IAAI,WACJ5E,MAAM,OACN8C,GAAG,OACHnM,KAAK,SACLoO,EAAE,KARJ,wBAiBTkD,IAA0B,GAAhBpB,GACT,kBAACjE,GAAD,CACE5C,MAAM,OACN8C,GAAG,UACHN,QAAQ,YACRD,OAAS,YAET,kBAACoC,GAAD,CACE3E,MAAM,OACNoE,cAAc,YACdC,QAAQ,QACRF,OAAO,MACPxN,KAAK,OAEJsR,KAKNhB,GACC,kBAACrE,GAAD,CAAML,OAAO,mBAAmBQ,KAAK,IAAIC,KAAK,UAAUZ,MAAM,WAC5D,kBAACgD,GAAD,CACEtC,GAAG,UACH9C,MAAM,OACN+C,KAAK,IACLO,OAAO,MACPd,QAAQ,YACR3F,SAA0B,GAAhBgK,GAEO,GAAhBA,GACC,kBAAC,IAAD,CACGxG,KAAK,OACLL,MAAM,OACNY,OAAQ,GACRC,MAAO,KAGK,GAAhBgG,GACC,kBAACf,GAAD,CAAOI,OAAO,OAAO9B,cAAc,YAAYpE,MAAM,OAAOmE,OAAO,MAAMxN,KAAK,QAAQ0N,QAAQ,QAAQhE,KAAK,SAAShN,MAAM,8BCzgBjIiX,OArBf,WAME,OALA9V,IAAMI,WAAU,eAMd,oCACE,kBAACsN,GAAD,KACE,kBAACQ,GAAD,CAASF,QAAQ,OACf,kBAAC,GAAD,U,6uDCJV,IAAMpS,GAAS9I,EAAQ,IAEVA,EAAQ,IAARA,GAyLb,IAAMijB,GAAU7W,IAAOX,IAAV,MAMPsD,GAAS3C,IAAOX,IAAV,MAcNyX,IARQ9W,IAAOuQ,GAAV,MAQEvQ,IAAOwI,MAAV,OASJuO,IAHQ/W,YAAO8W,GAAP9W,CAAH,MAGEA,YAAOoS,GAAPpS,CAAH,OAKJgX,GAAYhX,IAAO2S,SAAV,MAUTsE,GAAMjX,YAAOoS,GAAPpS,CAAH,MAKHkX,GAAoBlX,IAAOX,IAAV,MAOjB8X,GAAOnX,IAAOI,KAAV,MAIJgX,GAAWpX,IAAOkJ,OAAV,MASE,SAAA5I,GAAK,OAAIA,EAAMC,OAAS,aAUzB8W,GArQf,WAA0B,IAAD,EAC8B1W,cAA9BC,GADA,EACfqS,OADe,EACP3H,MADO,EACA1K,SAASC,EADT,EACSA,QADT,KACkBqS,QAELpS,IAAMC,UAAS,IAH5B,mBAGhBuW,EAHgB,KAGJC,EAHI,OAIazW,IAAMC,UAAS,GAJ5B,mBAIhByW,EAJgB,KAIJC,EAJI,OAKC3W,IAAMC,cAASiL,GALhB,mBAKhB0L,EALgB,KAKVC,EALU,OAOC7W,IAAMC,SAAS,IAPhB,mBAOhB+L,EAPgB,KAOV8K,EAPU,OAQC9W,IAAMC,SAAS,IARhB,mBAQhB8W,EARgB,KAQVC,EARU,OASDhX,IAAMC,SAAS,IATd,mBAShB9D,EATgB,KASX8a,EATW,KAWvBjX,IAAMI,WAAU,eAKhB,IAgCM8W,EAAmB,uCAAG,8CAAAtjB,EAAA,6DAG1B6iB,GAAc,GAEdrgB,QAAQC,IAAIugB,GACZxgB,QAAQC,IAAI2V,GACZ5V,QAAQC,IAAI0gB,GACZ3gB,QAAQC,IAAI8F,GAEN9G,EAAQof,KAAKC,UACjB,CACE,KAAQ1I,EACR,KAAQ+K,EACR,IAAO5a,EACP,KAAQya,IAGN5S,EAAOlR,EAAQ,KAAmB6hB,GAAG,+BAE3Cve,QAAQC,IAAI,mBApBc,UAqBR2N,EAAKsC,IAAIjR,GArBD,eAqBpB8hB,EArBoB,OAsB1B/gB,QAAQC,IAAI,YAAa8gB,GAKrBrD,EAAS/T,EAAQiK,UAAUlK,GAE3BsX,EAAc,IAAIxb,GAAO+E,SAAS5H,EAAUG,IAAKE,EAAKC,MAAOya,GAG7DuD,EAAevf,KAAKwf,KAAqB,MAAhBxf,KAAKE,UAAoB,GAChDuf,EAAOC,qBAAWH,EAAahkB,WAAY,IAE7CokB,EAAyBL,EAAYM,QAAQ3e,EAAUE,SAAUse,GAnC3C,UAoCTE,EApCS,eAoCpBpM,EApCoB,OAsC1BjV,QAAQC,IAAIgV,GACZjV,QAAQC,IAAI,4BAvCc,UAwCpB0J,EAAQ0L,mBAAmBJ,EAAGK,MAxCV,QA0CtB9R,EAAW,IAAIgC,GAAO+E,SAAS5H,EAAUE,SAAUG,EAAKH,SAAU6a,GAC3Cla,EAAS+d,sBAAsBR,GAErCriB,MAAK,SAASuW,GACjCjV,QAAQC,IAAIgV,GACZjV,QAAQC,IAAI,UAAYyJ,MA/CA,4CAAH,qDAoDzB,OACE,oCACE,kBAAC4N,GAAD,KACE,kBAACQ,GAAD,CAASF,QAAQ,kBACf,kBAACI,GAAD,CAAMR,MAAM,cACV,kBAACwB,GAAD,CAAIQ,cAAc,YAAYC,QAAQ,SACpC,kBAACM,GAAD,CAAM7B,GAAG,UAAU9C,MAAM,OAAOmE,OAAO,MAAM3B,QAAQ,WAArD,UAA4E,kBAACmC,GAAD,CAAMR,OAAO,OAAb,mBAE9E,kBAACI,GAAD,KAAI,iEAAJ,+GAML2G,IAAeF,GACd,kBAAC9I,GAAD,KACE,kBAACQ,GAAD,CAASF,QAAQ,aACf,kBAACmC,GAAD,oEAAkE,yCAAlE,8BAKN,kBAAC4F,GAAD,KACE,kBAAC,GAAD,KACGW,IAAeF,GACd,kBAACR,GAAD,oEAAkE,yCAAlE,qDAEAU,GACA,oCACA,kBAACV,GAAD,0BAAwB,kCAAxB,YAA2C,mCAA3C,iBAAoE,6CAApE,+BACA,kBAACA,GAAD,qQAKFQ,GAAcE,GACd,kBAAC7F,GAAD,KACE,kBAACoF,GAAD,CAAMT,YAAY,oBAAoBoC,UAAY,KAAK/Y,MAAOmN,EAAMsJ,SAAU,SAAC7W,GAAOqY,EAAQrY,EAAEgO,OAAO5N,UACvG,kBAACqX,GAAD,CAAWV,YAAY,mCAAmCoC,UAAY,MAAM/Y,MAAOkY,EAAMzB,SAAU,SAAC7W,GAAOuY,EAAQvY,EAAEgO,OAAO5N,UAC5H,kBAACsX,GAAD,CAAKX,YAAY,eAAeoC,UAAY,MAAM/Y,MAAO1C,EAAKmZ,SAAU,SAAC7W,GAAOwY,EAAOxY,EAAEgO,OAAO5N,WAIlG,qCACE6X,GACA,kBAACN,GAAD,KACE,kBAACJ,GAAD,6BAA2B,8DAA3B,2BACA,kBAAC,KAAD,CACE6B,eApIa,SAAC,EAAgBC,GAAY,IAA1BC,EAAyB,EAAzBA,KAAMnB,EAAmB,EAAnBA,KAAqBxgB,QAAQC,IAAIyhB,EAAQC,EAAMnB,IAqIrExB,SAtHO,SAAC4C,EAAOC,GAC3BtB,GAAc,GAEdvgB,QAAQC,IAAI2hB,EAAM3a,KAAI,SAAA6a,GAAC,OAAIA,EAAEH,SAC7BE,EAASxc,SAAQ,SAAAyc,GACf,IAAItB,EAAOsB,EAAEtB,KACTuB,EAAS,IAAIC,WACjBD,EAAOE,cAAczB,GACrBxgB,QAAQC,IAAI6hB,EAAEtB,MACduB,EAAOG,UAAY,SAAU7Z,GAC3BrI,QAAQC,IAAI8hB,EAAO3gB,QACnBqf,EAAQsB,EAAO3gB,YAGnBpB,QAAQC,IAAI,iBAyGAkiB,OApIM,SAACP,KAqIPQ,SAAU,EACVC,UAAU,EACVC,OAAO,2BAMdhC,GACC,kBAACJ,GAAD,CAAU7W,MAAO+W,EAAa,UAAY,UAAWnO,SAAUmO,EAAY3J,QAASqK,GACjFV,GACC,kBAAC,IAAD,CACC3K,KAAK,OACLL,MAAM,OACNY,OAAQ,GACRC,MAAO,MAGRmK,GACA,kBAACH,GAAD,wBChKCsC,OArBf,WAME,OALA3Y,IAAMI,WAAU,eAMd,oCACE,kBAACsN,GAAD,KACE,kBAACQ,GAAD,CAASF,QAAQ,OACf,kBAAC,GAAD,U,myFCkKV,IAAM/O,GAAYC,IAAOX,IAAV,MAOTqa,GAAW1Z,IAAOX,IAAV,MASRsa,GAAgB3Z,IAAOX,IAAV,MAkBW,SAACiB,GAAD,OAAWA,EAAM2S,OAAS3S,EAAMqP,OAAS,sBAcjEiK,GAAe5Z,IAAOkI,IAAV,MAGN,SAAC5H,GAAD,OAAWA,EAAM2S,OAAS,gBAAkB,mBAC3C,SAAC3S,GAAD,OAAWA,EAAM2S,OAAS,IAAM,UAGxC,SAAA3S,GAAK,OAAIA,EAAM2S,QAAUzS,YAAhB,SAMRqZ,GAAc7Z,IAAOwI,MAAV,MAGJ,SAAClI,GAAD,OAAWA,EAAM2S,OAAS,IAAM,UAGxC,SAAA3S,GAAK,OAAIA,EAAM2S,QAAUzS,YAAhB,SAKRsZ,GAA0B9Z,IAAOX,IAAV,MAOvB0a,GAAsB/Z,IAAOkI,IAAV,MAIlB,SAAA5H,GAAK,OAAIA,EAAM2S,QAAUzS,YAAhB,SAOVwZ,GAAqBha,IAAOwI,MAAV,MAGX,SAAClI,GAAD,OAAWA,EAAM2S,OAAS,IAAM,UAMxC,SAAA3S,GAAK,OAAIA,EAAM2S,QAAUzS,YAAhB,SAMRyZ,GAAYja,IAAOX,IAAV,MAaA6a,GApRf,YAA8C,EAA9BC,cAA+B,IAAhBC,EAAe,EAAfA,YAC7BC,IAAQC,SAAS,SAD2B,MAGS3Z,cAA9BC,GAHqB,EAGpCqS,OAHoC,EAG5B3H,MAH4B,EAGrB1K,SAASC,EAHY,EAGZA,QAHY,KAGHqS,QAEOpS,IAAMC,SAAS,OALnB,mBAKrCL,EALqC,KAKnB6Z,EALmB,OAMMzZ,IAAMC,SAAS,MANrB,mBAMrCyZ,EANqC,KAMlBC,EANkB,OAQV3Z,IAAMC,SAAS,GARL,mBAQrC2Z,EARqC,KAQ1BC,EAR0B,OASM7Z,IAAMC,UAAS,GATrB,mBASrC6Z,EATqC,KASlBC,EATkB,OAUJ/Z,IAAMC,UAAS,GAVX,mBAUrC+Z,EAVqC,KAUvBC,EAVuB,OAWNja,IAAMC,SAAS,IAXT,mBAWrCkJ,EAXqC,KAWxBC,EAXwB,KAa5CpJ,IAAMI,WAAU,WACd,IAAMM,EAAmB,IAAI9E,SAAO+E,SAAS5H,EAAUE,SAAUG,EAAKH,SAAU8G,GAGhF,GAFA0Z,EAAoB/Y,GAEbX,GAAWD,EAAU,CAC1B,IAAIgU,EAAS/T,EAAQiK,UAAUlK,GACzBoa,EAAiB,IAAIte,SAAO+E,SAAS5H,EAAUE,SAAUG,EAAKH,SAAU6a,GAC9E6F,EAAqBO,MAGtB,CAACpa,IAEJE,IAAMI,WAAU,WAEd6Z,GAAgB,GAChBF,GAAqB,GACrBI,EAAc,GACd/Q,EAAe,IAGS,MAApBxJ,IAEF8F,GAAeF,SAASrC,KAAKrD,EAASF,GACtCkD,GAAkB0C,SAASrC,KAAKrD,EAASF,GAEzCwa,OAGD,CAACxa,IAGJI,IAAMI,WAAU,WACdyZ,EAAa,KACZ,CAACP,IAGJ,IAAMa,EAAgB,SAACE,GACrBR,EAAaQ,IAITC,EAAwB,uCAAG,sBAAA1mB,EAAA,sDAC/BkP,GAAkB0C,SAASd,aACzB7B,GACA,qBACA,WACEuX,OAL2B,2CAAH,qDAWxBA,EAAyB,uCAAG,sBAAAxmB,EAAA,sDAEhC8F,EAAegD,8BAA8BoD,EAASF,GACnD9K,MAAK,SAAAmF,GACJ7D,QAAQC,IAAI4D,GACZmP,EAAenP,GACfggB,GAAgB,GAChBF,GAAqB,MAEtB7f,OAAM,SAAAuE,GACLwb,GAAgB,GAChBF,GAAqB,MAIzBO,IAfgC,2CAAH,qDAmB/B,OACE,kBAAC,GAAD,KACE,kBAAC1B,GAAD,KACE,kBAACC,GAAD,CAAerL,MAAO,EAAG2E,OAAqB,GAAbyH,EAAiB,EAAI,EAAG/K,OAAO,UAC9DhC,QAAS,WACPsN,EAAc,KAGhB,kBAACrB,GAAD,CAAcxM,IAAI,oBAAoB6F,OAAqB,GAAbyH,EAAiB,EAAI,IACnE,kBAACb,GAAD,CAAa5G,OAAqB,GAAbyH,EAAiB,EAAI,GAA1C,YAEF,kBAACf,GAAD,CAAerL,MAAO,EAAG2E,OAAqB,GAAbyH,EAAiB,EAAI,EAAG/K,OAAO,UAC9DhC,QAAS,WACPsN,EAAc,KAGhB,kBAACrB,GAAD,CAAcxM,IAAI,oBAAoB6F,OAAqB,GAAbyH,EAAiB,EAAI,IACnE,kBAACb,GAAD,CAAa5G,OAAqB,GAAbyH,EAAiB,EAAI,GAA1C,aAGF,kBAACf,GAAD,CAAerL,MAAO,EAAG2E,OAAqB,GAAbyH,EAAiB,EAAI,EAAG/K,OAAO,UAC9DxG,UAAWyR,EACXjN,QAAS,WACHiN,GACFK,EAAc,MAIhBL,GACA,kBAAC,IAAD,CACGjO,KAAK,OACLL,MAAM,UACNY,OAAQ,GACRC,MAAO,KAGX2N,GAAgBF,GACf,kBAACd,GAAD,KACE,kBAACC,GAAD,CAAqB3M,IAAG,UAAKnD,EAAYoD,MAAQ4F,OAAqB,GAAbyH,EAAiB,EAAI,IAC9E,kBAACV,GAAD,CAAoB/G,OAAqB,GAAbyH,EAAiB,EAAI,GAAIzQ,EAAY6C,QAGnEgO,GAAgBF,GAChB,oCACE,kBAAChB,GAAD,CAAcxM,IAAI,yBAAyB6F,OAAqB,GAAbyH,EAAiB,EAAI,IACxE,kBAACb,GAAD,CAAa5G,OAAqB,GAAbyH,EAAiB,EAAI,GAA1C,0BAKR,kBAACT,GAAD,KACgB,GAAbS,GACC,kBAAC,EAAD,CACEha,iBAAkBA,IAGR,GAAbga,GACC,kBAAC,GAAD,CACEha,iBAAkBA,EAClBsJ,iBAAkBwQ,IAGR,GAAbE,IAAmBI,GAAgBF,GAClC,kBAAC,GAAD,MAEY,GAAbF,GAAkBI,GAAgBF,GACjC,kBAAC,GAAD,S,mDClKWS,G,oDACnB,WAAY/a,GAAQ,wCACZA,G,uDAGN,MAAO,CACLgb,KAAMxmB,KAAKwL,MAAMib,KAAKD,MAAQ,MAC9BhP,MAAOxX,KAAKwL,MAAMib,KAAKjP,OAAS,OAChCkP,QAAS1mB,KAAKwL,MAAMib,KAAKC,SAAW,OACpCvY,KAAMnO,KAAKwL,MAAMib,KAAKtY,MAAQ,GAC9BwY,MAAO3mB,KAAKwL,MAAMib,KAAKE,OAAS,EAChCC,UAAW5mB,KAAKwL,MAAMib,KAAKG,WAAa,U,0CAI1C5mB,KAAK6mB,S,yCAEYC,GAEb9mB,KAAKwL,MAAMgb,OAASM,EAAUN,MAChCxmB,KAAK6mB,S,6BAIPE,KAASnP,OAAO,CACd4O,KAAMxmB,KAAKwL,MAAMib,KAAKD,KACtBrY,KAAMnO,KAAKwL,MAAMib,KAAKtY,KACtBwY,MAAO3mB,KAAKwL,MAAMib,KAAKE,OACtB3mB,KAAKgnB,U,+BAEA,IAAD,OACP,OAAOhb,IAAMib,cAAc,SAAU,CAACC,IAAK,SAAAF,GAAM,OAAI,EAAKA,OAASA,S,GA/BxBhb,IAAMmb,W,oqCCgErD,IAAMlc,GAAYC,IAAOkJ,OAAV,MAaTgT,GAASlc,IAAOX,IAAV,MAWN8c,GAAcnc,IAAOX,IAAV,MAGX+c,GAASpc,IAAOI,KAAV,MA0BGic,GArHf,WAAoB,IAAD,EACoC1b,cAArC2K,GADC,EACT2H,OADS,EACD3H,OAAO1K,EADN,EACMA,QAASC,EADf,EACeA,QADf,KACwBqS,QAEXpS,IAAMC,SAAS,KAH5B,mBAGVvC,EAHU,KAGD8d,EAHC,OAIKxb,IAAMC,SAAS,IAJpB,mBAIVwb,EAJU,KAILC,EAJK,OAKmB1b,IAAMC,UAAS,GALlC,mBAKV0b,EALU,KAKEC,EALF,KAgCjB,OAzBA5b,IAAMI,WAAU,WACVN,GAAsB,IAAXA,GAETpC,IAAYoC,IACd4b,EAAO,IACPE,GAAc,GAGd7b,EACG8b,cAAc/b,GAAShL,MAAK,SAASkX,GACpC0P,EAAO1P,GACP4P,GAAc,GACdJ,EAAW1b,MAEZ5F,OAAM,WACL0hB,GAAc,GACdJ,EAAW1b,SAKlB,CAACA,IAKF,oCACCA,GAAuB,KAAZA,IAAmB0K,GAC7B,kBAAC,GAAD,KACE,kBAAC4Q,GAAD,KACE,kBAACC,GAAD,KACG,kBAAC,GAAD,CAAUb,KAAM1a,EAAQgc,cAAerB,KAAM,CAACD,KAAM1a,EAAQgc,cAAe3Z,KAAM,EAAGwY,MAAO,OAGhG,kBAACW,GAAD,MACEK,GACA,kBAAC,IAAD,CACE9P,KAAK,OACLL,MAAM,OACNY,OAAQ,GACRC,MAAO,KAGVsP,GAAcF,GACb,oCAAGA,GAEJE,IAAeF,GACd,oCAAG3b,EAAQhK,UAAU,EAAG,GAAxB,QAAiCgK,EAAQhK,UAAUgK,EAAQpK,OAAS,Q,mmECb9E,IAAMuJ,GAAYC,IAAOkJ,OAAV,MAUH,SAAA5I,GAAK,OAAIA,EAAM4M,QAAU,MAC1B,SAAA5M,GAAK,OAAIA,EAAM6M,OAAS,MAa7B0P,GAASC,YAAH,MAgCNC,GAAY/c,IAAOkI,IAAV,MAEH,SAAA5H,GAAK,OAAIA,EAAM4M,QAAU,MAC1B,SAAA5M,GAAK,OAAIA,EAAM6M,OAAS,MAG9B,SAAA7M,GAAK,OAAIA,EAAM0c,QAAUxc,YAAhB,KACGqc,OAMXI,GAAejd,YAAO+c,GAAP/c,CAAH,MAIZkd,GAAQld,IAAOI,KAAV,MAaI+c,GApIf,YAA6D,IAA7CC,EAA4C,EAA5CA,WAAYC,EAAgC,EAAhCA,cAAelQ,EAAiB,EAAjBA,MAAOD,EAAU,EAAVA,OAAU,EAChCpM,IAAMC,SAAS,GADiB,mBACnDuc,EADmD,KAC5CC,EAD4C,OAElCzc,IAAMC,UAAS,GAFmB,mBAEnDyc,EAFmD,KAE7CC,EAF6C,KAI1D3c,IAAMI,WAAU,WAEdqc,EAASH,GAELE,EAAQ,GACVI,MAED,CAACN,IAEJ,IAAMM,EAAiB,WACrBD,GAAQ,GAERE,YAAW,WACPF,GAAQ,KACT,MAGL,OACE,kBAAC,GAAD,CACE9P,QAAS,WACH0P,GAAgBA,KAEtBlQ,MAAOA,EACPD,OAAQA,GAER,kBAAC6P,GAAD,CAAWS,KAAMA,EAAMpQ,IAAI,aAAawQ,UAAU,SAASZ,OAAQQ,EAAMrQ,MAAOA,EAAOD,OAAQA,IAC/F,kBAAC+P,GAAD,CAAc7P,IAAI,iBAAiBD,MAAOA,EAAOD,OAAQA,IACzD,kBAAC+P,GAAD,CAAc7P,IAAI,aAAaD,MAAOA,EAAOD,OAAQA,IAC3C,GAAToQ,GACC,kBAAC,kBAAD,CACExa,YAAY,SACZC,aAAa,UACbC,YAAa,KAEb,kBAACka,GAAD,KAAQI,M,q0DCiClB,IAAMO,GAAc7d,IAAOX,IAAV,MAWXye,GAAmB9d,IAAOX,IAAV,MAMhB0e,GAAO/d,IAAOkI,IAAV,MAIJ8V,GAAehe,IAAOX,IAAV,MAUZ4e,IAJcje,IAAOkJ,OAAV,MAIQlJ,IAAOX,IAAV,OAMhBsD,GAAS3C,IAAOI,KAAV,MAaN8d,GAAele,YAAO2C,GAAP3C,CAAH,MAIZme,GAAane,YAAO2C,GAAP3C,CAAH,MAIVoe,GAAape,IAAOI,KAAV,MAMZ,SAAAE,GAAK,MAAoB,WAAhBA,EAAM+d,OAAsB7d,YAA5B,SAIT,SAAAF,GAAK,MAAoB,YAAhBA,EAAM+d,OAAuB7d,YAA7B,SAIT,SAAAF,GAAK,MAAoB,UAAhBA,EAAM+d,OAAqB7d,YAA3B,SAME8d,GA5If,YAAgD,IAA9BlB,EAA6B,EAA7BA,WAAYC,EAAiB,EAAjBA,cAAiB,EACD1c,cAApCsS,EADqC,EACrCA,OAAQ3H,EAD6B,EAC7BA,MAAO1K,EADsB,EACtBA,QA0BvB,OA3B6C,EACbsS,QACf,IAAIqL,MAAM,GAE3Bzd,IAAMI,WAAU,cAIb,CAACN,IAoBF,kBAACid,GAAD,KACE,kBAACC,GAAD,KACC7K,IAAW3H,GACV,kBAAC,GAAD,OAEA2H,GACA,kBAAC8K,GAAD,CAAM3Q,IAAI,cAGZ,kBAAC4Q,GAAD,KACG/K,IAAW3H,GACV,kBAAC,GAAD,CACE8R,WAAYA,EACZC,cAAeA,EACflQ,MAAO,GACPD,OAAQ,MAId,kBAAC+Q,GAAD,OACK3S,GACD,kBAAC4S,GAAD,KAvCR,SAAyB5S,GACvB,OAAIA,aAAiBkT,IACZ,uFACElT,aAAiBmT,IACnB,iDAEPnT,aAAiBoT,IAEV,oDAEPxnB,QAAQoU,MAAMA,GACP,iEA4BYqT,CAAgBrT,KAE/B2H,IAAW3H,GACX,kBAAC6S,GAAD,yCAEF,kBAACC,GAAD,CAAYC,MAAOpL,EAAS,SAAW3H,EAAQ,QAAU,e,0sECvCjEsT,YAEA,IAAMC,GAA0D,CAC9DC,SAAU9lB,EACV+lB,QAAS5lB,EACT6lB,OAAQvlB,GAkBV,SAASwlB,GAAWC,EAAUC,GAC5B,OAAO,IAAIziB,SAAO0iB,UAAUC,aAAaH,GAG5B,kBACb,OACE,kBAAC,IAAD,CAAmBD,WAAYA,IAC7B,kBAAC,GAAD,QA2KN,SAASK,KACP,IAAMC,EAAU5e,cACRwe,EAA8EI,EAA9EJ,UAAWte,EAAmE0e,EAAnE1e,QAASqS,EAA0DqM,EAA1DrM,QAAStS,EAAiD2e,EAAjD3e,QAAS4e,EAAwCD,EAAxCC,SAAUC,EAA8BF,EAA9BE,WAAYxM,EAAkBsM,EAAlBtM,OAAQ3H,EAAUiU,EAAVjU,MAF/D,EAIyBxK,IAAMC,SAAS,GAJxC,mBAILqc,EAJK,KAIOjD,EAJP,OAK2BrZ,IAAMC,SAAS,GAL1C,mBAKLqZ,EALK,KAKQsF,EALR,KAQbrF,IAAQsF,WAAW,kBACnBtF,IAAQC,SAAS,UATJ,MAYyCxZ,IAAMC,WAZ/C,mBAYN6e,EAZM,KAYeC,EAZf,KAab/e,IAAMI,WAAU,WACV0e,GAAuBA,IAAwBT,GACjDU,OAAuB7T,KAExB,CAAC4T,EAAqBT,IAGzB,IAAMW,ErBnPD,WAA4B,IAAD,EACHnf,cAArB6e,EADwB,EACxBA,SAAUvM,EADc,EACdA,OADc,EAGNlS,oBAAS,GAHH,mBAGzBgf,EAHyB,KAGlBC,EAHkB,KAwBhC,OAnBA9e,qBAAU,WACRlI,EAASinB,eAAerqB,MAAK,SAACqqB,GACxBA,EACFT,EAASxmB,OAAUgT,GAAW,GAAMhR,OAAM,WACxCglB,GAAS,MAGXA,GAAS,QAGZ,IAGH9e,qBAAU,YACH6e,GAAS9M,GACZ+M,GAAS,KAEV,CAACD,EAAO9M,IAEJ8M,EqB2NYG,GAKnB,OrB7NK,WAAyD,IAA5BC,EAA2B,0DACzBxf,cAA5BsS,EADqD,EACrDA,OAAQ3H,EAD6C,EAC7CA,MAAOkU,EADsC,EACtCA,SAEvBte,qBAAU,WAAY,IACZkf,EAAaC,OAAbD,SACR,GAAIA,GAAYA,EAAS7e,KAAO0R,IAAW3H,IAAU6U,EAAU,CAC7D,IAAMG,EAAgB,WACpBppB,QAAQC,IAAI,4BACZqoB,EAASxmB,IAELunB,EAAqB,SAACrN,GAC1Bhc,QAAQC,IAAI,6CAA8C+b,GAC1DsM,EAASxmB,IAELwnB,EAAwB,SAACC,GAC7BvpB,QAAQC,IAAI,gDAAiDspB,GACzDA,EAASjqB,OAAS,GACpBgpB,EAASxmB,IAGP0nB,EAAuB,SAACC,GAC5BzpB,QAAQC,IAAI,+CAAgDwpB,GAC5DnB,EAASxmB,IAQX,OALAonB,EAAS7e,GAAG,UAAW+e,GACvBF,EAAS7e,GAAG,eAAgBgf,GAC5BH,EAAS7e,GAAG,kBAAmBif,GAC/BJ,EAAS7e,GAAG,iBAAkBmf,GAEvB,WACDN,EAASQ,iBACXR,EAASQ,eAAe,UAAWN,GACnCF,EAASQ,eAAe,eAAgBL,GACxCH,EAASQ,eAAe,kBAAmBJ,GAC3CJ,EAASQ,eAAe,iBAAkBF,QAI/C,CAACzN,EAAQ3H,EAAO6U,EAAUX,IqBoL7BqB,EAAqBf,KAAgBF,GAGjC,oCACE,kBAACkB,GAAD,KACE,kBAAC,GAAD,CACE1D,WAAYA,EACZC,cAAe,WAAOqC,EAAetF,EAAc,OAIvD,kBAAC2G,GAAD,KACE9N,IAAY3H,GACZ,kBAAC0V,GAAD,KACE,kBAAC,GAAD,CACE7G,cAAeA,EACfC,YAAaA,MAMjBnH,GACA,kBAACgO,GAAD,KACE,kBAACC,GAAD,CAAc9T,IAAI,mBAClB,kBAAC+T,GAAD,KACGnc,OAAOqJ,KAAKwQ,IAAkB1gB,KAAI,SAAA2O,GACjC,IAAMsU,EAAmBvC,GAAiB/R,GACpCuU,EAAaD,IAAqBxB,EAElCzW,GAAY2W,KAAgBF,GADhBwB,IAAqBjC,KACiC7T,EAClEgW,EAAiB,aAATxU,EAAsB,iBAA4B,WAATA,EAAoB,eAAiB,cAE5F,OACE,kBAACyU,GAAD,CACEpY,SAAUA,EACVnV,IAAK8Y,EACLa,QAAS,WACPkS,EAAuBuB,GACvB5B,EAASX,GAAiB/R,KAE5B6C,OAAiB,aAAT7C,EAAsB,UAAqB,WAATA,EAAoB,UAAY,WAE1E,kBAAC0U,GAAD,CAAepU,IAAKkU,IAEpB,kBAACG,GAAD,KACGJ,GACC,kBAAC,IAAD,CACG1U,KAAK,OACLL,MAAM,UACNY,OAAQ,GACRC,MAAO,MAGVkU,GACA,oCACU,aAATvU,EAAsB,wBAAmC,WAATA,EAAoB,sBAAwB,yBAa5GmG,GACC,yBACEyO,MAAO,CACLrP,QAAS,OACTsP,QAAS,OACTC,oBAAqB,cACrBnS,SAAU,QACVZ,OAAQ,OACRgT,UAAW,YAGX5O,GAAU3H,IACV,4BACEoW,MAAO,CACLxU,OAAQ,OACR2U,UAAW,OACXla,aAAc,OACdma,YAAa,MACbtP,OAAQ,WAEV7E,QAAS,WACP8R,MATJ,iBAgBE5e,IAAWD,IACb,4BACE8gB,MAAO,CACLxU,OAAQ,OACRvF,aAAc,OACd6K,OAAQ,WAEV7E,QAAS,WACP9M,EACGiK,UAAUlK,GACVmK,YAAY,gBACZnV,MAAK,SAACoV,GACLqV,OAAO0B,MAAP,sBAA4B/W,OAE7BhQ,OAAM,SAACsQ,GACN+U,OAAO0B,MAAM,YAAczW,GAASA,EAAMvX,QAAf,cAAgCuX,EAAMvX,SAAY,UAdrF,kBAqBEorB,IAAchmB,IAAW+Z,IAC3B,4BACEwO,MAAO,CACLxU,OAAQ,OACRvF,aAAc,OACd6K,OAAQ,WAEV7E,QAAS,WACLwR,EAAkB6C,cAA0B,IAAZ9O,EAAgB,EAAI,KAP1D,mBAaDiM,IAAc1lB,GACb,yCACeuS,IAAZkH,GACC,4BACEwO,MAAO,CACLxU,OAAQ,OACRvF,aAAc,OACd6K,OAAQ,WAEV7E,QAAS,WACLwR,EAAkB8C,cAA0B,IAAZ/O,EAAgB,IAAM,KAP5D,mBAaF,4BACEwO,MAAO,CACLxU,OAAQ,OACRvF,aAAc,OACd6K,OAAQ,WAEV7E,QAAS,WACLwR,EAAkB+C,UAPxB,0BAkBR,kBAAC,IAAD,CACEzW,SAAS,eACTC,WAAW,EACXyW,aAAW,EACXvW,cAAY,EACZwW,KAAK,EACLC,kBAAgB,EAChBvW,WAAS,KAQnB,IAAMgV,GAAkB9gB,IAAOX,IAAV,MAUf0hB,GAAkB/gB,IAAOX,IAAV,MASf2hB,GAAgBhhB,IAAOX,IAAV,MAQb4hB,GAAyBjhB,IAAOX,IAAV,MAOtB6hB,GAAelhB,IAAOkI,IAAV,MAQZiZ,GAAoBnhB,IAAOX,IAAV,MAOjBkiB,GAAiBvhB,IAAOkJ,OAAV,MA0BI,SAAA5I,GAAK,OAAIA,EAAMqP,UAMf,SAAArP,GAAK,OAAIA,EAAMqP,UAIjC6R,GAAgBxhB,IAAOkI,IAAV,MAKbuZ,GAAgBzhB,IAAOI,KAAV,MAKKJ,YAAOsiB,KAAgBC,MAAM,GAA7BviB,CAAH,MCtgBDwiB,QACW,cAA7BnC,OAAOoC,SAASC,UAEe,UAA7BrC,OAAOoC,SAASC,UAEhBrC,OAAOoC,SAASC,SAASC,MAAM,2DCHnC/D,YAGA,IAAMgE,GAAS,IAAIC,IAAa,CAC9BC,IAAK,qEAGPC,IAASrW,OAEL,kBAAC,IAAD,CAAgBkW,OAAQA,IACtB,kBAACtD,GAAD,OAEF0D,SAASC,eAAe,SDkGtB,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMxtB,MAAK,SAAAytB,GACjCA,EAAaC,iB,gngBE9HnB,WAEC,IAAIC,EAAW,IAAIhF,MAAM,GAWzB,SAASiF,IAER,IAAIC,EAAIF,EAAS,GAAMA,EAAS,IAAM,GAOtC,OALAA,EAAS,GAAKA,EAAS,GACvBA,EAAS,GAAKA,EAAS,GACvBA,EAAS,GAAKA,EAAS,GACvBA,EAAS,GAAMA,EAAS,GAAMA,EAAS,IAAM,GAAME,EAAKA,GAAK,GAErDF,EAAS,KAAK,IAAO,GAAK,KAAM,GAGzC,SAASG,IASR,MADY,OANJ9qB,KAAKC,MAAe,IAAT2qB,KAMM,KAJN,GAATA,IAAe,GAAM,KAII,KAFM,IAA/BA,IAAOA,IAAOA,IAAOA,KAAgB,KAEF,IA+B9C,SAASG,EAAUpI,GAClB,IAAIqI,EAAU,GAYd,OAVAA,EAAQtI,KAAOC,EAAKD,MAAQ1iB,KAAKC,MAAOD,KAAKE,SAASF,KAAKirB,IAAI,GAAG,KAAM1vB,SAAS,IA/DlF,SAAkBmnB,GACjB,IAAK,IAAI5iB,EAAI,EAAGA,EAAI6qB,EAAS/sB,OAAQkC,IACpC6qB,EAAS7qB,GAAK,EAEf,IAASA,EAAI,EAAGA,EAAI4iB,EAAK9kB,OAAQkC,IAChC6qB,EAAS7qB,EAAE,IAAO6qB,EAAS7qB,EAAE,IAAM,GAAK6qB,EAAS7qB,EAAE,GAAM4iB,EAAKwI,WAAWprB,GA4D1EqrB,CAASH,EAAQtI,MAEjBsI,EAAQ3gB,KAAOsY,EAAKtY,MAAQ,EAC5B2gB,EAAQnI,MAAQF,EAAKE,OAAS,EAC9BmI,EAAQtX,MAAQiP,EAAKjP,OAASoX,IAC9BE,EAAQpI,QAAUD,EAAKC,SAAWkI,IAClCE,EAAQlI,UAAYH,EAAKG,WAAagI,IAE/BE,EAGR,SAASI,EAAWzI,EAAMO,GAEzB,IAAImI,EA7CL,SAAyBhhB,GAQxB,IAPA,IAAIkK,EAAQlK,EACRiK,EAASjK,EAETihB,EAAYtrB,KAAKwf,KAAKjL,EAAQ,GAC9BgX,EAAchX,EAAQ+W,EAEtBE,EAAO,GACHC,EAAI,EAAGA,EAAInX,EAAQmX,IAAK,CAE/B,IADA,IAAIC,EAAM,GACFC,EAAI,EAAGA,EAAIL,EAAWK,IAG7BD,EAAIC,GAAK3rB,KAAKC,MAAa,IAAP2qB,KAErB,IAAIgB,EAAIF,EAAIjZ,MAAM,EAAG8Y,GACrBK,EAAEC,UACFH,EAAMA,EAAIjuB,OAAOmuB,GAEjB,IAAI,IAAI9rB,EAAI,EAAGA,EAAI4rB,EAAI9tB,OAAQkC,IAC9B0rB,EAAKnmB,KAAKqmB,EAAI5rB,IAIhB,OAAO0rB,EAqBSM,EADhBnJ,EAAOoI,EAAUpI,GAAQ,KACYtY,MACjCkK,EAAQvU,KAAK+rB,KAAKV,EAAUztB,QAEhCslB,EAAO3O,MAAQ2O,EAAO5O,OAASqO,EAAKtY,KAAOsY,EAAKE,MAEhD,IAAImJ,EAAK9I,EAAO+I,WAAW,MAC3BD,EAAGE,UAAYvJ,EAAKC,QACpBoJ,EAAGG,SAAS,EAAG,EAAGjJ,EAAO3O,MAAO2O,EAAO5O,QACvC0X,EAAGE,UAAYvJ,EAAKjP,MAEpB,IAAI,IAAI5T,EAAI,EAAGA,EAAIurB,EAAUztB,OAAQkC,IAGpC,GAAGurB,EAAUvrB,GAAI,CAChB,IAAI4rB,EAAM1rB,KAAKC,MAAMH,EAAIyU,GACrB6X,EAAMtsB,EAAIyU,EAGdyX,EAAGE,UAA6B,GAAhBb,EAAUvrB,GAAW6iB,EAAKjP,MAAQiP,EAAKG,UAEvDkJ,EAAGG,SAASC,EAAMzJ,EAAKE,MAAO6I,EAAM/I,EAAKE,MAAOF,EAAKE,MAAOF,EAAKE,OAGnE,OAAOK,EAWR,IAAImJ,EAAM,CACTC,OATD,SAAoB3J,GACnB,IAAIO,EAASkH,SAASjH,cAAc,UAIpC,OAFAiI,EAAWzI,EAAMO,GAEVA,GAKPpP,OAAQsX,GAIRmB,EAAOC,QAAUH,EAEI,qBAAX5E,SACTA,OAAOxE,SAAWoJ,GA7HrB,I","file":"static/js/main.50fe7442.chunk.js","sourcesContent":["import EthCrypto from 'eth-crypto';\nimport {encrypt, decrypt} from 'eccrypto';\nimport { publicKeyConvert, publicKeyVerify } from 'secp256k1-v4';\n\nvar CryptoJS = require(\"crypto-js\");\n\nconst CryptoHelper = {\n  // To Encrypt with AES\n  encryptWithAES: function(message, key) {\n    return CryptoJS.AES.encrypt(message, key).toString();\n  },\n  // To Decrypt with AES\n  decryptWithAES: function(message, key) {\n    let bytes  = CryptoJS.AES.decrypt(message, key);\n    return bytes.toString(CryptoJS.enc.Utf8);\n  },\n  // To Form Encryted Secret, no more than 15 characters supported\n  encryptWithECIES: async function(message, publicKey) {\n    const compressedKey = EthCrypto.publicKey.compress(publicKey);\n\n    const encryptedSecret = await this.encryptWithPublicKey(message, compressedKey);\n\n    // Not using it since sqlite2 has some error with this\n    // const compressedEncryptedSecret = EthCrypto.hex.compress(encryptedSecret);\n\n    return encryptedSecret;\n  },\n  // To Form Decrypted Secret, no more than 15 characters supported\n  decryptWithECIES: async function(message, privateKey) {\n    // Message is always compressed, not using because sqlite2 has some error with this\n    //const uncompressedMessage = EthCrypto.hex.decompress(message).substr(2); // to remove 0x\n\n    return await this.decryptWithPrivateKey(message, privateKey);\n  },\n  // Encryption with public key\n  encryptWithPublicKey: async function(message, publicKey) {\n    // Convert compressed public key, starts with 03 or 04\n    const pubKeyUint8Array = Uint8Array.from(\n      new Buffer(publicKey, 'hex')\n    );\n    //console.log(\"[ENCRYPTION] Public Key Uint8Array: \" + pubKeyUint8Array);\n\n    const convertedKeyAsUint8Array = publicKeyConvert(pubKeyUint8Array, false);\n    //console.log(\"[ENCRYPTION] Public Key Converted: \" + convertedKeyAsUint8Array);\n\n    const convertedPublicKeyHex = new Buffer(convertedKeyAsUint8Array);\n    //console.log(\"[ENCRYPTION] Converted Public Key Buffer: \" + convertedPublicKeyHex);\n\n    const pubKey = new Buffer(convertedPublicKeyHex, 'hex');\n    //console.log(\"[ENCRYPTION] pubkey getting sentout for encrypt: \" + pubKey);\n\n    return encrypt(\n        pubKey,\n        Buffer(message)\n    ).then(encryptedBuffers => {\n      const cipher = {\n          iv: encryptedBuffers.iv.toString('hex'),\n          ephemPublicKey: encryptedBuffers.ephemPublicKey.toString('hex'),\n          ciphertext: encryptedBuffers.ciphertext.toString('hex'),\n          mac: encryptedBuffers.mac.toString('hex')\n      };\n      // use compressed key because it's smaller\n      // const compressedKey = new Buffer.from(publicKeyConvert(Web3Helper.getUint8ArrayFromHexStr(cipher.ephemPublicKey), true)).toString('hex')\n      const input = Uint8Array.from(\n        new Buffer(cipher.ephemPublicKey, 'hex')\n      );\n      const keyConvert = publicKeyConvert(input, true)\n      // console.log(\"[ENCRYPTION] Coverted key: \" + keyConvert);\n\n      const keyConvertBuffer = new Buffer(keyConvert);\n      // console.log(\"[ENCRYPTION] Coverted key in buffer : \" + keyConvertBuffer);\n      // console.log(keyConvertBuffer);\n\n      //console.log(keyConvert);\n      const compressedKey = keyConvertBuffer.toString('hex')\n      // console.log(\"[ENCRYPTION] Compressed key in buffer : \");\n      // console.log(compressedKey);\n\n      const ret = Buffer.concat([\n        new Buffer(cipher.iv, 'hex'), // 16bit\n        new Buffer(compressedKey, 'hex'), // 33bit\n        new Buffer(cipher.mac, 'hex'), // 32bit\n        new Buffer(cipher.ciphertext, 'hex') // var bit\n      ]).toString('hex')\n\n      return ret\n    });\n  },\n  // Decryption with public key\n  decryptWithPrivateKey: async function(message, privateKey) {\n    let encrypted = message;\n    const buf = new Buffer(encrypted, 'hex');\n    // console.log(\"[DECRYPTION] Buffer Passed: \" + buf);\n\n    encrypted = {\n      iv: buf.toString('hex', 0, 16),\n      ephemPublicKey: buf.toString('hex', 16, 49),\n      mac: buf.toString('hex', 49, 81),\n      ciphertext: buf.toString('hex', 81, buf.length)\n    };\n    // decompress publicKey\n    // encrypted.ephemPublicKey = new Buffer.from(publicKeyConvert(Web3Helper.getUint8ArrayFromHexStr(encrypted.ephemPublicKey), true)).toString('hex')\n    const input = Uint8Array.from(new Buffer(encrypted.ephemPublicKey, 'hex'));\n    const keyConvert = publicKeyConvert(input, false)\n    // console.log(\"[DECRYPTION] Coverted key: \" + keyConvert);\n\n    const keyConvertBuffer = new Buffer(keyConvert);\n    // console.log(\"[DECRYPTION] Coverted key in buffer : \" + keyConvertBuffer);\n    // console.log(keyConvertBuffer);\n\n    //console.log(keyConvert);\n    const uncompressedKey = keyConvertBuffer.toString('hex')\n    // console.log(\"[DECRYPTION] Uncompressed key in buffer : \");\n    // console.log(uncompressedKey);\n\n    encrypted.ephemPublicKey = uncompressedKey;\n    const twoStripped = privateKey.substring(2)\n\n    const encryptedBuffer = {\n      iv: new Buffer(encrypted.iv, 'hex'),\n      ephemPublicKey: new Buffer(encrypted.ephemPublicKey, 'hex'),\n      ciphertext: new Buffer(encrypted.ciphertext, 'hex'),\n      mac: new Buffer(encrypted.mac, 'hex')\n    };\n\n    return decrypt(\n      new Buffer(twoStripped, 'hex'),\n      encryptedBuffer\n    ).then(decryptedBuffer => decryptedBuffer.toString());\n  },\n  // Testing of Encryption and Decryption from Public to Private key\n  encryptionDecryptionPublicToPrivateTest: async function(privateKey) {\n    const startTime = new Date();\n    console.log(\"[ENCRYPTION / DECRYPTION TEST STARTED] - \" + startTime);\n\n    const publicKey = EthCrypto.publicKeyByPrivateKey(privateKey);\n    const compressedKey = EthCrypto.publicKey.compress(publicKey); // is String\n    //console.log(compressedKey);\n\n    // const bytesCompKey = Uint8Array.from(compressedKey);\n    //console.log(bytesCompKey);\n\n    const msgToEncrypt = \"PartialStringAS\";\n    const msg = await this.encryptWithPublicKey(msgToEncrypt, compressedKey);\n    console.log(\"Encryped Message With compressed public key:\" + msg);\n\n    const encryptionTime = new Date().getTime() - startTime.getTime();\n    console.log(\"[ENCRYPTION / DECRYPTION ENCRYPTION DONE] - \" + encryptionTime / 1000 + \" secs\");\n\n    // Decrypt this message\n    const decryptMsg = await this.decryptWithPrivateKey(msg, privateKey);\n    console.log(\"[ENCRYPTION / DECRYPTION DECRYPTED MESSAGE] - '\" + decryptMsg + \"'\");\n\n    const decryptionTime = new Date().getTime() - startTime.getTime() - encryptionTime;\n    console.log(\"[ENCRYPTION / DECRYPTION DECRYPTION DONE] - \" + decryptionTime / 1000 + \" secs\");\n  },\n  // To output messge payload if required\n  outputMsgPayload: async function(secret, subject, message, calltoaction, imageurl, pkey) {\n    // Output AES\n    console.log(\"[AES ENCRYTED FORMAT (\" + new Date() + \")\");\n    console.log(\"---------------------\");\n    console.log(\"secret --> \");\n    const secretEncrypted = await this.encryptWithECIES(secret, pkey);\n    const asubE = this.encryptWithAES(subject, secret);\n    const amsgE = this.encryptWithAES(message, secret);\n    const actaE = this.encryptWithAES(calltoaction, secret);\n    const aimgE = this.encryptWithAES(imageurl, secret);\n\n    console.log(secretEncrypted);\n    console.log(\"asub --> \");\n    console.log(asubE);\n    console.log(\"amsg --> \");\n    console.log(amsgE);\n    console.log(\"acta --> \");\n    console.log(actaE);\n    console.log(\"aimg --> \");\n    console.log(aimgE);\n    console.log(\"decrypted secret --> \");\n    console.log(await this.decryptWithECIES(secretEncrypted, pkey));\n    console.log(\"decrypted asub --> \");\n    console.log(this.decryptWithAES(asubE, secret));\n    console.log(\"decrypted amsg --> \");\n    console.log(this.decryptWithAES(amsgE, secret));\n    console.log(\"decrypted acta --> \");\n    console.log(this.decryptWithAES(actaE, secret));\n    console.log(\"decrypted aimg --> \");\n    console.log(this.decryptWithAES(aimgE, secret));\n  },\n  makeid: function (length) {\n     var result           = '[' + new Date().toISOString() + '] ';\n     var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n     var charactersLength = characters.length;\n     for ( var i = 0; i < length; i++ ) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n     }\n     return result;\n  }\n};\n\nexport default CryptoHelper;\n","import { InjectedConnector } from '@web3-react/injected-connector'\nimport { PortisConnector } from '@web3-react/portis-connector'\nimport { NetworkConnector } from '@web3-react/network-connector'\n// import { WalletConnectConnector } from '@web3-react/walletconnect-connector'\n// import { WalletLinkConnector } from '@web3-react/walletlink-connector'\n// import { LedgerConnector } from '@web3-react/ledger-connector'\n// import { TrezorConnector } from '@web3-react/trezor-connector'\n// import { FrameConnector } from '@web3-react/frame-connector'\n// import { AuthereumConnector } from '@web3-react/authereum-connector'\n// import { FortmaticConnector } from '@web3-react/fortmatic-connector'\n// import { SquarelinkConnector } from '@web3-react/squarelink-connector'\n// import { TorusConnector } from '@web3-react/torus-connector'\n\nrequire('dotenv').config();\n\nconst POLLING_INTERVAL = 12000\nconst RPC_URLS: { [chainId: number]: string } = {\n  3: \"https://ropsten.infura.io/v3/084ddf3da9e240c5b5dd9264f37c0526\" as string\n}\n\nexport const injected = new InjectedConnector({ supportedChainIds: [3] })\n\nexport const network = new NetworkConnector({\n  urls: { 3: RPC_URLS[3] },\n  defaultChainId: 3,\n  pollingInterval: POLLING_INTERVAL\n})\n\n// export const walletconnect = new WalletConnectConnector({\n//   rpc: { 1: RPC_URLS[1] },\n//   bridge: 'https://bridge.walletconnect.org',\n//   qrcode: true,\n//   pollingInterval: POLLING_INTERVAL\n// })\n//\n// export const walletlink = new WalletLinkConnector({\n//   url: RPC_URLS[1],\n//   appName: 'web3-react example'\n// })\n//\n// export const ledger = new LedgerConnector({ chainId: 1, url: RPC_URLS[1], pollingInterval: POLLING_INTERVAL })\n//\n// export const trezor = new TrezorConnector({\n//   chainId: 1,\n//   url: RPC_URLS[1],\n//   pollingInterval: POLLING_INTERVAL,\n//   manifestEmail: 'dummy@abc.xyz',\n//   manifestAppUrl: 'http://localhost:1234'\n// })\n//\n// export const frame = new FrameConnector({ supportedChainIds: [1] })\n//\n// export const authereum = new AuthereumConnector({ chainId: 42 })\n//\n// export const fortmatic = new FortmaticConnector({ apiKey: process.env.FORTMATIC_API_KEY as string, chainId: 4 })\n\nexport const portis = new PortisConnector({ dAppId: 'cfefa032-9afd-4833-bfb4-2b0cb7ec3413' as string, networks: [1, 100] })\n\n// export const squarelink = new SquarelinkConnector({\n//   clientId: process.env.SQUARELINK_CLIENT_ID as string,\n//   networks: [1, 100]\n// })\n\n// export const torus = new TorusConnector({ chainId: 1 })\n","import { useState, useEffect } from 'react'\nimport { useWeb3React } from '@web3-react/core'\n\nimport { injected } from './connectors'\n\nrequire('dotenv').config();\n\nexport function useEagerConnect() {\n  const { activate, active } = useWeb3React()\n\n  const [tried, setTried] = useState(false)\n\n  useEffect(() => {\n    injected.isAuthorized().then((isAuthorized: boolean) => {\n      if (isAuthorized) {\n        activate(injected, undefined, true).catch(() => {\n          setTried(true)\n        })\n      } else {\n        setTried(true)\n      }\n    })\n  }, []) // intentionally only running on mount (make sure it's only mounted once :))\n\n  // if the connection worked, wait until we get confirmation of that to flip the flag\n  useEffect(() => {\n    if (!tried && active) {\n      setTried(true)\n    }\n  }, [tried, active])\n\n  return tried\n}\n\nexport function useInactiveListener(suppress: boolean = false) {\n  const { active, error, activate } = useWeb3React()\n\n  useEffect((): any => {\n    const { ethereum } = window as any\n    if (ethereum && ethereum.on && !active && !error && !suppress) {\n      const handleConnect = () => {\n        console.log(\"Handling 'connect' event\")\n        activate(injected)\n      }\n      const handleChainChanged = (chainId: string | number) => {\n        console.log(\"Handling 'chainChanged' event with payload\", chainId)\n        activate(injected)\n      }\n      const handleAccountsChanged = (accounts: string[]) => {\n        console.log(\"Handling 'accountsChanged' event with payload\", accounts)\n        if (accounts.length > 0) {\n          activate(injected)\n        }\n      }\n      const handleNetworkChanged = (networkId: string | number) => {\n        console.log(\"Handling 'networkChanged' event with payload\", networkId)\n        activate(injected)\n      }\n\n      ethereum.on('connect', handleConnect)\n      ethereum.on('chainChanged', handleChainChanged)\n      ethereum.on('accountsChanged', handleAccountsChanged)\n      ethereum.on('networkChanged', handleNetworkChanged)\n\n      return () => {\n        if (ethereum.removeListener) {\n          ethereum.removeListener('connect', handleConnect)\n          ethereum.removeListener('chainChanged', handleChainChanged)\n          ethereum.removeListener('accountsChanged', handleAccountsChanged)\n          ethereum.removeListener('networkChanged', handleNetworkChanged)\n        }\n      }\n    }\n  }, [active, error, suppress, activate])\n}\n","// This address points to a dummy ERC20 contract deployed on Ethereum Mainnet,\n// Goerli, Kovan, Rinkeby and Ropsten. Replace it with your smart contracts.\nconst addresses = {\n  ceaErc20: \"0xc1C0472c0C80bCcDC7F5D01A376Bd97a734B8815\",\n  epnscore: \"0xb02E99b9634bD21A8e3E36cc7adb673287A8FeaC\",\n  dai: \"0xf80A32A835F79D7787E8a8ee5721D0fEaFd78108\",\n  aDai: \"0xcB1Fe6F440c49E9290c3eb7f158534c2dC374201\",\n};\n\nexport default addresses;\n","import erc20Abi from \"./abis/erc20\";\nimport ownableAbi from \"./abis/ownable\";\nimport epnscoreAbi from \"./abis/epnscore\";\n\nexport const abis = {\n  erc20: erc20Abi,\n  ownable: ownableAbi,\n  epnscore: epnscoreAbi,\n};\n\nexport { default as addresses } from \"./addresses\";\n","import React from \"react\";\n\nimport { addresses, abis } from \"@project/contracts\";\nimport { ethers } from \"ethers\";\nimport { parseEther, bigNumber } from 'ethers/utils'\n\n// FeedDB Helper Function\nconst EPNSCoreHelper = {\n  // To get owner info\n  getOwnerInfo: async (contract) => {\n    const enableLogs = 0;\n\n    return new Promise ((resolve, reject) => {\n      // Get User Info from EPNS Core\n      contract.governance()\n        .then(response => {\n          if (enableLogs) console.log(\"getOwnerInfo() --> %o\", response);\n          resolve(response);\n        })\n        .catch(err => {\n          console.log(\"!!!Error, getOwnerInfo() --> %o\", err);\n          reject(err);\n        });\n    })\n  },\n  // To get user info\n  getUserInfo: async (user, contract) => {\n    const enableLogs = 0;\n\n    return new Promise ((resolve, reject) => {\n      // Get User Info from EPNS Core\n      contract.users(user)\n        .then(response => {\n          const mappings = { ...response };\n          mappings.addr = user;\n\n          if (enableLogs) console.log(\"getUserInfo() --> %o\", mappings);\n          resolve(mappings);\n        })\n        .catch(err => {\n          console.log(\"!!!Error, getUserInfo() --> %o\", err);\n          reject(err);\n        });\n    })\n  },\n  // To retrieve a channel address from it's id\n  getChannelAddressFromID: async (channelID, contract) => {\n    return new Promise ((resolve, reject) => {\n      // To get channel info from a channel address\n      contract.mapAddressChannels(channelID)\n        .then(response => {\n          console.log(\"getChannelAddressFromID() --> %o\", response.toString());\n          resolve(response.toString());\n        })\n        .catch(err => { console.log(\"!!!Error, getChannelAddressFromID() --> %o\", err); reject(err); });\n    })\n  },\n  // To retrieve a channel's Info from channel address\n  getChannelInfo: async (channel, contract) => {\n    const enableLogs = 0;\n\n    return new Promise ((resolve, reject) => {\n      // To get channel info from a channel address\n      contract.channels(channel)\n        .then(response => {\n          // Add an extra field for future info\n          const mappings = { ...response };\n          mappings.addr = channel;\n\n          if (enableLogs) console.log(\"getChannelInfo() --> %o\", mappings);\n          resolve(mappings);\n        })\n        .catch(err => {\n          console.log(\"!!!Error, getChannelInfo() --> %o\", err);\n          reject(err);\n        });\n    })\n  },\n  // To retrieve a channel's AddChannel event\n  getChannelEvent: async (channel, startBlock, updateBlock, contract) => {\n    const enableLogs = 0;\n\n    return new Promise ((resolve, reject) => {\n\n      // To get channel ipfs hash from channel info\n      let filter = contract.filters.AddChannel(channel);\n      let block = startBlock;\n      if (startBlock != updateBlock) {\n        filter = contract.filters.UpdateChannel(channel);\n        block = updateBlock;\n      }\n\n      contract.queryFilter(filter, block, block)\n        .then(response => {\n          let filteredResponse;\n\n          if (enableLogs) console.log(\"getChannelEvent() --> Finding: %s in | %o |\", channel, response );\n\n          response.forEach(function (item) {\n            if (item.args.channel.toString() == channel.toString()) {\n              if (enableLogs) console.log(\"getChannelEvent() --> Selected Channel %o: \", item);\n              filteredResponse = ethers.utils.toUtf8String(item.args.identity);\n            }\n          });\n\n          if (enableLogs) console.log(\"getChannelEvent() --> Filtered Channel: %o\", filteredResponse);\n          resolve(filteredResponse);\n        })\n        .catch(err => {\n          console.log(\"!!!Error, getChannelEvent() --> %o\", err);\n          reject(err);\n        });\n    })\n  },\n  // Retrive IPFS File from ipfshash\n  getJsonFileFromIdentity: async(identity) => {\n    const enableLogs = 0;\n\n    return new Promise ((resolve, reject) => {\n      // Split Channel Identity, delimeter of identity is \"+\"\n      const ids = identity.split(\"+\"); // First segment is storage type, second is the pointer to it\n\n      if (ids[0] == 1) {\n        // IPFS HASH\n        // Form Gateway URL\n        const url = \"https://ipfs.io/ipfs/\" + ids[1];\n        fetch(url)\n          .then(response => response.json())\n          .then(response => {\n            if (enableLogs) console.log(\"getJsonFileFromIdentity() --> %o\", response);\n            resolve(response);\n          })\n          .catch(err => {\n            console.log(\"!!!Error, getJsonFileFromIdentity() --> %o\", err);\n            reject(err);\n          });\n      }\n\n    });\n  },\n  // Helper to get Channel from Channel's address\n  getChannelJsonFromChannelAddress: async (channel, contract) => {\n    const enableLogs = 0;\n\n    return new Promise ((resolve, reject) => {\n      // To get channel info from a channel address\n      EPNSCoreHelper.getChannelInfo(channel, contract)\n        .then(response => EPNSCoreHelper.getChannelEvent(channel, response.channelStartBlock.toNumber(), response.channelUpdateBlock.toNumber(), contract))\n        .then(response => EPNSCoreHelper.getJsonFileFromIdentity(response))\n        .then(response => {\n          if (enableLogs) console.log(\"getChannelJsonFromChannelAddress() --> %o\", response);\n          resolve(response);\n        })\n        .catch(err => {\n          console.log(\"!!!Error, getChannelJsonFromChannelAddress() --> %o\", err);\n          reject(err);\n        });\n    });\n  },\n  // Helper to get Channel from User's address\n  getChannelJsonFromUserAddress: async (user, contract) => {\n    const enableLogs = 0;\n\n    return new Promise ((resolve, reject) => {\n      // To get channel info from a channel address\n      EPNSCoreHelper.getUserInfo(user, contract)\n        .then(response => EPNSCoreHelper.getChannelJsonFromChannelAddress(user, contract))\n        .then(response => {\n          if (enableLogs) console.log(\"getChannelJsonFromUserAddress() --> %o\", response);\n          resolve(response);\n        })\n        .catch(err => {\n          console.log(\"!!!Error, getChannelJsonFromUserAddress() --> %o\", err);\n          reject(err);\n        });\n    });\n  },\n  // Get Total Number of Channels\n  getTotalNumberOfChannels: async (contract) => {\n    const enableLogs = 0;\n\n    return new Promise ((resolve, reject) => {\n      // Get User Info from EPNS Core\n      contract.channelsCount()\n        .then(response => {\n          if (enableLogs) console.log(\"getTotalNumberOfChannels() --> %o\", response.toNumber());\n          resolve(response.toNumber());\n        })\n        .catch(err => {\n          console.log(\"!!!Error, getTotalNumberOfChannels() --> %o\", err);\n          reject(err);\n        });\n    })\n  },\n  // Get channels address given number of channels, , atIndex: -1 is start from latest, numChannels: -1 is return all\n  getChannelsMetaLatestToOldest: async (atIndex, numChannels, contract) => {\n    const enableLogs = 0;\n\n    return new Promise ((resolve, reject) => {\n      EPNSCoreHelper.getTotalNumberOfChannels(contract)\n        .then(async (response) => {\n          let channelsInfo = [];\n          const channelsCount = response;\n\n          if (atIndex > channelsCount || atIndex == -1) {\n            atIndex = channelsCount - 1;\n          }\n\n          if (numChannels == -1) {\n            numChannels = channelsCount;\n          }\n\n          // Get channels\n          let channelArrays = [];\n\n          // prefil and then refil\n          let count = 0;\n          for (let i = numChannels - 1; i >= 0; i--) {\n            const assignedChannelID = atIndex - i;\n            channelArrays.push(assignedChannelID);\n          }\n\n          const promises = channelArrays.map(async (channelID) => {\n            await EPNSCoreHelper.getChannelAddressFromID(channelID, contract)\n              .then(response => EPNSCoreHelper.getChannelInfo(response, contract))\n              .then(response => {\n                if (enableLogs) console.log(\"getChannelsMetaLatestToOldest(%d, %d) --> %o\", channelID, numChannels, channelsInfo);\n                channelsInfo = [response, ...channelsInfo];\n              })\n              .catch(err => console.log(\"Error in channel: %d | skipping...\", channelID))\n          });\n\n          // wait until all promises are resolved\n          await Promise.all(promises);\n\n          if (enableLogs) console.log(\"getChannelsMetaLatestToOldest(Index: %d, Number: %d) --> %o\", atIndex, numChannels, channelsInfo);\n          resolve(channelsInfo);\n        })\n        .catch(err => {\n          console.log(\"!!!Error, getChannelsMetaLatestToOldest() --> %o\", err);\n          reject(err);\n        })\n    });\n  },\n  // Get Total Number of Users\n  getTotalNumberOfUsers: async (contract) => {\n    return new Promise ((resolve, reject) => {\n      // Get User Info from EPNS Core\n      contract.usersCount()\n        .then(response => {\n          console.log(\"getTotalNumberOfUsers() --> %o\", response.toNumber());\n          resolve(response.toNumber());\n        })\n        .catch(err => { console.log(\"!!!Error, getTotalNumberOfUsers() --> %o\", err); reject(err); });\n    })\n  },\n  // To retrieve public key of a user\n  getPublicKey: async (address, contract) => {\n    const enableLogs = 0;\n\n    return new Promise ((resolve, reject) => {\n      // To get channel ipfs hash from channel info\n      let filteredResponse;\n      contract.queryFilter('PublicKeyRegistered')\n        .then(response => {\n\n          response.forEach(function (item) {\n            if (item.args[0] == address) {\n              filteredResponse = item;\n            }\n          });\n\n          if (enableLogs) console.log(\"Public Key Registry Response: \" + response);\n          if (enableLogs) console.log(\"Public Key Registry Filtered: \" + filteredResponse);\n\n          if (!filteredResponse || filteredResponse.length == 0) {\n            resolve(null)\n          }\n          else {\n            resolve(filteredResponse.args[1]);\n          }\n\n        })\n        .catch((err) => {\n          console.log(err);\n          reject(err);\n        });\n    })\n  },\n  // Get Total Subsbribed Channels\n  getSubscribedStatus: async (user, channel, contract) => {\n    return new Promise ((resolve, reject) => {\n      // Get User Info from EPNS Core\n      contract.memberExists(user, channel)\n        .then(response => {\n          console.log(\"getSubscribedStatus() --> %o\", response);\n          resolve(response);\n        })\n        .catch(err => { console.log(\"!!!Error, getSubscribedStatus() --> %o\", err); reject(err); });\n    })\n  },\n  // Get Total Subsbribed Channels\n  getTotalSubscribedChannels: async (user, contract) => {\n    return new Promise ((resolve, reject) => {\n      // Get User Info from EPNS Core\n      contract.users[user].subscribedCount()\n        .then(response => {\n          console.log(\"getTotalSubscribedChannels() --> %o\", response.toNumber());\n          resolve(response.toNumber());\n        })\n        .catch(err => { console.log(\"!!!Error, getTotalSubscribedChannels() --> %o\", err); reject(err); });\n    })\n  },\n  // Get Fair Share\n  getFairShareOfUserAtBlock: async(user, block, contract) => {\n    const enableLogs = 0;\n\n    return new Promise ((resolve, reject) => {\n      // Get User Info from EPNS Core\n      contract.users(user)\n        .then((response) => {\n          if (response.userActivated) {\n            contract.calcAllChannelsRatio(user, block)\n              .then(response => {\n                if (enableLogs) console.log(\"calcAllChannelsRatio() --> %o\", response);\n                resolve(response);\n              })\n              .catch(err => {\n                console.log(\"!!!Error, calcAllChannelsRatio() --> %o\", err);\n                reject(err);\n              });\n          }\n          else {\n            if (enableLogs) console.log(\"!!!Warning, calcAllChannelsRatio() --> User not activated\");\n            reject(\"User not activated\");\n          }\n        })\n        .catch(err => {\n          console.log(\"!!!Error, calcAllChannelsRatio() --> %o\", err);\n          reject(err);\n        });\n    })\n  },\n  // Get Pool Funds\n  getPoolFunds: async(contract) => {\n    const enableLogs = 0;\n\n    return new Promise ((resolve, reject) => {\n      contract.poolFunds()\n        .then(response => {\n          if (enableLogs) console.log(\"getPoolFunds() --> %o\", response);\n          resolve(response);\n        })\n        .catch(err => {\n          console.log(\"!!!Error, getPoolFunds() --> %o\", err);\n          reject(err);\n        });\n    })\n  },\n  // Helper Functions\n  // To format Big Number\n  formatBigNumberToMetric: (bignumber, convertToCurrency) => {\n    try {\n      if (convertToCurrency) {\n        bignumber = bignumber.div(100000000000000);\n        bignumber = bignumber.div(10000);\n      }\n      bignumber = bignumber.toNumber();\n      return EPNSCoreHelper.metricFormatter(bignumber, 2);\n    }\n    catch (e) {\n      console.log(e);\n      return \"---\";\n    }\n  },\n  // Metric Formatter, thanks: https://stackoverflow.com/questions/9461621/format-a-number-as-2-5k-if-a-thousand-or-more-otherwise-900\n  metricFormatter: (num, digits) => {\n    var si = [\n      { value: 1, symbol: \"\" },\n      { value: 1E3, symbol: \"k\" },\n      { value: 1E6, symbol: \"M\" },\n      { value: 1E9, symbol: \"G\" },\n      { value: 1E12, symbol: \"T\" },\n      { value: 1E15, symbol: \"P\" },\n      { value: 1E18, symbol: \"E\" }\n    ];\n    var rx = /\\.0+$|(\\.[0-9]*[1-9])0+$/;\n    var i;\n    for (i = si.length - 1; i > 0; i--) {\n      if (num >= si[i].value) {\n        break;\n      }\n    }\n    return (num / si[i].value).toFixed(digits).replace(rx, \"$1\") + si[i].symbol;\n  },\n\n}\n\nexport default EPNSCoreHelper;\n","import React from \"react\";\nimport styled, { css } from 'styled-components';\n\nimport { useWeb3React } from '@web3-react/core'\nimport { addresses, abis } from \"@project/contracts\";\nimport EPNSCoreHelper from 'helpers/EPNSCoreHelper';\nimport { ethers } from \"ethers\";\nimport { BigNumber, bigNumberify, formatEther } from 'ethers/utils'\n\n// Create Header\nfunction Feedbox({ epnsReadProvider }) {\n  const { account, library } = useWeb3React();\n\n  const [userInterestInfo, setUserInterestInfo] = React.useState(null);\n\n  React.useEffect(() => {\n\n    if (!!account && !!library) {\n      initUserInterest();\n    }\n\n  }, [account, library]);\n\n  // Create Interest Calculation\n  const attachInterestCalculation = () => {\n    library.on('block', (blockNumber) => {\n      calculateUserInterest(blockNumber);\n    });\n  }\n\n  const initUserInterest = () => {\n    library.getBlockNumber().then((blockNumber) => {\n      calculateUserInterest(blockNumber);\n\n      attachInterestCalculation();\n    });\n  }\n\n  const calculateUserInterest = async (blockNumber) => {\n    // get all details\n    const contractInstance = new ethers.Contract(addresses.epnscore, abis.epnscore, library);\n\n    const divisor = 10000000;\n    const ratio = await EPNSCoreHelper.getFairShareOfUserAtBlock(account, blockNumber, contractInstance);\n    const poolFunds = await EPNSCoreHelper.getPoolFunds(contractInstance);\n    const userInfo = await EPNSCoreHelper.getUserInfo(account, contractInstance);\n    const interestClaimed = userInfo.interestClaimed;\n\n    const adaiERC20 = new ethers.Contract(addresses.aDai, abis.erc20, library);\n    const availableFunds = await adaiERC20.balanceOf(addresses.epnscore);\n\n    const totalProfit = availableFunds.sub(poolFunds);\n    const userProfit = (ratio.mul(totalProfit)).div(divisor);\n\n    // console.log(ratio.toNumber() / divisor);\n    // console.log(formatEther(poolFunds));\n    // console.log(formatEther(availableFunds));\n    // console.log(formatEther(totalProfit));\n    // console.log(formatEther(userProfit));\n    // console.log(formatEther(interestClaimed));\n\n    const obj = {\n      block: blockNumber,\n      pool: Number(formatEther(poolFunds)).toFixed(8),\n      available: Number(formatEther(availableFunds)).toFixed(8),\n      profit: Number(formatEther(totalProfit)).toFixed(8),\n      ratio: ((ratio.toNumber() / divisor) * 100).toFixed(8),\n      userProfit: Number(formatEther(userProfit)).toFixed(8),\n      interestClaimed: interestClaimed ? Number(formatEther(interestClaimed)).toFixed(8) + \" DAI\" : \"User Not Registerd / No Earnings\"\n    }\n\n    setUserInterestInfo(obj);\n\n  }\n\n  // Render\n  return (\n    <Container>\n      {userInterestInfo &&\n        <InterestInfo>\n          <InterestRow>\n            <Msg theme=\"block\">Block Number: {userInterestInfo.block}</Msg>\n          </InterestRow>\n          <InterestRow>\n            <Title>Interest Pool:</Title>\n            <Msg theme=\"primary\">{userInterestInfo.pool} DAI</Msg>\n          </InterestRow>\n          <InterestRow>\n            <Title>Pool + Interest Generated:</Title>\n            <Msg theme=\"primary\">{userInterestInfo.available} DAI</Msg>\n          </InterestRow>\n          <InterestRow>\n            <Title>Entire Pool Profit:</Title>\n            <Msg theme=\"primary\">{userInterestInfo.profit} DAI</Msg>\n          </InterestRow>\n          { userInterestInfo.ratio !=0 &&\n            <>\n              <InterestRow>\n                <Title>User Fair Share Percentage:</Title>\n                <Msg theme=\"secondary\">{userInterestInfo.ratio}%</Msg>\n              </InterestRow>\n              <InterestRow>\n                <Title>User Profit:</Title>\n                <Msg theme=\"secondary\">{userInterestInfo.userProfit} DAI</Msg>\n              </InterestRow>\n            </>\n          }\n          <InterestRow>\n            <Title>Interest Claimed:</Title>\n            <Msg theme=\"third\">{userInterestInfo.interestClaimed}</Msg>\n          </InterestRow>\n        </InterestInfo>\n      }\n      {!userInterestInfo &&\n      <>\n        Loading Interest Stats...\n      </>\n      }\n    </Container>\n  );\n}\n\n// css styles\nconst Container = styled.div`\n  padding: 20px;\n  font-size: 16px;\n  display: flex;\n  font-weight: 200;\n  align-content: center;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  min-height: 40vh;\n`\n\nconst InterestInfo = styled.div`\n  border: 1px solid #ddd;\n  padding: 15px;\n  border-radius: 10px;\n`\n\nconst InterestRow = styled.div`\n  margin: 5px;\n  padding: 5px;\n  border-bottom: 1px solid #eee;\n  font-weight: 400;\n  font-size: 14px;\n  display: flex;\n  justify-content: space-between;\n`\n\nconst Title = styled.span`\n  font-weight: 600;\n`\n\nconst Msg = styled.span`\n  padding: 2px 10px;\n  margin: 0px 10px;\n  font-size: 12px;\n  border-radius: 10px;\n  color: #000;\n\n  ${props => props.theme === 'block' && css`\n    background: #e20880;\n    color: #FFF;\n    font-size: 14px;\n    margin: 10px 0px;\n    font-weight: 600;\n  `};\n\n  ${props => props.theme === 'primary' && css`\n    background: #e2088011;\n  `};\n\n  ${props => props.theme === 'secondary' && css`\n    background: #35c5f311;\n  `};\n\n  ${props => props.theme === 'third' && css`\n    background: #674c9f11;\n  `};\n`\n\n\n// Export Default\nexport default Feedbox;\n","import React from \"react\";\nimport styled, { css } from 'styled-components';\nimport { AnimateOnChange } from 'react-animation';\n\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\n\n// Create Header\nfunction DisplayNotice({ title, theme }) {\n  React.useEffect(() => {\n\n  }, [title, theme]);\n\n  // to create blockies\n\n  return (\n    <Container>\n      <AnimateOnChange\n        animationIn=\"fadeIn\"\n        animationOut=\"fadeOut\"\n        durationOut={200}\n      >\n        <Notice theme={theme}>{title}</Notice>\n      </AnimateOnChange>\n    </Container>\n  );\n}\n\n// css styles\nconst Container = styled.div`\n\n`\n\nconst Notice = styled.span`\n  border: 0;\n  outline: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 15px;\n  margin: 10px;\n  color: #fff;\n  border-radius: 20px;\n  font-size: 14px;\n  font-weight: 400;\n\n  ${props => props.theme === 'primary' && css`\n    background: #e20880;\n  `};\n\n  ${props => props.theme === 'secondary' && css`\n    background: #35c5f3;\n  `};\n\n  ${props => props.theme === 'third' && css`\n    background: #674c9f;\n  `};\n`\n\n// Export Default\nexport default DisplayNotice;\n","const size = {\n  mobileS: '320px',\n  mobileM: '375px',\n  mobileL: '425px',\n  tablet: '768px',\n  laptop: '1024px',\n  laptopL: '1440px',\n  desktop: '2560px'\n}\n\nexport const Device = {\n  mobileS: `(max-width: ${size.mobileS})`,\n  mobileM: `(max-width: ${size.mobileM})`,\n  mobileL: `(max-width: ${size.mobileL})`,\n  tablet: `(max-width: ${size.tablet})`,\n  laptop: `(max-width: ${size.laptop})`,\n  laptopL: `(max-width: ${size.laptopL})`,\n  desktop: `(max-width: ${size.desktop})`,\n  desktopL: `(max-width: ${size.desktop})`\n};\n","import EPNSCoreHelper from 'helpers/EPNSCoreHelper';\nimport { ethers } from \"ethers\";\nimport { bigNumber, bigNumberify } from 'ethers/utils'\n\nimport { addresses, abis } from \"@project/contracts\";\n\n// STATIC SINGLETON\nexport const ChannelEvents = {\n    ADD_CHANNEL_ANY: \"AddChannelAny\",\n    ADD_CHANNEL_SELF: \"AddChannelSelf\",\n    UPDATE_CHANNEL_ANY: \"UpdateChannelAny\",\n    UPDATE_CHANNEL_SELF: \"UpdateChannelSelf\",\n    SUBSCRIBER_ANY_CHANNEL: \"SubscriberAnyChannel\",\n    SUBSCRIBER_SELF_CHANNEL: \"SubscriberSelfChannel\",\n    UNSUBSCRIBER_ANY_CHANNEL: \"UnsubscriberAnyChannel\",\n    UNSUBSCRIBER_SELF_CHANNEL: \"UnsubscriberSelfChannel\",\n}\n\nexport default class ChannelsDataStore {\n    static instance = ChannelsDataStore.instance || new ChannelsDataStore();\n\n    state = {\n      channelsCount: -1,\n      channelsMeta: {},\n      channelsJson: {},\n\n      callbacks: [],\n\n      account: null,\n      epnsReadProvider: null,\n    }\n\n    // init\n    init = (account, epnsReadProvider) => {\n      // set account\n      this.state.account = account;\n\n      // First attach listeners then overwrite the old one if any\n      this.resetChannelsListeners();\n      this.state.epnsReadProvider = epnsReadProvider;\n      this.initChannelsListenersAsync();\n\n      // next get store channels count\n      this.getChannelsCountAsync();\n    }\n\n    // RESET LISTENERS\n    resetChannelsListeners = () => {\n      // only proceed if a read provider is attached\n      if (this.state.epnsReadProvider) {\n        this.state.epnsReadProvider.removeAllListeners(\"AddChannel\");\n        this.state.epnsReadProvider.removeAllListeners(\"UpdateChannel\");\n        this.state.epnsReadProvider.removeAllListeners(\"Subscribe\");\n        this.state.epnsReadProvider.removeAllListeners(\"Unsubscribe\");\n      }\n    }\n\n    // init LISTENERS\n    initChannelsListenersAsync = async () => {\n      // Add Listeners\n      await this.listenForAddChannelAnyAsync();\n      await this.listenForAddChannelSelfAsync();\n\n      await this.listenForUpdateChannelAnyAsync();\n      await this.listenForUpdateChannelSelfAsync();\n\n      await this.listenForSubscribeAnyAsync();\n      await this.listenForSubscribeSelfAsync();\n      await this.listenForUnsubscribeAnyAsync();\n      await this.listenForUnsubscribeSelfAsync();\n    }\n\n    // 1. Add Any Channel Listeners\n    listenForAddChannelAnyAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.AddChannel(null, null);\n\n      contract.on(filter, async (channel, ipfs) => {\n        // Do own stuff\n        await this.incrementChannelsCountAsync(1);\n\n        // then perform callbacks\n        if (this.state.callbacks[ChannelEvents.ADD_CHANNEL_ANY]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[ChannelEvents.ADD_CHANNEL_ANY])) {\n            if (callback) { callback(channel, ipfs); }\n          }\n        }\n      });\n    }\n\n    // 2. Add Self Channel Listener\n    listenForAddChannelSelfAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.AddChannel(this.state.account, null);\n\n      contract.on(filter, async (channel, ipfs) => {\n        // Do own stuff\n        // Nothing to do, just do callback\n\n        // then perform callbacks\n        if (this.state.callbacks[ChannelEvents.ADD_CHANNEL_SELF]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[ChannelEvents.ADD_CHANNEL_SELF])) {\n            if (callback) { callback(channel, ipfs); }\n          }\n        }\n      });\n    }\n\n    // 3. Update Any Channel Listener\n    listenForUpdateChannelAnyAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.UpdateChannel(null, null);\n\n      contract.on(filter, async (channel, ipfs) => {\n        // then perform callbacks\n        if (this.state.callbacks[ChannelEvents.UPDATE_CHANNEL_ANY]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[ChannelEvents.UPDATE_CHANNEL_ANY])) {\n            if (callback) { callback(channel, ipfs); }\n          }\n        }\n      });\n    }\n\n    // 4. Update Self Channel Listener\n    listenForUpdateChannelSelfAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.UpdateChannel(this.state.account, null);\n\n      contract.on(filter, async (channel, ipfs) => {\n        // then perform callbacks\n        if (this.state.callbacks[ChannelEvents.UPDATE_CHANNEL_SELF]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[ChannelEvents.UPDATE_CHANNEL_SELF])) {\n            if (callback) { callback(channel, ipfs); }\n          }\n        }\n      });\n    }\n\n    // 5. Subscriber Any\n    listenForSubscribeAnyAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.Subscribe(null, null);\n\n      contract.on(filter, async (channel, user) => {\n        // Do own stuff\n        if (this.state.channelsMeta[channel]) {\n          const channelID = this.state.channelsMeta[channel];\n          let count = this.state.channelsMeta[channelID].memberCount.toNumber();\n          count = count + 1;\n          this.state.channelsMeta[channelID].memberCount = bigNumberify(count);\n        }\n\n        // then perform callbacks\n        if (this.state.callbacks[ChannelEvents.SUBSCRIBER_ANY_CHANNEL]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[ChannelEvents.SUBSCRIBER_ANY_CHANNEL])) {\n            if (callback) { callback(channel, user); }\n          }\n        }\n      });\n    }\n\n    // 6. Subscriber Self\n    listenForSubscribeSelfAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.Subscribe(this.state.account, null);\n\n      contract.on(filter, async (channel, user) => {\n        // then perform callbacks\n        if (this.state.callbacks[ChannelEvents.SUBSCRIBER_SELF_CHANNEL]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[ChannelEvents.SUBSCRIBER_SELF_CHANNEL])) {\n            if (callback) { callback(channel, user); }\n          }\n        }\n      });\n    }\n\n    // 7. Unsubscribe Any\n    listenForUnsubscribeAnyAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.Unsubscribe(null, null);\n\n      contract.on(filter, async (channel, user) => {\n        // Do own stuff\n        if (this.state.channelsMeta[channel]) {\n          const channelID = this.state.channelsMeta[channel];\n          let count = this.state.channelsMeta[channelID].memberCount.toNumber();\n          count = count - 1;\n          this.state.channelsMeta[channelID].memberCount = bigNumberify(count);\n        }\n\n        // then perform callbacks\n        if (this.state.callbacks[ChannelEvents.UNSUBSCRIBER_ANY_CHANNEL]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[ChannelEvents.UNSUBSCRIBER_ANY_CHANNEL])) {\n            if (callback) { callback(channel, user); }\n          }\n        }\n      });\n    }\n\n    // 8. Unsubscribe Self\n    listenForUnsubscribeSelfAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.Unsubscribe(this.state.account, null);\n\n      contract.on(filter, async (channel, user) => {\n        // then perform callbacks\n        if (this.state.callbacks[ChannelEvents.UNSUBSCRIBER_SELF_CHANNEL]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[ChannelEvents.UNSUBSCRIBER_SELF_CHANNEL])) {\n            if (callback) { callback(channel, user); }\n          }\n        }\n      });\n    }\n\n    // FOR CALLBACKS\n    addCallbacks = (callbackType, callbackID, callback) => {\n      // first check if callback already exists\n      if (!this.state.callbacks[callbackType]) {\n        this.state.callbacks[callbackType] = {};\n      }\n\n      if (!this.state.callbacks[callbackType][callbackID]) {\n        this.state.callbacks[callbackType][callbackID] = callback;\n      }\n    }\n\n    removeCallbacks = (callbackType, callbackID) => {\n      // first check if callback already exists\n      if (this.state.callbacks[callbackType][callbackID]) {\n        this.state.callbacks[callbackType][callbackID] = null;\n      }\n    }\n\n    // CHANNELS COUNT\n    getChannelsCountAsync = async () => {\n      const enableLogs = 0;\n\n      return new Promise (async (resolve, reject) => {\n        if (this.state.channelsCount == -1) {\n          // Count not set, get and set it first\n          const count = EPNSCoreHelper.getTotalNumberOfChannels(this.state.epnsReadProvider)\n            .then(response => {\n              this.state.channelsCount = response;\n\n              if (enableLogs) console.log(\"getChannelsCountAsync() --> %o\", response);\n              resolve(this.state.channelsCount)\n            })\n            .catch(err => {\n              console.log(\"!!!Error, getChannelsCountAsync() --> %o\", err);\n              reject(err);\n            });\n        }\n        else {\n          resolve(this.state.channelsCount);\n        }\n      });\n    }\n\n    incrementChannelsCountAsync = async (incrementCount) => {\n      return new Promise ((resolve, reject) => {\n        this.getChannelsCountAsync()\n          .then(response => {\n            this.state.channelsCount = response + incrementCount;\n            console.log(\"incrementChannelsCountAsync() --> %d\", this.state.channelsCount);\n            resolve(this.state.channelsCount)\n          })\n          .catch(err => { console.log(\"!!!Error, incrementChannelsCountAsync() --> %o\", err); reject(err); });\n      });\n\n    }\n\n    // CHANNELS META FUNCTIONS\n    // To get channels meta\n    getChannelsMetaAsync = async (atIndex, numChannels) => {\n      return new Promise (async (resolve, reject) => {\n        // get total number of channels\n        const channelsCount = await this.getChannelsCountAsync();\n\n        if (atIndex == -1) {\n          atIndex = channelsCount - 1;\n        }\n\n        if (numChannels == -1) {\n          numChannels = channelsCount;\n        }\n\n        // Get channels\n        let channelsMeta = [];\n        let channelsDummy = [];\n\n        // prefil and then refil\n        let count = 0;\n        for (let i = 0; i < numChannels; i++) {\n          const assignedChannelID = atIndex - i;\n          channelsDummy[count] = assignedChannelID;\n          count = count + 1;\n        }\n\n        const promises = channelsDummy.map(async (channelID) => {\n          // Match the cache\n          await this.getChannelMetaAsync(channelID)\n            .then(response => {\n              const mappings = { ...response };\n              mappings.id = channelID;\n\n              channelsMeta = [mappings, ...channelsMeta];\n            })\n            .catch(err => console.log(\"!!!Error (but skipping), getChannelMetaAsync() --> %o\", err))\n        });\n\n        // wait until all promises are resolved\n        await Promise.all(promises);\n\n        channelsMeta.sort((a, b) => {\n          if (a.id < b.id) return -1;\n          if (a.id > b.id) return 1;\n          return 0;\n        });\n\n        // return channels meta\n        console.log(\"getChannelsMetaAsync(From %d to %d) --> %o\", atIndex - numChannels + 1, atIndex, channelsMeta);\n        resolve(channelsMeta);\n      });\n    }\n\n    // To get a single channel meta via id\n    getChannelMetaAsync = async (channelID) => {\n      return new Promise (async (resolve, reject) => {\n        if (this.state.channelsMeta[channelID]) {\n          console.log(\"getChannelMetaAsync() [CACHED] --> %o\", this.state.channelsMeta[channelID]);\n          resolve(this.state.channelsMeta[channelID]);\n        }\n        else {\n          let channelAddress;\n\n          await EPNSCoreHelper.getChannelAddressFromID(channelID, this.state.epnsReadProvider)\n            .then(async response => {\n              channelAddress = response;\n              await this.getChannelMetaViaAddressAsync(channelAddress)\n                .then(response => {\n                  // update the channel cache before resolving\n                  this.state.channelsMeta[channelID] = response;\n                  this.state.channelsMeta[channelAddress] = channelID;\n\n                  // resolve\n                  console.log(\"getChannelMetaAsync() [Address: %s] --> %o\", channelAddress, response);\n                  resolve(response);\n                })\n            })\n            .catch(err => { console.log(\"!!!Error, getChannelMetaAsync() --> %o\", err); reject(err); })\n        }\n      });\n    }\n\n    // To get a single channel meta via address\n    getChannelMetaViaAddressAsync = async (channelAddress) => {\n      return new Promise (async (resolve, reject) => {\n        if (this.state.channelsMeta[channelAddress]) {\n          const channelID = this.state.channelsMeta[channelAddress];\n\n          console.log(\"getChannelMetaViaAddressAsync() [CACHED] --> %o\", this.state.channelsMeta[channelID]);\n          resolve(this.state.channelsMeta[channelID]);\n        }\n        else {\n          // Can't cache this :(, no way to know channel id\n          await EPNSCoreHelper.getChannelInfo(channelAddress, this.state.epnsReadProvider)\n            .then(response => {\n              // resolve\n              console.log(\"getChannelMetaViaAddressAsync() [Address: %s] --> %o\", channelAddress, response);\n              resolve(response);\n            })\n            .catch(err => { console.log(\"!!!Error, getChannelMetaViaAddressAsync() --> %o\", err); reject(err); })\n        }\n      });\n    }\n\n    // CHANNELS INFO FUNCTIONS\n    // To get a single channel meta via id\n    getChannelJsonAsync = async (channelAddress) => {\n      return new Promise (async (resolve, reject) => {\n        if (this.state.channelsJson[channelAddress]) {\n          console.log(\"getChannelJsonAsync() [CACHED] --> %o\", this.state.channelsJson[channelAddress]);\n          resolve(this.state.channelsJson[channelAddress]);\n        }\n        else {\n          await EPNSCoreHelper.getChannelJsonFromChannelAddress(channelAddress, this.state.epnsReadProvider)\n            .then(response => {\n              // First set the cache\n              this.state.channelsJson[channelAddress] = response;\n\n              // resolve\n              console.log(\"getChannelJsonAsync() [Address: %s] --> %o\", channelAddress, response);\n              resolve(response);\n            })\n            .catch(err => { console.log(\"!!!Error, getChannelJsonAsync() --> %o\", err); reject(err); })\n        }\n      });\n    }\n\n}\n","import EPNSCoreHelper from 'helpers/EPNSCoreHelper';\nimport { ethers } from \"ethers\";\nimport { bigNumber } from 'ethers/utils'\n\nimport { addresses, abis } from \"@project/contracts\";\n\n// STATIC SINGLETON\nexport const UserEvents = {\n    SUBSCRIBED: \"Subscribed\",\n    UNSUBSCRIBED: \"Unsubscribed\",\n    PUBLIC_KEY_BROADCASTED: \"PublicKeyBroadcasted\",\n    CREATED_CHANNEL: \"CreatedChannel\",\n    DEACTIVATE_CHANNEL: \"DeactivateChannel\",\n}\n\nexport default class UsersDataStore {\n    static instance = UsersDataStore.instance || new UsersDataStore();\n\n    state = {\n      usersCount: -1,\n      userMeta: null,\n      ownerMeta: null,\n\n      callbacks: [],\n\n      account: null,\n      epnsReadProvider: null,\n    }\n\n    // init\n    init = (account, epnsReadProvider) => {\n      // set account\n      this.state.account = account;\n\n      // First attach listeners then overwrite the old one if any\n      this.resetUsersListeners();\n      this.state.epnsReadProvider = epnsReadProvider;\n      this.initUsersListenersAsync();\n\n      // next get store user count & user meta\n      this.getOwnerMetaAsync();\n      this.getUsersCountAsync();\n      this.getUserMetaAsync();\n    }\n\n    // RESET LISTENERS\n    resetUsersListeners = () => {\n      // only proceed if a read provider is attached\n      if (this.state.epnsReadProvider) {\n        this.state.epnsReadProvider.removeAllListeners(\"Subscribe\");\n        this.state.epnsReadProvider.removeAllListeners(\"Unsubscribe\");\n        this.state.epnsReadProvider.removeAllListeners(\"PublicKeyRegistered\");\n        this.state.epnsReadProvider.removeAllListeners(\"AddChannel\");\n        this.state.epnsReadProvider.removeAllListeners(\"DeactivateChannel\");\n      }\n\n      // reset user meta as well\n      this.state.userMeta = null;\n    }\n\n    // init LISTENERS\n    initUsersListenersAsync = async () => {\n      // Add Listeners\n      await this.listenForSubscribedAsync();\n      await this.listenForUnsubscribedAsync();\n\n      if (!this.state.userMeta || (this.state.userMeta && !this.state.userMeta.publicKeyRegistered)) {\n        await this.listenForPublicKeyBroadcastAsync();\n      }\n    }\n\n    // 1. Listen for Subscribe Async\n    listenForSubscribedAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.Subscribe(null, this.state.account);\n\n      if (this.state.userMeta) {\n        this.state.userMeta.subscribedCount = this.state.userMeta.subscribedCount.add(1);\n      }\n\n      contract.on(filter, async (channel, user) => {\n        // then perform callbacks\n        if (this.state.callbacks[UserEvents.SUBSCRIBED]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[UserEvents.SUBSCRIBED])) {\n            if (callback) { callback(channel, user); }\n          }\n        }\n      });\n    }\n\n    // 2. Listen for Unsubscribe Async\n    listenForUnsubscribedAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.Unsubscribe(null, this.state.account);\n\n      if (this.state.userMeta) {\n        this.state.userMeta.subscribedCount = this.state.userMeta.subscribedCount.sub(1);\n      }\n\n      contract.on(filter, async (channel, user) => {\n        // then perform callbacks\n        if (this.state.callbacks[UserEvents.UNSUBSCRIBED]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[UserEvents.UNSUBSCRIBED])) {\n            if (callback) { callback(channel, user); }\n          }\n        }\n      });\n    }\n\n    // 3. Listen For Public Key Broadcast\n    listenForPublicKeyBroadcastAsync = async () => {\n      const contract = this.state.epnsReadProvider;\n      let filter = contract.filters.PublicKeyRegistered(this.state.account, null);\n\n      if (this.state.userMeta) {\n        this.state.userMeta.publicKeyRegistered = true;\n      }\n\n      contract.once(filter, async (channel, user) => {\n        // then perform callbacks\n        if (this.state.callbacks[UserEvents.UNSUBSCRIBED]) {\n          for (let [callbackID, callback] of Object.entries(this.state.callbacks[UserEvents.UNSUBSCRIBED])) {\n            if (callback) { callback(channel, user); }\n          }\n        }\n      });\n    }\n\n    // FOR CALLBACKS\n    addCallbacks = (callbackType, callbackID, callback) => {\n      // first check if callback already exists\n      if (!this.state.callbacks[callbackType]) {\n        this.state.callbacks[callbackType] = {};\n      }\n\n      if (!this.state.callbacks[callbackType][callbackID]) {\n        this.state.callbacks[callbackType][callbackID] = callback;\n      }\n    }\n\n    removeCallbacks = (callbackType, callbackID) => {\n      // first check if callback already exists\n      if (this.state.callbacks[callbackType][callbackID]) {\n        this.state.callbacks[callbackType][callbackID] = null;\n      }\n    }\n\n    // GET OWNER META\n    getOwnerMetaAsync = async () => {\n      const enableLogs = 0;\n\n      return new Promise ((resolve, reject) => {\n        if (this.state.ownerMeta) {\n          if (enableLogs) console.log(\"getOwnerMetaAsync() [CACHED] --> %o\", this.state.ownerMeta);\n          resolve(this.state.ownerMeta);\n        }\n        else {\n          EPNSCoreHelper.getOwnerInfo(this.state.epnsReadProvider)\n            .then(response => {\n              this.state.ownerMeta = response;\n\n              if (enableLogs) console.log(\"getOwnerMetaAsync() --> %o\", response);\n              resolve(this.state.ownerMeta);\n            })\n            .catch(err => {\n              console.log(\"!!!Error, getOwnerMetaAsync() --> %o\", err);\n              reject(err);\n            });\n        }\n      });\n    }\n\n    // USERS COUNT\n    getUsersCountAsync = async () => {\n      return new Promise (async (resolve, reject) => {\n        if (this.state.channelsCount == -1) {\n          // Count not set, get and set it first\n          const count = EPNSCoreHelper.getTotalNumberOfUsers(this.state.epnsReadProvider)\n            .then(response => {\n              this.state.usersCount = response;\n              console.log(\"getUsersCountAsync() --> %o\", response);\n              resolve(this.state.usersCount)\n            })\n            .catch(err => { console.log(\"!!!Error, getUsersCountAsync() --> %o\", err); reject(err); });\n        }\n        else {\n          resolve(this.state.usersCount);\n        }\n      });\n    }\n\n    incrementUsersCountAsync = async (incrementCount) => {\n      return new Promise ((resolve, reject) => {\n        this.getUsersCountAsync()\n          .then(response => {\n            this.state.usersCount = response + incrementCount;\n            console.log(\"incrementChannelsCountAsync() --> %d\", this.state.usersCount);\n            resolve(this.state.usersCount);\n          })\n          .catch(err => { console.log(\"!!!Error, getUsersCountAsync() --> %o\", err); reject(err); });\n      });\n    }\n\n    // GET USER META\n    getUserMetaAsync = async () => {\n      const enableLogs = 0;\n\n      return new Promise ((resolve, reject) => {\n        if (this.state.userMeta) {\n          if (enableLogs) console.log(\"getUserMetaAsync() [CACHED] --> %o\", this.state.userMeta);\n          resolve(this.state.userMeta);\n        }\n        else {\n          EPNSCoreHelper.getUserInfo(this.state.account, this.state.epnsReadProvider)\n            .then(response => {\n              this.state.userMeta = response;\n\n              if (enableLogs) console.log(\"getUserMetaAsync() --> %o\", this.state.userMeta);\n              resolve(this.state.userMeta);\n            })\n            .catch(err => {\n              console.log(\"!!!Error, getUserMetaAsync() --> %o\", err);\n              reject(err);\n          });\n        }\n      });\n    }\n\n}\n","import React from \"react\";\nimport styled, { css } from 'styled-components';\nimport { Device } from 'assets/Device';\n\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport Loader from 'react-loader-spinner';\n\nimport Skeleton from '@yisheng90/react-loading';\nimport { IoMdPeople } from 'react-icons/io';\nimport { GiTwoCoins } from 'react-icons/gi';\n\nimport { useWeb3React } from '@web3-react/core';\nimport { ethers } from \"ethers\";\nimport { keccak256, arrayify, hashMessage, recoverPublicKey } from 'ethers/utils';\n\nimport EPNSCoreHelper from 'helpers/EPNSCoreHelper';\nimport ChannelsDataStore, { ChannelEvents } from \"singletons/ChannelsDataStore\";\nimport UsersDataStore, { UserEvents } from \"singletons/UsersDataStore\";\n\n// Create Header\nfunction ViewChannelItem({ channelObject, isOwner, epnsReadProvider, epnsWriteProvide }) {\n  const { account, library } = useWeb3React();\n\n  const [ channelJson, setChannelJson ] = React.useState({});\n  const [ subscribed, setSubscribed ] = React.useState(false);\n  const [ loading, setLoading ] = React.useState(true);\n\n  const [ txInProgress, setTxInProgress ] = React.useState(false);\n\n\n  React.useEffect(() => {\n    fetchChannelJson();\n    registerCallbacks();\n  }, [account, channelObject]);\n\n  // to fetch channels\n  const fetchChannelJson = async () => {\n    const channelJson = await ChannelsDataStore.instance.getChannelJsonAsync(channelObject.addr);\n    const subs = await EPNSCoreHelper.getSubscribedStatus(account, channelObject.addr, epnsReadProvider);\n    setSubscribed(subs);\n\n    setChannelJson(channelJson);\n    setLoading(false);\n  }\n\n  // to register callbacks\n  const registerCallbacks = () => {\n    UsersDataStore.instance.addCallbacks(\n      UserEvents.SUBSCRIBED,\n      \"FromViewChannelItem\",\n      () => {\n        setSubscribed(true);\n        channelObject.memberCount = channelObject.memberCount.add(1);\n      }\n    );\n\n    UsersDataStore.instance.addCallbacks(\n      UserEvents.UNSUBSCRIBED,\n      \"FromViewChannelItem\",\n      () => {\n        setSubscribed(false);\n        channelObject.memberCount = channelObject.memberCount.sub(1);\n      }\n    );\n\n    ChannelsDataStore.instance.addCallbacks(\n      ChannelEvents.SUBSCRIBER_ANY_CHANNEL,\n      \"FromViewChannelItem\",\n      (channel, user) => {\n        if (channel === channelObject.addr) {\n          channelObject.memberCount = channelObject.memberCount.add(1);\n        }\n      }\n    );\n\n    ChannelsDataStore.instance.addCallbacks(\n      ChannelEvents.UNSUBSCRIBER_ANY_CHANNEL,\n      \"FromViewChannelItem\",\n      (channel, user) => {\n        if (channel === channelObject.addr) {\n          channelObject.memberCount = channelObject.memberCount.sub(1);\n        }\n      }\n    );\n  }\n\n  // to subscribe\n  const subscribe = async () => {\n    // Check if public key is broadcasted or not\n    const userMeta = await UsersDataStore.instance.getUserMetaAsync();\n    if (!userMeta.publicKeyRegistered) {\n      const msg = \"Sign to enable Secrets! (Encrypted Messages)\\n Read more: https://epns.io/secret-messages\";\n\n      // Sign a message and extract public key\n      library\n        .getSigner(account)\n        .signMessage(msg)\n        .then(async signature => {\n          const publicKey = recoverPublicKey(arrayify(hashMessage(msg)), signature);\n          const formattedPubKey = publicKey.slice(0, 2) + publicKey.slice(4);\n\n          subscribeAction(formattedPubKey);\n        })\n        .catch(error => {\n          // Show toast as well\n          toast.dark('Skipped for now... Encrypted messages will require this!', {\n            position: \"bottom-right\",\n            autoClose: 5000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            progress: undefined,\n          });\n\n          subscribeAction(false);\n        })\n    }\n    else {\n      subscribeAction(false);\n    }\n  }\n\n  const subscribeAction = async (withPublicKey) => {\n    setTxInProgress(true);\n\n    let sendWithTxPromise;\n\n    if (withPublicKey) {\n      sendWithTxPromise = epnsWriteProvide.subscribeWithPublicKey(channelObject.addr, withPublicKey);\n    }\n    else {\n      sendWithTxPromise = epnsWriteProvide.subscribe(channelObject.addr);\n    }\n\n    sendWithTxPromise\n      .then(async tx => {\n\n        let txToast = toast.dark(<LoaderToast msg=\"Waiting for Confirmation...\" color=\"#35c5f3\"/>, {\n          position: \"bottom-right\",\n          autoClose: false,\n          hideProgressBar: true,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n\n        try {\n          await library.waitForTransaction(tx.hash);\n\n          toast.update(txToast, {\n            render: \"Transaction Completed!\",\n            type: toast.TYPE.SUCCESS,\n            autoClose: 5000\n          });\n\n          setTxInProgress(false);\n        }\n        catch(e) {\n          toast.update(txToast, {\n            render: \"Transaction Failed! (\" + e.name + \")\",\n            type: toast.TYPE.ERROR,\n            autoClose: 5000\n          });\n\n          setTxInProgress(false);\n        }\n      })\n      .catch(err => {\n        toast.dark('Transaction Cancelled!', {\n          position: \"bottom-right\",\n          type: toast.TYPE.ERROR,\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n\n        setTxInProgress(false);\n      })\n  }\n\n  const unsubscribeAction = async () => {\n    setTxInProgress(true);\n\n    let sendWithTxPromise = epnsWriteProvide.unsubscribe(channelObject.addr);\n\n    sendWithTxPromise\n      .then(async tx => {\n\n        let txToast = toast.dark(<LoaderToast msg=\"Waiting for Confirmation...\" color=\"#35c5f3\"/>, {\n          position: \"bottom-right\",\n          autoClose: false,\n          hideProgressBar: true,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n\n        try {\n          await library.waitForTransaction(tx.hash);\n\n          toast.update(txToast, {\n            render: \"Transaction Completed!\",\n            type: toast.TYPE.SUCCESS,\n            autoClose: 5000\n          });\n\n          setTxInProgress(false);\n        }\n        catch(e) {\n          toast.update(txToast, {\n            render: \"Transaction Failed! (\" + e.name + \")\",\n            type: toast.TYPE.ERROR,\n            autoClose: 5000\n          });\n\n          setTxInProgress(false);\n        }\n      })\n      .catch(err => {\n        toast.dark('Transaction Cancelled!', {\n          position: \"bottom-right\",\n          type: toast.TYPE.ERROR,\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n\n        setTxInProgress(false);\n      })\n  }\n\n  // toast customize\n  const LoaderToast = ({ msg, color }) => (\n    <Toaster>\n      <Loader\n       type=\"Oval\"\n       color={color}\n       height={30}\n       width={30}\n      />\n      <ToasterMsg>{msg}</ToasterMsg>\n    </Toaster>\n  )\n\n  // render\n  return (\n    <Container key={channelObject.addr}>\n      <ChannelLogo>\n        <ChannelLogoOuter>\n          <ChannelLogoInner>\n          {loading &&\n            <Skeleton color=\"#eee\" width=\"100%\" height=\"100%\" />\n          }\n          {!loading &&\n            <ChannelLogoImg src={`${channelJson.icon}`} />\n          }\n          </ChannelLogoInner>\n        </ChannelLogoOuter>\n      </ChannelLogo>\n\n      <ChannelInfo>\n        <ChannelTitle>\n          {loading &&\n            <Skeleton color=\"#eee\" width=\"50%\" height={24} />\n          }\n          {!loading &&\n            <ChannelTitleLink href={channelJson.url} target=\"_blank\" rel=\"nofollow\">{channelJson.name}</ChannelTitleLink>\n          }\n        </ChannelTitle>\n\n        <ChannelDesc>\n          {loading &&\n            <>\n              <SkeletonWrapper atH={5} atW={100}>\n                <Skeleton color=\"#eee\" width=\"100%\" height={5} />\n              </SkeletonWrapper>\n\n              <SkeletonWrapper atH={5} atW={100}>\n                <Skeleton color=\"#eee\" width=\"100%\" height={5} />\n              </SkeletonWrapper>\n\n              <SkeletonWrapper atH={5} atW={100}>\n                <Skeleton color=\"#eee\" width=\"40%\" height={5} />\n              </SkeletonWrapper>\n            </>\n          }\n          {!loading &&\n            <ChannelDescLabel>{channelJson.info}</ChannelDescLabel>\n          }\n        </ChannelDesc>\n\n        <ChannelMeta>\n          {loading &&\n            <>\n              <SkeletonWrapper atH={10} atW={30} marginBottom=\"0\">\n                <Skeleton />\n              </SkeletonWrapper>\n            </>\n          }\n          {!loading &&\n            <>\n              <Subscribers>\n                <IoMdPeople size={20} color=\"#ccc\"/>\n                <SubscribersCount>\n                  {EPNSCoreHelper.formatBigNumberToMetric(channelObject.memberCount)}\n                </SubscribersCount>\n              </Subscribers>\n              <Pool>\n                <GiTwoCoins size={20} color=\"#ccc\"/>\n                <PoolShare>\n                  {EPNSCoreHelper.formatBigNumberToMetric(channelObject.poolContribution, true) + \" DAI\"}\n                </PoolShare>\n              </Pool>\n            </>\n          }\n        </ChannelMeta>\n      </ChannelInfo>\n      {!!account && !!library &&\n        <>\n          <LineBreak />\n          <ChannelActions>\n            {loading &&\n              <SkeletonButton>\n                <Skeleton />\n              </SkeletonButton>\n            }\n            {!loading && !subscribed &&\n              <SubscribeButton onClick={subscribe} disabled={txInProgress}>\n                {txInProgress &&\n                  <ActionLoader>\n                    <Loader\n                     type=\"Oval\"\n                     color=\"#FFF\"\n                     height={16}\n                     width={16}\n                    />\n                  </ActionLoader>\n                }\n                <ActionTitle hideit={txInProgress}>Subscribe</ActionTitle>\n              </SubscribeButton>\n            }\n            {!loading && subscribed &&\n              <>\n              {isOwner &&\n                <OwnerButton disabled>Owner</OwnerButton>\n              }\n              {!isOwner &&\n                <UnsubscribeButton onClick={unsubscribeAction} disabled={txInProgress}>\n                  {txInProgress &&\n                    <ActionLoader>\n                      <Loader\n                       type=\"Oval\"\n                       color=\"#FFF\"\n                       height={16}\n                       width={16}\n                      />\n                    </ActionLoader>\n                  }\n                  <ActionTitle hideit={txInProgress}>Unsubscribe</ActionTitle>\n                </UnsubscribeButton>\n              }\n              </>\n            }\n          </ChannelActions>\n        </>\n      }\n    </Container>\n  );\n}\n\n// css styles\nconst Container = styled.div`\n  flex: 1;\n  display: flex;\n  flex-wrap: wrap;\n\n  background: #fff;\n  border-radius: 10px;\n  border: 1px solid rgb(237, 237, 237);\n\n  margin: 15px 0px;\n  justify-content: center;\n  padding: 10px;\n`\n\nconst SkeletonWrapper = styled.div`\n  overflow: hidden;\n  width: ${props => props.atW + '%' || '100%'};\n  height: ${props => props.atH}px;\n  border-radius: ${props => props.borderRadius || 10}px;\n  margin-bottom: ${props => props.marginBottom || 5}px;\n  margin-right: ${props => props.marginRight || 0}px;\n`\n\nconst ChannelLogo = styled.div`\n  max-width: 100px;\n  min-width: 32px;\n  flex: 1;\n  margin: 5px;\n  padding: 10px;\n  border: 2px solid #fafafa;\n  overflow: hidden;\n  border-radius: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-self: flex-start;\n`\n\nconst ChannelLogoOuter = styled.div`\n  padding-top: 100%;\n  position: relative;\n`\n\nconst ChannelLogoInner = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  border-radius: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst ChannelLogoImg = styled.img`\n  object-fit: contain;\n  width: 100%;\n  border-radius: 20px;\n  overflow: hidden;\n`\n\nconst ChannelInfo = styled.div`\n  flex: 1;\n  margin: 5px 10px;\n  min-width: 120px;\n  flex-grow: 4;\n  flex-direction: column;\n  display: flex;\n`\n\nconst ChannelTitle = styled.div`\n  margin-bottom: 5px;\n`\n\nconst ChannelTitleLink = styled.a`\n  text-decoration: none;\n  font-weight: 600;\n  color: #e20880;\n  font-size: 20px;\n  &:hover {\n    text-decoration: underline;\n    cursor: pointer;\n    pointer: hand;\n  }\n`\n\nconst ChannelDesc = styled.div`\n  flex: 1;\n  display: flex;\n  font-size: 14px;\n  color: rgba(0, 0, 0, 0.75);\n  font-weight: 400;\n  flex-direction: column;\n`\n\nconst ChannelDescLabel = styled.label`\n  flex: 1;\n`\n\nconst ChannelMeta = styled.div`\n  display: flex;\n  flex-direction: row;\n  font-size: 13px;\n`\n\nconst ChannelMetaBox = styled.label`\n  margin: 0px 5px;\n  color: #fff;\n  font-weight: 600;\n  padding: 2px 8px;\n  border-radius: 10px;\n  font-size: 11px;\n`\n\nconst Subscribers = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`\n\nconst SubscribersCount = styled(ChannelMetaBox)`\n  background: #35c4f3;\n`\n\nconst Pool = styled.div`\n  margin: 0px 10px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`\n\nconst PoolShare = styled(ChannelMetaBox)`\n  background: #674c9f;\n`\n\nconst LineBreak = styled.div`\n  display: none;\n  flex-basis: 100%;\n  height: 0;\n\n  @media ${Device.tablet} {\n    display: block;\n  }\n`\n\nconst ChannelActions = styled.div`\n  margin: 5px;\n  flex-grow: 1;\n  max-width: 120px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst ChannelActionButton = styled.button`\n  border: 0;\n  outline: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 15px;\n  margin: 10px;\n  color: #fff;\n  border-radius: 5px;\n  font-size: 14px;\n  font-weight: 400;\n  position: relative;\n  &:hover {\n    opacity: 0.9;\n    cursor: pointer;\n    pointer: hand;\n  }\n  &:active {\n    opacity: 0.75;\n    cursor: pointer;\n    pointer: hand;\n  }\n  ${ props => props.disabled && css`\n    &:hover {\n      opacity: 1;\n      cursor: default;\n      pointer: default;\n    }\n    &:active {\n      opacity: 1;\n      cursor: default;\n      pointer: default;\n    }\n  `}\n`\n\nconst ActionTitle = styled.span`\n  ${ props => props.hideit && css`\n    visibility: hidden;\n  `};\n`\n\nconst ActionLoader = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst SkeletonButton = styled.div`\n  border: 0;\n  outline: 0;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 10px;\n  border-radius: 5px;\n  flex: 1;\n`\n\nconst SubscribeButton = styled(ChannelActionButton)`\n  background: #e20880;\n`\n\nconst UnsubscribeButton = styled(ChannelActionButton)`\n  background: #674c9f;\n`\n\nconst OwnerButton = styled(ChannelActionButton)`\n  background: #35c5f3;\n`\n\nconst Toaster = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin: 0px 10px;\n`\n\nconst ToasterMsg = styled.div`\n  margin: 0px 10px;\n`\n\n// Export Default\nexport default ViewChannelItem;\n","import React from \"react\";\nimport styled, { css } from 'styled-components';\nimport Loader from 'react-loader-spinner'\n\nimport { useWeb3React } from '@web3-react/core'\nimport { addresses, abis } from \"@project/contracts\";\nimport EPNSCoreHelper from 'helpers/EPNSCoreHelper';\nimport { ethers } from \"ethers\";\n\nimport DisplayNotice from \"components/DisplayNotice\";\nimport ViewChannelItem from \"components/ViewChannelItem\";\n\nimport ChannelsDataStore, { ChannelEvents } from \"singletons/ChannelsDataStore\";\nimport UsersDataStore, { UserEvents } from \"singletons/UsersDataStore\";\n\n// Create Header\nfunction ViewChannels({ epnsReadProvider, epnsWriteProvide }) {\n  const { account, library } = useWeb3React();\n\n  const [loading, setLoading] = React.useState(true);\n  const [channels, setChannels] = React.useState([]);\n  const [user, setUser] = React.useState(null);\n  const [owner, setOwner] = React.useState(null);\n\n  React.useEffect(() => {\n    fetchChannels();\n  }, [account]);\n\n  // to fetch channels\n  const fetchChannels = async () => {\n    // get and set user and owner first\n    const userMeta = await UsersDataStore.instance.getUserMetaAsync();\n    setUser(userMeta);\n\n    const ownerAddr = await UsersDataStore.instance.getOwnerMetaAsync();\n    setOwner(ownerAddr);\n\n    // const channelsMeta = await EPNSCoreHelper.getChannelsMetaLatestToOldest(-1, -1, epnsReadProvider);\n    const channelsMeta = await ChannelsDataStore.instance.getChannelsMetaAsync(-1, -1);\n\n    // sort this again, this time with subscriber count\n    // channelsMeta.sort((a, b) => {\n    //   if (a.memberCount.toNumber() < b.memberCount.toNumber()) return -1;\n    //   if (a.memberCount.toNumber() > b.memberCount.toNumber()) return 1;\n    //   return 0;\n    // });\n\n    // Filter out channel\n\n    setChannels(channelsMeta);\n    setLoading(false);\n  }\n\n  return (\n    <Container>\n      {loading &&\n        <ContainerInfo>\n          <Loader\n           type=\"Oval\"\n           color=\"#35c5f3\"\n           height={40}\n           width={40}\n          />\n        </ContainerInfo>\n      }\n\n      {!loading && channels.length == 0 &&\n        <ContainerInfo>\n          <DisplayNotice\n            title=\"That's weird, No Channels in EPNS... world is ending... right?\"\n            theme=\"primary\"\n          />\n        </ContainerInfo>\n      }\n\n      {!loading && channels.length != 0 &&\n        <Items id=\"scrollstyle-secondary\">\n\n          {Object.keys(channels).map(index => {\n            const isOwner = (\n              channels[index].addr === account ||\n              (account === owner && channels[index].addr === \"0x0000000000000000000000000000000000000000\")\n            );\n\n            if (channels[index].addr !== \"0x0000000000000000000000000000000000000000\") {\n              return (\n                <ViewChannelItem\n                  key={channels[index].addr}\n                  channelObject={channels[index]}\n                  isOwner={isOwner}\n                  epnsReadProvider={epnsReadProvider}\n                  epnsWriteProvide={epnsWriteProvide}\n                />\n              );\n            }\n            else if (channels[index].addr === \"0x0000000000000000000000000000000000000000\" && user.channellized) {\n              return (\n                <ViewChannelItem\n                  key={channels[index].addr}\n                  channelObject={channels[index]}\n                  isOwner={isOwner}\n                  epnsReadProvider={epnsReadProvider}\n                  epnsWriteProvide={epnsWriteProvide}\n                />\n              );\n            }\n            else {\n              return null;\n            }\n          })}\n        </Items>\n      }\n    </Container>\n  );\n}\n\n// css styles\nconst Container = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n\n  font-weight: 200;\n  align-content: center;\n  align-items: center;\n  justify-content: center;\n\n  max-height: 80vh;\n`\n\nconst ContainerInfo = styled.div`\n  padding: 20px;\n`\n\nconst Items = styled.div`\n  display: block;\n  align-self: stretch;\n  padding: 10px 20px;\n  overflow-y: scroll;\n  background: #fafafa;\n`\n\n// Export Default\nexport default ViewChannels;\n","import styled, { css } from 'styled-components';\n\nexport const Section = styled.section`\n  display: flex;\n  align-self: stretch;\n  justify-content: center;\n  align-items: ${props => props.align || 'initial'};\n  flex-direction: ${props => props.direction || 'column'};\n  background: ${props => props.theme || 'transparent'};\n  background: ${props => props.gradient || 'undefined'};\n  margin: ${props => props.margin || '0px'};\n  padding: ${props => props.padding || '0px'};\n  overflow: ${props => props.overflow || 'initial'};\n  flex: 1;\n  position: relative;\n`\n\nexport const SectionFS = styled(Section)`\n  min-height: 100vh;\n`\n\nexport const SectionFSHero = styled(Section)`\n  min-height: 100vh;\n  background: rgb(31,23,47);\n  background: linear-gradient(283deg, rgba(31,23,47,1) 0%, rgba(62,9,40,1) 45%, rgba(17,58,72,1) 100%);\n`\n\nexport const SectionHero = styled(Section)`\n  background: rgb(31,23,47);\n  background: linear-gradient(283deg, rgba(31,23,47,1) 0%, rgba(62,9,40,1) 45%, rgba(17,58,72,1) 100%);\n`\n\nexport const Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: ${props => props.padding || \"0px\"};\n  position: relative;\n`\n\nexport const ItemBreak = styled.div`\n  flex-basis: 100%;\n`\n\nexport const Item = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex-wrap: ${props => props.wrap || 'wrap'};\n  position: relative;\n  justify-content: center;\n  background: ${props => props.bg || 'transparent'};\n  flex: ${props => props.flex || '1'};\n  flex-direction: ${props => props.direction || 'column'};\n  align-self: ${props => props.self || 'auto'};\n  align-items: ${props => props.align || 'center'};\n  justify-content: ${props => props.justify || 'center'};\n  padding: ${props => props.padding || \"0px\"};\n  margin: ${props => props.margin || '0px'};\n  min-width: ${props => props.minWidth || 'auto'};\n  max-width: ${props => props.maxWidth || 'initial'};\n  font-size: ${props => props.size || \"inherit\"};\n  text-align: ${props => props.textAlign || \"inherit\"};\n  filter: ${props => props.filter || \"none\"};\n\n  width: ${props => props.width || \"auto\" };\n  height: ${props => props.height || \"auto\" };\n\n  border: ${props => props.border || \"none\"};\n  border-radius: ${props => props.radius || \"0px\"};\n  overflow: ${props => props.overflow || \"inital\"};\n\n  &:hover & {\n    filter: ${props => (props.filterHover ? props.filterHover : (props.hover ? props.hover : \"none\")) || \"none\"};\n  }\n\n  @media (max-width: 768px) {\n    align-items: ${props => (props.tabletAlign ? props.tabletAlign : (props.align ? props.align : \"center\")) || \"center\"};\n    text-align: ${props => (props.tabletTextAlign ? props.tabletTextAlign : (props.textAlign ? props.textAlign : \"inherit\")) || \"inherit\"};\n  }\n\n  ${ItemBreak} {\n    width: 0;\n  }\n`\n\nexport const ItemH = styled(Item)`\n  flex-direction: row;\n  flex: ${props => props.flex || '1'};\n\n  ${ItemBreak} {\n    width: auto;\n    height: 0;\n  }\n`\n\nexport const WaveOuter = styled.div`\n  position: absolute;\n  right: 0;\n  left: 0;\n  bottom: ${props => props.bottom || '-70px'};\n  top: ${props => props.top || 'auto'};\n  transform: ${props => props.transform || 'initial'};\n`;\n\nexport const WaveInner = styled.div`\n  position: absolute;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  transform: ${props => props.transform || 'initial'};\n`;\n\nexport const Arc = styled.div`\n  position: absolute;\n\toverflow: hidden;\n\twidth: 100%;\n\theight: 300px;\n\n  bottom: ${props => props.bottom || 'auto'};\n  top: ${props => props.top || 'auto'};\n\n  &:after {\n    content: '';\n    position: absolute;\n  \twidth: 300%;\n  \theight: 300%;\n  \ttop: -25%;\n  \tleft: -100%;\n\n\n    ${ props => props.arcRGB && css`\n      \tbackground: radial-gradient(ellipse at center, ${props.arcRGB}00 0%, ${props.arcRGB}00 50%, ${props.arcRGB}ff 50%, ${props.arcRGB}ff 100%);\n    `};\n  }\n`\n\nexport const H1 = styled.h1`\n  @media (max-width: 480px) {\n    font-size: 2.1rem;\n  }\n`\n\nexport const H2 = styled.h2`\n  color: ${props => props.color || '#000'};\n  font-weight: ${props => props.weight || 600};\n  font-size: ${props => props.size || \"2rem\"};\n  text-transform: ${props => props.textTransform || \"inherit\"};\n  margin: ${props => props.margin || \"20px 0px\"};\n  padding: ${props => props.padding || \"0px\"};\n  letter-spacing: ${props => props.spacing || \"inherit\"};\n  font-family: ${props => props.family || \"'Source Sans Pro', Helvetica, sans-serif\"};\n  text-align: ${props => props.textAlign || \"inherit\"};\n`\n\nexport const H3 = styled.h3`\n  color: ${props => props.color || 'rgb(0 0 0 / 0.5)'};\n  font-weight: ${props => props.weight || 300};\n  font-size: ${props => props.size || \"1rem\"};\n  text-transform: ${props => props.textTransform || \"uppercase\"};\n  margin: ${props => props.margin || \"-15px 0px 20px 0px\"};\n  padding: ${props => props.padding || \"0px\"};\n  letter-spacing: ${props => props.spacing || \"0.1em\"};\n  font-family: ${props => props.family || \"'Source Sans Pro', Helvetica, sans-serif\"};\n  text-align: ${props => props.textAlign || \"inherit\"};\n  max-width: ${props => props.maxWidth || 'initial'};\n`\n\nexport const Image = styled.img`\n  width: 100%;\n  height: auto;\n  display: flex;\n`\n\nexport const P = styled.p`\n  flex: ${props => props.flex || 'initial'};\n  align-self: ${props => props.self || 'auto'};\n\n  color: ${props => props.color || '#000'};\n  background: ${props => props.bg || 'transparent'};\n  font-weight: ${props => props.weight || 300};\n  font-size: ${props => props.size || \"inherit\"};\n  text-transform: ${props => props.textTransform || \"inherit\"};\n  margin: ${props => props.margin || \"20px 0px\"};\n  padding: ${props => props.padding || \"0px\"};\n  letter-spacing: ${props => props.spacing || \"inherit\"};\n  text-align: ${props => props.textAlign || \"inital\"};\n`\n\nexport const Para = styled(P)`\n  font-weight: ${props => props.weight || 300};\n  letter-spacing: ${props => props.spacing || \"0.02em\"};\n  font-size: ${props => props.size || \"1.1em\"};\n  color: ${props => props.color || \"#000000ee\"};\n`\n\nexport const Span = styled.span`\n  flex: ${props => props.flex || 'initial'};\n  align-self: ${props => props.self || 'auto'};\n\n  color: ${props => props.color || '#000'};\n  background: ${props => props.bg || 'transparent'};\n  font-weight: ${props => props.weight || 300};\n  font-size: ${props => props.size || \"inherit\"};\n  text-transform: ${props => props.textTransform || \"inherit\"};\n  margin: ${props => props.margin || \"0px\"};\n  padding: ${props => props.padding || \"0px\"};\n  letter-spacing: ${props => props.spacing || \"inherit\"};\n  text-align: ${props => props.textAlign || \"inital\"};\n\n  position: ${props => props.pos || 'initial'};\n  right: ${props => props.right || 'auto'};\n  left: ${props => props.left || 'auto'};\n  bottom: ${props => props.bottom || 'auto'};\n  top: ${props => props.top || 'auto'};\n\n  border-radius: ${props => props.radius || \"0px\"};\n  overflow: ${props => props.overflow || \"hidden\"};\n\n  z-index: ${props => props.z || 'auto'};\n`\n\nexport const B = styled.span`\n  color: ${props => props.color || '#000'};\n  font-weight: ${props => props.weight || 'bold'};\n`\n\nexport const UL = styled.ul`\n\n`\n\nexport const LI = styled.li`\n  margin: 10px 0px;\n`\n\nexport const Anchor = styled.a`\n  display: flex;\n  flex-direction: ${props => props.direction || 'row'};\n  flex: ${props => props.flex || 'initial'};\n  align-self: ${props => props.self || 'auto'};\n  align-items: ${props => props.align || 'center'};\n  justify-content: ${props => props.justify || 'center'};\n  font-weight: ${props => props.weight || 400};\n  font-size: ${props => props.size || \"inherit\"};\n  color: ${props => props.color || \"#fff\"};\n  background: ${props => props.bg || \"transparent\"};\n  margin: ${props => props.margin || \"0\"};\n  padding: ${props => props.padding || \"10px 15px\"};\n  letter-spacing: ${props => props.spacing || \"0.2em\"};\n  border: ${props => props.border || \"none\"};\n  border-radius: ${props => props.radius || \"0px\"};\n\n  position: relative;\n  text-decoration: none;\n  overflow: ${props => props.overflow || \"hidden\"};\n  z-index: 3;\n\n  filter: ${props => props.filter || \"none\"};\n\n  cursor: pointer;\n  pointer: hand;\n\n  &:hover & {\n    filter: ${props => (props.filterHover ? props.filterHover : (props.hover ? props.hover : \"none\")) || \"none\"};\n  }\n\n  &:before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: ${props => props.hover || (props.bg ? props.bg : \"transparent\")};\n    display: none;\n    z-index: -1;\n  }\n\n  &:after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: ${props => props.hoverBG || \"#000\"};\n    opacity: 0;\n    z-index: -1;\n  }\n\n  &:hover:before {\n    display: block;\n  }\n\n  &:hover:after {\n    opacity: 0.08;\n  }\n  &:active:after {\n    opacity: 0.15;\n  }\n`\n\nexport const A = styled(Anchor)`\n  display: inline;\n  color: #e1087f;\n  background: transparent;\n  padding: 0px;\n  letter-spacing: inherit;\n  text-transform: initial;\n`\n\nexport const Button = styled.button`\n  display: flex;\n  flex: ${props => props.flex || 'initial'};\n  align-self: ${props => props.self || 'auto'};\n  align-items: ${props => props.align || 'center'};\n  justify-content: ${props => props.justify || 'center'};\n  font-weight: ${props => props.weight || 400};\n  font-size: ${props => props.size || \"inherit\"};\n  color: ${props => props.color || \"#fff\"};\n  background: ${props => props.bg || \"tranparent\"};\n  margin: ${props => props.margin || \"0\"};\n  padding: ${props => props.padding || \"10px 15px\"};\n  border: ${props => props.border || \"none\"};\n  border-radius: ${props => props.radius || \"0px\"};\n\n  position: relative;\n  text-decoration: none;\n  overflow: ${props => props.overflow || \"hidden\"};\n  z-index: 3;\n\n  cursor: pointer;\n  pointer: hand;\n\n  &:before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: ${props => props.hover || (props.bg ? props.bg : \"transparent\")};\n    display: none;\n    z-index: -1;\n  }\n\n  &:after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: ${props => props.hoverBG || \"#000\"};\n    opacity: 0;\n    z-index: -1;\n  }\n\n  &:hover:before {\n    display: block;\n  }\n\n  &:hover:after {\n    opacity: 0.08;\n  }\n  &:active:after {\n    opacity: 0.15;\n  }\n\n  & > div {\n    display: flex;\n  }\n`\n\nexport const Showoff = styled.div`\n  position: absolute;\n  right: ${props => props.right || 'auto'};\n  left: ${props => props.left || 'auto'};\n  bottom: ${props => props.bottom || 'auto'};\n  top: ${props => props.top || 'auto'};\n  transform: ${props => props.transform || 'initial'};\n  opacity: ${props => props.opacity || 'initial'};\n\n  @media (max-width: 768px) {\n    align-items: ${props => (props.tabletAlign ? props.tabletAlign : (props.align ? props.align : \"center\")) || \"center\"};\n\n    right: ${props => (props.tabletRight ? props.tabletRight : (props.right ? props.right : \"auto\")) || \"auto\"};\n    left: ${props => (props.tabletLeft ? props.tabletLeft : (props.left ? props.left : \"auto\")) || \"auto\"};\n    top: ${props => (props.tabletTop ? props.tabletTop : (props.top ? props.top : \"auto\")) || \"auto\"};\n    bottom: ${props => (props.tabletBottom ? props.tabletBottom : (props.bottom ? props.bottom : \"auto\")) || \"auto\"};\n\n    transform: ${props => (props.tabletTransform ? props.tabletTransform : (props.transform ? props.transform : \"auto\")) || \"auto\"};\n\n    opacity: ${props => (props.tabletOpacity ? props.tabletOpacity : (props.opacity ? props.opacity : \"auto\")) || \"initial\"};\n  }\n`\n\nexport const FormSubmision = styled.form`\n  display: flex;\n  flex-wrap: ${props => props.wrap || 'wrap'};\n\n  flex: ${props => props.flex || 'initial'};\n  flex-direction: ${props => props.direction || 'column'};\n\n  align-self: ${props => props.self || 'auto'};\n  align-items: ${props => props.align || 'center'};\n  justify-content: ${props => props.justify || 'center'};\n  font-weight: ${props => props.weight || 400};\n  font-size: ${props => props.size || \"inherit\"};\n  text-transform: ${props => props.textTransform || \"inherit\"};\n  color: ${props => props.color || \"#fff\"};\n  background: ${props => props.bg || \"transparent\"};\n  margin: ${props => props.margin || \"0px\"};\n  padding: ${props => props.padding || \"0px\"};\n  border: ${props => props.border || \"none\"};\n  border-radius: ${props => props.radius || \"0px\"};\n  position: relative;\n`\n\nexport const Input = styled.input`\n  display: ${props => props.display || 'flex'};\n  flex: ${props => props.flex || 'initial'};\n  align-self: ${props => props.self || 'auto'};\n  align-items: ${props => props.align || 'center'};\n  justify-content: ${props => props.justify || 'center'};\n  font-weight: ${props => props.weight || 300};\n  font-size: ${props => props.size || \"inherit\"};\n  text-transform: ${props => props.textTransform || \"inherit\"};\n  color: ${props => props.color || \"#000\"};\n  background: ${props => props.bg || \"transparent\"};\n  margin: ${props => props.margin || \"0px\"};\n  padding: ${props => props.padding || \"0px\"};\n  letter-spacing: ${props => props.spacing || \"inherit\"};\n  border: ${props => props.border || \"none\"};\n  border-bottom: ${props => props.borderBottom || \"inital\"};\n  border-radius: ${props => props.radius || \"0px\"};\n  outline: ${props => props.outline || \"none\"};\n  overflow: ${props => props.overflow || \"hidden\"};\n  position: relative;\n\n  cursor: ${props => props.cursor || \"initial\"};\n  pointer: ${props => props.hand || \"initial\"};\n\n  &:focus + span {\n    opacity: 0;\n\n    -webkit-transition: all 0.2s ease-in-out;\n    -moz-transition: all 0.2s ease-in-out;\n    -o-transition: all 0.2s ease-in-out;\n    transition: all 0.2s ease-in-out;\n  }\n`\n\nexport const TextField = styled.textarea`\n  display: flex;\n  flex: ${props => props.flex || 'initial'};\n  align-self: ${props => props.self || 'auto'};\n  align-items: ${props => props.align || 'center'};\n  justify-content: ${props => props.justify || 'center'};\n  font-weight: ${props => props.weight || 300};\n  font-size: ${props => props.size || \"inherit\"};\n  text-transform: ${props => props.textTransform || \"inherit\"};\n  color: ${props => props.color || \"#000\"};\n  background: ${props => props.bg || \"transparent\"};\n  margin: ${props => props.margin || \"0px\"};\n  padding: ${props => props.padding || \"0px\"};\n  letter-spacing: ${props => props.spacing || \"inherit\"};\n  border: ${props => props.border || \"none\"};\n  border-radius: ${props => props.radius || \"0px\"};\n  outline: ${props => props.outline || \"none\"};\n  overflow: ${props => props.overflow || \"hidden\"};\n  position: relative;\n  resize: vertical;\n\n  &:focus + span {\n    opacity: 0;\n\n    -webkit-transition: all 0.2s ease-in-out;\n    -moz-transition: all 0.2s ease-in-out;\n    -o-transition: all 0.2s ease-in-out;\n    transition: all 0.2s ease-in-out;\n  }\n`\n","import React from \"react\";\n\nimport styled, { css } from 'styled-components';\nimport {Section, Content, Item, ItemH, ItemBreak, H1, H2, H3, Image, P, Span, Anchor, Button, Showoff, FormSubmision, Input, TextField} from 'components/SharedStyling';\n\nimport { BsFillImageFill } from 'react-icons/bs';\nimport { FiLink } from 'react-icons/fi';\n\nimport Dropdown from 'react-dropdown';\nimport 'react-dropdown/style.css';\n\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport Loader from 'react-loader-spinner';\n\nimport Switch from '@material-ui/core/Switch';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\n\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core';\n\nimport { addresses, abis } from \"@project/contracts\";\nimport EPNSCoreHelper from 'helpers/EPNSCoreHelper';\nimport CryptoHelper from 'helpers/CryptoHelper';\nconst ethers = require('ethers');\n\nconst ipfs = require('ipfs-api')();\n\n// Set Notification Form Type | 0 is reserved for protocol storage\nconst NFTypes = [\n  { value: \"1\", label: 'Broadcast (IPFS Payload)' },\n  { value: \"2\", label: 'Secret (IPFS Payload)' },\n  { value: \"3\", label: 'Targetted (IPFS Payload)' },\n];\n\n// Create Header\nfunction SendNotifications() {\n  const { active, error, account, library, chainId } = useWeb3React();\n\n  const [nfProcessing, setNFProcessing] = React.useState(0);\n\n  const [nfRecipient, setNFRecipient] = React.useState('');\n  const [nfType, setNFType] = React.useState('');\n\n  const [nfSub, setNFSub] = React.useState('');\n  const [nfSubEnabled, setNFSubEnabled] = React.useState(false);\n\n  const [nfMsg, setNFMsg] = React.useState('');\n\n  const [nfCTA, setNFCTA] = React.useState('');\n  const [nfCTAEnabled, setNFCTAEnabled] = React.useState(false);\n\n  const [nfMedia, setNFMedia] = React.useState('');\n  const [nfMediaEnabled, setNFMediaEnabled] = React.useState(false);\n\n  const [nfInfo, setNFInfo] = React.useState('');\n\n  React.useEffect(() => {\n    if (nfType === \"1\") {\n      // This is broadcast, nfRecipient will be the same\n      setNFRecipient(account);\n    }\n    else {\n      setNFRecipient('');\n    }\n  }, [nfType]);\n\n  const handleSendMessage = async (e) => {\n    // Check everything in order\n    e.preventDefault();\n\n    // Set to processing\n    setNFProcessing(1);\n\n    // Toastify\n    let notificationToast = toast.dark(<LoaderToast msg=\"Preparing Notification\" color=\"#fff\"/>, {\n      position: \"bottom-right\",\n      autoClose: false,\n      hideProgressBar: true,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined,\n    });\n\n    // Form signer and contract connection\n    var signer = library.getSigner(account);\n    let contract = new ethers.Contract(addresses.epnscore, abis.epnscore, signer);\n\n    // For payload basic\n    let nsub = nfSub;\n    let nmsg = nfMsg;\n    let secretEncrypted;\n\n    let asub = nfSub;\n    let amsg = nfMsg;\n    let acta = nfCTA;\n    let aimg = nfMedia;\n\n    // Decide type and storage\n    switch (nfType) {\n      // Broadcast Notification\n      case \"1\":\n        break;\n\n      // Targetted Notification\n      case \"3\":\n        break;\n\n      // Secret Notification\n      case \"2\":\n        // Create secret\n        let secret = CryptoHelper.makeid(14);\n\n        // Encrypt payload and change sub and nfMsg in notification\n        nsub = \"You have a secret message!\";\n        nmsg = \"Open the app to see your secret message!\";\n\n        // get public key from EPNSCoreHelper\n        let k = await EPNSCoreHelper.getPublicKey(nfRecipient, contract);\n        if (k == null) {\n          // No public key, can't encrypt\n          setNFInfo(\"Public Key Registration is required for encryption!\");\n          setNFProcessing(2);\n\n          toast.update(notificationToast, {\n            render: \"Unable to encrypt for this user, no public key registered\",\n            type: toast.TYPE.ERROR,\n            autoClose: 5000\n          });\n\n          return;\n        }\n\n        let publickey = k.toString().substring(2);\n        //console.log(\"This is public Key: \" + publickey);\n\n        secretEncrypted = await CryptoHelper.encryptWithECIES(secret, publickey);\n        asub = CryptoHelper.encryptWithAES(nfSub, secret);\n        amsg = CryptoHelper.encryptWithAES(nfMsg, secret);\n        acta = CryptoHelper.encryptWithAES(nfCTA, secret);\n        aimg = CryptoHelper.encryptWithAES(nfMedia, secret);\n        break;\n\n      default:\n        break;\n    }\n\n    // Handle Storage\n    let storagePointer = '';\n\n    // IPFS PAYLOAD --> 1, 2, 3\n    if (nfType === \"1\" || nfType === \"2\" || nfType === \"3\") {\n      // Checks for optional fields\n      if (nfSubEnabled && isEmpty(nfSub)) {\n        setNFInfo(\"Enter Subject or Disable it\");\n        setNFProcessing(2);\n\n        toast.update(notificationToast, {\n          render: \"Incorrect Payload\",\n          type: toast.TYPE.ERROR,\n          autoClose: 5000\n        });\n\n        return;\n      }\n\n      if (nfMediaEnabled && isEmpty(nfMediaEnabled)) {\n        setNFInfo(\"Enter Media URL or Disable it\");\n        setNFProcessing(2);\n\n        toast.update(notificationToast, {\n          render: \"Incorrect Payload\",\n          type: toast.TYPE.ERROR,\n          autoClose: 5000\n        });\n        return;\n      }\n\n      if (nfCTAEnabled && isEmpty(nfCTA)) {\n        setNFInfo(\"Enter Call to Action Link or Disable it\");\n        setNFProcessing(2);\n\n        toast.update(notificationToast, {\n          render: \"Incorrect Payload\",\n          type: toast.TYPE.ERROR,\n          autoClose: 5000\n        });\n        return;\n      }\n\n      if (isEmpty(nfMsg)) {\n        setNFInfo(\"Message cannot be empty\");\n        setNFProcessing(2);\n\n        toast.update(notificationToast, {\n          render: \"Incorrect Payload\",\n          type: toast.TYPE.ERROR,\n          autoClose: 5000\n        });\n        return;\n      }\n\n      const input = JSON.stringify(\n        {\n          \"notification\": {\n            \"title\": nsub,\n            \"body\": nmsg\n          },\n          \"data\": {\n            \"type\": nfType,\n            \"secret\": secretEncrypted,\n            \"asub\": asub,\n            \"amsg\": amsg,\n            \"acta\": acta,\n            \"aimg\": aimg\n          }\n        }\n      );\n\n      console.log(\"Uploding to IPFS...\");\n      toast.update(notificationToast, {\n        render: \"Uploding to IPFS...\",\n      });\n\n      const ipfs = require(\"nano-ipfs-store\").at(\"https://ipfs.infura.io:5001\");\n\n      try {\n        storagePointer = await ipfs.add(input);\n      }\n      catch (e) {\n        setNFProcessing(2);\n        setNFInfo(\"IPFS Upload Error\");\n      }\n\n      console.log (\"IPFS cid: %o\", storagePointer);\n      toast.update(notificationToast, {\n        render: \"IPFS HASH: \" + storagePointer,\n      });\n\n    }\n\n    // Prepare Identity and send notification\n    const identity = nfType + \"+\" + storagePointer;\n    const identityBytes = ethers.utils.toUtf8Bytes(identity);\n\n    var anotherSendTxPromise = contract.sendNotification(nfRecipient, identityBytes);\n\n    console.log (\"Sending Transaction... \");\n    toast.update(notificationToast, {\n      render: \"Sending Transaction...\",\n    });\n\n    anotherSendTxPromise\n      .then(async (tx) => {\n        console.log(tx);\n        console.log (\"Transaction Sent!\");\n\n        toast.update(notificationToast, {\n          render: \"Transaction Sent\",\n          type: toast.TYPE.INFO,\n          autoClose: 5000\n        });\n\n        await tx.wait(1);\n        console.log (\"Transaction Mined!\");\n\n        setNFProcessing(2);\n        setNFType('');\n        setNFInfo(\"Notification Sent\");\n\n        toast.update(notificationToast, {\n          render: \"Transaction Mined / Notification Sent\",\n          type: toast.TYPE.SUCCESS,\n          autoClose: 5000\n        });\n      })\n      .catch(err => {\n        console.log(\"!!!Error handleSendMessage() --> %o\", err);\n        setNFInfo(\"Transaction Failed, please try again\");\n\n        toast.update(notificationToast, {\n          render: \"Transacion Failed: \" + err,\n          type: toast.TYPE.ERROR,\n          autoClose: 5000\n        });\n      });\n  }\n\n  const isEmpty = (field) => {\n    if (field.trim().length == 0) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // toast customize\n  const LoaderToast = ({ msg, color }) => (\n    <Toaster>\n      <Loader\n       type=\"Oval\"\n       color={color}\n       height={30}\n       width={30}\n      />\n      <ToasterMsg>{msg}</ToasterMsg>\n    </Toaster>\n  )\n\n  return (\n    <>\n      <Section>\n        <Content padding=\"10px 20px 20px\">\n          <Item align=\"flex-start\">\n            <H2 textTransform=\"uppercase\" spacing=\"0.1em\">\n              <Span weight=\"200\">Send </Span><Span bg=\"#674c9f\" color=\"#fff\" weight=\"600\" padding=\"0px 8px\">Notification</Span>\n            </H2>\n            <H3>EPNS supports three types of notifications (for now!). <b>Groups</b>, <b>Secrets</b> and <b>Targetted</b>.</H3>\n          </Item>\n        </Content>\n      </Section>\n\n      <Section>\n        <Content>\n          <Item align=\"stretch\">\n            <FormSubmision\n              flex=\"1\"\n              direction=\"column\"\n              margin=\"0px\"\n              justify=\"center\"\n              size=\"1.1rem\"\n              onSubmit={handleSendMessage}\n            >\n              <Item margin =\"0px 20px\" flex=\"1\" self=\"stretch\" align=\"stretch\">\n                <Item flex=\"5\" justify=\"flex-start\" align=\"stretch\" minWidth=\"280px\">\n                  <DropdownStyledParent>\n                    <DropdownStyled options={NFTypes} onChange={(option) => {setNFType(option.value); console.log(option)}} value={nfType} placeholder=\"Select Type of Notification to Send\" />\n                  </DropdownStyledParent>\n                </Item>\n                <Input display=\"none\" value={nfType} onChange={(e) => {setNFType(e.target.value)}} />\n\n                {nfType &&\n                  <ItemH margin=\"0px 15px 15px 15px\" bg=\"#f1f1f1\" flex=\"1\" self=\"stretch\" justify=\"space-between\">\n                    <ItemH margin=\"15px 10px\" flex=\"inital\">\n                      <Span margin=\"0px 10px 0px 0px\" weight=\"400\" spacing=\"0.1em\" textTransform=\"uppercase\" size=\"0.8em\" bg=\"#e20880\" color=\"#fff\" padding=\"5px 15px\" radius=\"30px\">Enable Subject</Span>\n                      <Switch color=\"primary\" size=\"small\" checked={nfSubEnabled} onChange={() => setNFSubEnabled(!nfSubEnabled)} />\n                    </ItemH>\n\n                    <ItemH margin=\"15px 10px\" flex=\"inital\">\n                      <Span margin=\"0px 10px 0px 0px\" weight=\"400\" spacing=\"0.1em\" textTransform=\"uppercase\" size=\"0.8em\" bg=\"#e20880\" color=\"#fff\" padding=\"5px 15px\" radius=\"30px\">Enable Media</Span>\n                      <Switch color=\"primary\" size=\"small\" checked={nfMediaEnabled} onChange={() => setNFMediaEnabled(!nfMediaEnabled)} />\n                    </ItemH>\n\n                    <ItemH margin=\"15px 10px\" flex=\"inital\">\n                      <Span margin=\"0px 10px 0px 0px\" weight=\"400\" spacing=\"0.1em\" textTransform=\"uppercase\" size=\"0.8em\" bg=\"#e20880\" color=\"#fff\" padding=\"5px 15px\" radius=\"30px\">Enable CTA</Span>\n                      <Switch color=\"primary\" size=\"small\" checked={nfCTAEnabled} onChange={() => setNFCTAEnabled(!nfCTAEnabled)} />\n                    </ItemH>\n                  </ItemH>\n                }\n              </Item>\n\n              {!nfType &&\n                <Item padding=\"0px 20px 30px 20px\" />\n              }\n\n              {(nfType === \"2\" || nfType === \"3\") &&\n                <Item margin=\"15px 20px 15px 20px\" flex=\"1\" self=\"stretch\" align=\"stretch\">\n                  <Input\n                    required\n                    placeholder=\"Enter recipient wallet address\"\n                    radius=\"4px\"\n                    padding=\"12px\"\n                    border=\"1px solid #674c9f\"\n                    bg=\"#fff\"\n                    value={nfRecipient}\n                    onChange={(e) => {setNFRecipient(e.target.value)}}\n                  />\n                  {nfRecipient.trim().length == 0 &&\n                      <Span\n                        padding=\"4px 10px\"\n                        right=\"0px\"\n                        top=\"0px\"\n                        pos=\"absolute\"\n                        color=\"#fff\"\n                        bg=\"#000\"\n                        size=\"0.7rem\"\n                        z=\"1\"\n                      >\n                        Recipient Wallet\n                      </Span>\n                    }\n                </Item>\n              }\n\n              {nfType && nfSubEnabled &&\n                <Item margin=\"15px 20px 15px 20px\" flex=\"1\" self=\"stretch\" align=\"stretch\">\n                  <Input\n                    required\n                    placeholder=\"Subject of Notification\"\n                    padding=\"12px\"\n                    borderBottom=\"1px solid #000\"\n                    weight=\"400\"\n                    size=\"1.2em\"\n                    bg=\"#fff\"\n                    value={nfSub}\n                    onChange={(e) => {setNFSub(e.target.value)}}\n                  />\n                  {nfSub.trim().length == 0 &&\n                      <Span\n                        padding=\"4px 10px\"\n                        right=\"0px\"\n                        top=\"0px\"\n                        pos=\"absolute\"\n                        color=\"#fff\"\n                        bg=\"#000\"\n                        size=\"0.7rem\"\n                        z=\"1\"\n                      >\n                        Subject\n                      </Span>\n                    }\n                </Item>\n              }\n\n              {nfType &&\n                <Item margin=\"15px 20px 15px 20px\" flex=\"1\" self=\"stretch\" align=\"stretch\">\n                  <TextField\n                    required\n                    placeholder=\"Notification Message\"\n                    rows=\"6\"\n                    radius=\"4px\"\n                    padding=\"12px\"\n                    weight=\"400\"\n                    border=\"1px solid #000\"\n                    bg=\"#fff\"\n                    value={nfMsg}\n                    onChange={(e) => {setNFMsg(e.target.value)}}\n                    autocomplete=\"off\"\n                  />\n                </Item>\n              }\n\n              {nfType && nfMediaEnabled &&\n                <ItemH padding=\"15px 20px 15px 20px\" flex=\"1\" self=\"stretch\" align=\"center\">\n                  <Item flex=\"0\" margin=\"0px 5px 0px 0px\">\n                    <BsFillImageFill size={24} color=\"#000\"/>\n                  </Item>\n                  <Item flex=\"1\" margin=\"0px 0px 0px 5px\" align=\"stretch\">\n                    <Input\n                      required\n                      placeholder=\"Media URL for Notification\"\n                      padding=\"12px\"\n                      border=\"1px solid #000\"\n                      radius=\"4px\"\n                      weight=\"400\"\n                      bg=\"#f1f1f1\"\n                      value={nfMedia}\n                      onChange={(e) => {setNFMedia(e.target.value)}}\n                    />\n                    {nfMedia.trim().length == 0 &&\n                        <Span\n                          padding=\"4px 10px\"\n                          right=\"0px\"\n                          top=\"0px\"\n                          pos=\"absolute\"\n                          color=\"#fff\"\n                          bg=\"#000\"\n                          size=\"0.7rem\"\n                          z=\"1\"\n                        >\n                          Media URL\n                        </Span>\n                      }\n                    </Item>\n                </ItemH>\n              }\n\n              {nfType && nfCTAEnabled &&\n                <ItemH margin=\"15px 20px 15px 20px\" flex=\"1\" self=\"stretch\" align=\"center\">\n                  <Item flex=\"0\" margin=\"0px 5px 0px 0px\">\n                    <FiLink size={24} color=\"#000\"/>\n                  </Item>\n                  <Item flex=\"1\" margin=\"0px 0px 0px 5px\" align=\"stretch\">\n                    <Input\n                      required\n                      placeholder=\"Call to Action Link\"\n                      padding=\"12px\"\n                      border=\"1px solid #000\"\n                      radius=\"4px\"\n                      weight=\"400\"\n                      bg=\"#f1f1f1\"\n                      value={nfCTA}\n                      onChange={(e) => {setNFCTA(e.target.value)}}\n                    />\n                    {nfCTA.trim().length == 0 &&\n                        <Span\n                          padding=\"4px 10px\"\n                          right=\"0px\"\n                          top=\"0px\"\n                          pos=\"absolute\"\n                          color=\"#fff\"\n                          bg=\"#000\"\n                          size=\"0.7rem\"\n                          z=\"1\"\n                        >\n                          Call to Action URL\n                        </Span>\n                      }\n                    </Item>\n                </ItemH>\n              }\n\n              {nfInfo && nfProcessing != 1 &&\n                <Item\n                  color=\"#fff\"\n                  bg=\"#e1087f\"\n                  padding=\"10px 15px\"\n                  margin = \"15px 0px\"\n                >\n                  <Span\n                    color=\"#fff\"\n                    textTransform=\"uppercase\"\n                    spacing=\"0.1em\"\n                    weight=\"400\"\n                    size=\"1em\"\n                  >\n                    {nfInfo}\n                  </Span>\n                </Item>\n              }\n\n              {nfType &&\n                <Item margin=\"15px 0px 0px 0px\" flex=\"1\" self=\"stretch\" align=\"stretch\">\n                  <Button\n                    bg='#674c9f'\n                    color='#fff'\n                    flex=\"1\"\n                    radius=\"0px\"\n                    padding=\"20px 10px\"\n                    disabled={nfProcessing == 1 ? true : false}\n                  >\n                    {nfProcessing == 1 &&\n                      <Loader\n                         type=\"Oval\"\n                         color=\"#fff\"\n                         height={24}\n                         width={24}\n                        />\n                    }\n                    {nfProcessing != 1 &&\n                      <Input cursor=\"hand\" textTransform=\"uppercase\" color=\"#fff\" weight=\"400\" size=\"0.8em\" spacing=\"0.2em\" type=\"submit\" value=\"Send Notification\" />\n                    }\n                  </Button>\n                </Item>\n              }\n            </FormSubmision>\n          </Item>\n        </Content>\n      </Section>\n\n\n    </>\n  );\n}\n\n// css styles\nconst Toaster = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin: 0px 10px;\n`\n\nconst ToasterMsg = styled.div`\n  margin: 0px 10px;\n`\n\nconst DropdownStyledParent = styled.div `\n  .is-open {\n    margin-bottom: 130px;\n  }\n`\n\nconst DropdownStyled = styled(Dropdown)`\n\n  .Dropdown-control {\n    background-color: #000;\n    color: #fff;\n    padding: 12px 52px 12px 10px;\n    border: 1px solid #000;\n    border-radius: 4px;\n  }\n\n  .Dropdown-placeholder {\n    text-transform: uppercase;\n    font-weight: 400;\n    letter-spacing: 0.2em;\n    font-size: 0.8em;\n  }\n\n  .Dropdown-arrow {\n    top: 18px;\n    bottom: 0;\n    border-color: #fff transparent transparent;\n  }\n\n  .Dropdown-menu {\n    border: 1px solid #000;\n    box-shadow: none;\n    background-color: #000;\n    border-radius: 0px;\n    margin-top: -3px;\n    border-bottom-right-radius: 4px;\n    border-bottom-left-radius: 4px;\n  }\n\n  .Dropdown-option {\n    background-color: rgb(35 35 35);\n    color: #ffffff99;\n\n    text-transform: uppercase;\n    letter-spacing: 0.2em;\n    font-size: 0.7em;\n    padding: 15px 20px;\n  }\n\n  .Dropdown-option:hover {\n    background-color: #000000;\n    color: #fff;\n  }\n`\n\n\n// Export Default\nexport default SendNotifications;\n","import React from \"react\";\n\nimport styled, { css } from 'styled-components';\nimport {Section, Content} from 'components/SharedStyling';\n\nimport SendNotifications from 'components/SendNotifications';\n\n// CREATE CHANNEL OWNER DASHBOARD\nfunction ChannelOwnerDashboard() {\n  React.useEffect(() => {\n\n  });\n\n  // RRENDER\n  return (\n    <>\n      <Section>\n        <Content padding=\"0px\">\n          <SendNotifications />\n        </Content>\n      </Section>\n    </>\n  );\n}\n\n// css styles\n\n\n// Export Default\nexport default ChannelOwnerDashboard;\n","import React from \"react\";\n\nimport styled, { css } from 'styled-components';\nimport {Section, Content, Item, ItemH, ItemBreak, H1, H2, H3, Image, P, Span, Anchor, Button, Showoff, FormSubmision, Input, TextField} from 'components/SharedStyling';\n\nimport 'react-dropzone-uploader/dist/styles.css'\nimport Dropzone from 'react-dropzone-uploader'\n\nimport Loader from 'react-loader-spinner';\nimport { bigNumberify, parseUnits } from 'ethers/utils'\n\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\n\nimport { addresses, abis } from \"@project/contracts\";\nconst ethers = require('ethers');\n\nconst ipfs = require('ipfs-api')()\n\n// Create Header\nfunction CreateChannel() {\n  const { active, error, account, library, chainId } = useWeb3React();\n\n  const [processing, setProcessing] = React.useState(false);\n  const [uploadDone, setUploadDone] = React.useState(false);\n  const [file, setFile] = React.useState(undefined);\n\n  const [name, setName] = React.useState('');\n  const [desc, setDesc] = React.useState('');\n  const [url, setURL] = React.useState('');\n\n  React.useEffect(() => {\n\n  });\n\n  // called every time a file's `status` changes\n  const handleChangeStatus = ({ meta, file }, status) => { console.log(status, meta, file) }\n\n  const onDropHandler=(files) =>{\n    //   var file = files[0]\n    //   const reader = new FileReader();\n    //   reader.onload = (event) => {\n    //     console.log(event.target.result);\n    //   };\n    //   reader.readAsDataURL(file);\n    // setFile(file);\n    // console.log(\"Drop Handler\");\n    // console.log(file);\n  }\n\n  // receives array of files that are done uploading when submit button is clicked\n  const handleSubmit = (files, allFiles) => {\n    setUploadDone(true);\n\n    console.log(files.map(f => f.meta))\n    allFiles.forEach(f => {\n      var file = f.file;\n      var reader = new FileReader();\n      reader.readAsDataURL(file);\n      console.log(f.file);\n      reader.onloadend = function (e) {\n        console.log(reader.result);\n        setFile(reader.result);\n      }\n    })\n    console.log(\"andle Submit\");\n  }\n\n  const handleCreateChannel = async () => {\n    // Check everything in order\n    // skip this for now\n    setProcessing(true);\n\n    console.log(file);\n    console.log(name);\n    console.log(desc);\n    console.log(url);\n\n    const input = JSON.stringify(\n      {\n        \"name\": name,\n        \"info\": desc,\n        \"url\": url,\n        \"icon\": file\n      }\n    )\n    const ipfs = require(\"nano-ipfs-store\").at(\"https://ipfs.infura.io:5001\");\n\n    console.log(\"sending payload\");\n    const cid = await ipfs.add(input);\n    console.log(\"IPFS cid:\", cid);\n    //console.log(await ipfs.cat(cid));\n\n    // Send Transaction\n    // First Approve DAI\n    var signer = library.getSigner(account);\n\n    let daiContract = new ethers.Contract(addresses.dai, abis.erc20, signer);\n\n    // Pick between 50 DAI AND 25K DAI\n    let randomNumber = Math.ceil(Math.random() * 24949) + 50;\n    const fees = parseUnits(randomNumber.toString(), 18);\n\n    var sendTransactionPromise = daiContract.approve(addresses.epnscore, fees);\n    const tx = await sendTransactionPromise;\n\n    console.log(tx);\n    console.log(\"waiting for tx to finish\");\n    await library.waitForTransaction(tx.hash);\n\n    let contract = new ethers.Contract(addresses.epnscore, abis.epnscore, signer);\n    var anotherSendTxPromise = contract.createChannelWithFees(cid);\n\n    anotherSendTxPromise.then(function(tx) {\n      console.log(tx);\n      console.log(\"Check: \" + account);\n\n    });\n  }\n\n  return (\n    <>\n      <Section>\n        <Content padding=\"10px 20px 20px\">\n          <Item align=\"flex-start\">\n            <H2 textTransform=\"uppercase\" spacing=\"0.1em\">\n              <Span bg=\"#674c9f\" color=\"#fff\" weight=\"600\" padding=\"0px 8px\">Create</Span><Span weight=\"200\"> Your Channel!</Span>\n            </H2>\n            <H3><b>Ethereum Push Notification Service</b> (EPNS) makes it extremely easy to open and maintain a genuine channel of communication with your users.</H3>\n          </Item>\n        </Content>\n      </Section>\n\n      {/* Image Uploaded */}\n      {uploadDone && !processing &&\n        <Section>\n          <Content padding=\"20px 20px\">\n            <Span>Image Verified! Just fill in your other information and hit <b>Beam me up</b> to create your channel.</Span>\n          </Content>\n        </Section>\n      }\n\n      <Channel>\n        <Notice>\n          {uploadDone && !processing &&\n            <Info>Image Verified! Just fill in your other information and hit <b>Beam me up</b> to create your channel... literal goosebumps!!!</Info>\n          }\n          {!uploadDone &&\n            <>\n            <Info>The only step for <b>You</b> or your <b>dApp</b> or even your <b>Smart Contract</b> is opening up the channel.</Info>\n            <Info>Rest of the heavy lifting of securely connecting users, wallets, device tokens, listening to and ensuring sent events, forming and delivering payload to each mobile or destop devices and informing them and you about it is done automagically by EPNS.</Info>\n            </>\n          }\n        </Notice>\n\n        {!processing && uploadDone &&\n          <FormSubmision>\n            <Name placeholder=\"Your Channel Name\" maxlength = \"40\" value={name} onChange={(e) => {setName(e.target.value)}}/>\n            <ShortInfo placeholder=\"Your Channel's Short Description\" maxlength = \"200\" value={desc} onChange={(e) => {setDesc(e.target.value)}}/>\n            <Url placeholder=\"Your website\" maxlength = \"200\" value={url} onChange={(e) => {setURL(e.target.value)}}/>\n          </FormSubmision>\n        }\n\n          <>\n          {!uploadDone &&\n            <DropzoneContainer>\n              <Info>Drop in your channel <b>(dApp or Website) official logo</b> here and submit first.</Info>\n              <Dropzone\n                onChangeStatus={handleChangeStatus}\n                onSubmit={handleSubmit}\n                onDrop={onDropHandler}\n                maxFiles={1}\n                multiple={false}\n                accept=\"image/jpeg,image/png\"\n              />\n            </DropzoneContainer>\n          }\n          </>\n\n        {uploadDone &&\n          <Continue theme={processing ? '#674c9f' : '#e20880'} disabled={processing} onClick={handleCreateChannel}>\n            {processing &&\n              <Loader\n               type=\"Oval\"\n               color=\"#FFF\"\n               height={16}\n               width={16}\n              />\n            }\n            {!processing &&\n              <Text>Beam me up!</Text>\n            }\n          </Continue>\n        }\n\n      </Channel>\n    </>\n  );\n}\n\n// css styles\n\nconst Channel = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n`\n\nconst Notice = styled.div`\n  margin-top: 10px;\n  display: flex;\n  flex-direction: column;\n`\n\nconst Title = styled.h1`\n  color: #674c9f;\n  font-size: 30px;\n  font-weight: 300;\n  margin-top: 0px;\n  margin-bottom: 30px;\n`\n\nconst Info = styled.label`\n  padding-bottom: 20px;\n  font-size: 14px;\n  color: #000;\n`\n\nconst Info2 = styled(Info)`\n\n`\nconst Name = styled(Input)`\n  border-bottom: 1px solid #e20880;\n  font-size: 24px;\n`\n\nconst ShortInfo = styled.textarea`\n  outline: 0;\n  border: 0;\n  border-bottom: 1px solid #35c5f3;\n  margin: 10px;\n  font-size: 18px;\n  min-height: 80px;\n  color: #111;\n`\n\nconst Url = styled(Input)`\n  border-bottom: 1px solid #674c9f;\n  font-size: 1=8px;\n`\n\nconst DropzoneContainer = styled.div`\n  margin: 20px 20px 10px 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst Text = styled.span`\n\n`\n\nconst Continue = styled.button`\n  border: 0;\n  outline: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  border-radius: 20px;\n  font-size: 14px;\n  background: ${props => props.theme || '#674c9f'};\n  margin: 30px 0px 0px 0px;\n  border-radius: 8px;\n  padding: 16px;\n  font-size: 16px;\n  font-weight: 400;\n`\n\n\n// Export Default\nexport default CreateChannel;\n","import React from \"react\";\n\nimport styled, { css } from 'styled-components';\nimport {Section, Content} from 'components/SharedStyling';\n\nimport CreateChannel from 'components/CreateChannel';\n\n// CREATE CHANNEL OWNER DASHBOARD\nfunction ChannelCreationDashboard() {\n  React.useEffect(() => {\n\n  });\n\n  // RRENDER\n  return (\n    <>\n      <Section>\n        <Content padding=\"0px\">\n          <CreateChannel />\n        </Content>\n      </Section>\n    </>\n  );\n}\n\n// css styles\n\n\n// Export Default\nexport default ChannelCreationDashboard;\n","import React from \"react\";\nimport ReactGA from 'react-ga';\n\nimport styled, { css } from 'styled-components';\n\nimport { addresses, abis } from \"@project/contracts\";\nimport { useWeb3React } from '@web3-react/core'\nimport { ethers } from \"ethers\";\n\nimport Loader from 'react-loader-spinner'\n\nimport EPNSCoreHelper from 'helpers/EPNSCoreHelper';\n\nimport Feedbox from 'segments/Feedbox';\nimport ViewChannels from 'segments/ViewChannels';\nimport ChannelOwnerDashboard from 'segments/ChannelOwnerDashboard';\nimport ChannelCreationDashboard from 'segments/ChannelCreationDashboard';\n\nimport ChannelsDataStore, { ChannelEvents } from \"singletons/ChannelsDataStore\";\nimport UsersDataStore, { UserEvents } from \"singletons/UsersDataStore\";\n\n// Create Header\nfunction Home({ setBadgeCount, bellPressed }) {\n  ReactGA.pageview('/home');\n\n  const { active, error, account, library, chainId } = useWeb3React();\n\n  const [epnsReadProvider, setEpnsReadProvider] = React.useState(null);\n  const [epnsWriteProvider, setEpnsWriteProvider] = React.useState(null);\n\n  const [controlAt, setControlAt] = React.useState(0);\n  const [adminStatusLoaded, setAdminStatusLoaded] = React.useState(false);\n  const [channelAdmin, setChannelAdmin] = React.useState(false);\n  const [channelJson, setChannelJson] = React.useState([]);\n\n  React.useEffect(() => {\n    const contractInstance = new ethers.Contract(addresses.epnscore, abis.epnscore, library);\n    setEpnsReadProvider(contractInstance);\n\n    if (!!(library && account)) {\n      let signer = library.getSigner(account);\n      const signerInstance = new ethers.Contract(addresses.epnscore, abis.epnscore, signer);\n      setEpnsWriteProvider(signerInstance);\n    }\n\n  }, [account]);\n\n  React.useEffect(() => {\n    // Reset when account refreshes\n    setChannelAdmin(false);\n    setAdminStatusLoaded(false);\n    userClickedAt(2);\n    setChannelJson([]);\n\n    // EPNS Read Provider Set\n    if (epnsReadProvider != null) {\n      // Instantiate Data Stores\n      UsersDataStore.instance.init(account, epnsReadProvider);\n      ChannelsDataStore.instance.init(account, epnsReadProvider);\n\n      checkUserForChannelRights();\n    }\n\n  }, [epnsReadProvider]);\n\n  // Revert to Feedbox on bell pressed\n  React.useEffect(() => {\n    setControlAt(0);\n  }, [bellPressed]);\n\n  // handle user action at control center\n  const userClickedAt = (controlIndex) => {\n    setControlAt(controlIndex);\n  }\n\n  //Start Listening...\n  const listenerForChannelRights = async () => {\n    ChannelsDataStore.instance.addCallbacks(\n      ChannelEvents.ADD_CHANNEL_SELF,\n      \"FromCreateChannel\",\n      () => {\n        checkUserForChannelRights();\n      }\n    );\n  }\n\n  // Check if a user is a channel or not\n  const checkUserForChannelRights = async () => {\n    // Check if account is admin or not and handle accordingly\n    EPNSCoreHelper.getChannelJsonFromUserAddress(account, epnsReadProvider)\n      .then(response => {\n        console.log(response);\n        setChannelJson(response);\n        setChannelAdmin(true);\n        setAdminStatusLoaded(true);\n      })\n      .catch(e => {\n        setChannelAdmin(false);\n        setAdminStatusLoaded(true);\n      });\n\n    // Start listening\n    listenerForChannelRights();\n  }\n\n  // Render\n  return (\n    <Container>\n      <Controls>\n        <ControlButton index={0} active={controlAt == 0 ? 1 : 0} border=\"#e20880\"\n          onClick={() => {\n            userClickedAt(0)\n          }}\n        >\n          <ControlImage src=\"./svg/feedbox.svg\" active={controlAt == 0 ? 1 : 0} />\n          <ControlText active={controlAt == 0 ? 1 : 0}>Feedbox</ControlText>\n        </ControlButton>\n        <ControlButton index={1} active={controlAt == 1 ? 1 : 0} border=\"#35c5f3\"\n          onClick={() => {\n            userClickedAt(1)\n          }}\n        >\n          <ControlImage src=\"./svg/channel.svg\" active={controlAt == 1 ? 1 : 0}/>\n          <ControlText active={controlAt == 1 ? 1 : 0}>Channels</ControlText>\n        </ControlButton>\n\n        <ControlButton index={2} active={controlAt == 2 ? 1 : 0} border=\"#674c9f\"\n          disabled={!adminStatusLoaded}\n          onClick={() => {\n            if (adminStatusLoaded) {\n              userClickedAt(2)\n            }\n          }}\n        >\n          {!adminStatusLoaded &&\n            <Loader\n               type=\"Oval\"\n               color=\"#674c9f\"\n               height={32}\n               width={32}\n            />\n          }\n          {channelAdmin && adminStatusLoaded &&\n            <ControlChannelContainer>\n              <ControlChannelImage src={`${channelJson.icon}`} active={controlAt == 2 ? 1 : 0}/>\n              <ControlChannelText active={controlAt == 2 ? 1 : 0}>{channelJson.name}</ControlChannelText>\n            </ControlChannelContainer>\n          }\n          {!channelAdmin && adminStatusLoaded &&\n            <>\n              <ControlImage src=\"./svg/channeladmin.svg\" active={controlAt == 2 ? 1 : 0}/>\n              <ControlText active={controlAt == 2 ? 1 : 0}>Create Your Channel</ControlText>\n            </>\n          }\n        </ControlButton>\n      </Controls>\n      <Interface>\n        {controlAt == 0 &&\n          <Feedbox\n            epnsReadProvider={epnsReadProvider}\n           />\n        }\n        {controlAt == 1 &&\n          <ViewChannels\n            epnsReadProvider={epnsReadProvider}\n            epnsWriteProvide={epnsWriteProvider}\n          />\n        }\n        {controlAt == 2 && !channelAdmin && adminStatusLoaded &&\n          <ChannelCreationDashboard />\n        }\n        {controlAt == 2 && channelAdmin && adminStatusLoaded &&\n          <ChannelOwnerDashboard />\n        }\n      </Interface>\n    </Container>\n  );\n}\n\n// css style\nconst Container = styled.div`\n  flex: 1;\n  display: block;\n  flex-direction: column;\n  min-height: calc(100vh - 100px);\n`\n\nconst Controls = styled.div`\n  flex: 0;\n  display: flex;\n  flex-direction: row;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n`\n\nconst ControlButton = styled.div`\n  flex: 1 1 25%;\n  height: 120px;\n  min-width: 240px;\n  background: #fff;\n\n  box-shadow: 0px 15px 20px -5px rgba(0, 0, 0, 0.1);\n  border-radius: 15px;\n  border: 1px solid rgb(225,225,225);\n\n  border-bottom: 10px solid rgb(180,180,180);\n  margin: 20px;\n  overflow: hidden;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  border-bottom: 10px solid ${(props) => props.active ? props.border : \"rgb(180,180,180)\"};\n\n  &:hover {\n    opacity: 0.9;\n    cursor: pointer;\n    pointer: hand;\n  }\n  &:active {\n    opacity: 0.75;\n    cursor: pointer;\n    pointer: hand;\n  }\n`\n\nconst ControlImage = styled.img`\n  height: 30%;\n  margin-right: 15px;\n  filter: ${(props) => props.active ? \"brightness(1)\" : \"brightness(0)\"};\n  opacity: ${(props) => props.active ? \"1\" : \"0.25\"};\n\n  transition: transform .2s ease-out;\n  ${ props => props.active && css`\n    transform: scale(3.5) translate(-20px, 0px);\n    opacity: 0.4;\n  `};\n`\n\nconst ControlText = styled.label`\n  font-size: 16px;\n  font-weight: 200;\n  opacity: ${(props) => props.active ? \"1\" : \"0.75\"};\n\n  transition: transform .2s ease-out;\n  ${ props => props.active && css`\n    transform: scale(1.5) translate(-10px, 0px);\n  `};\n`\n\nconst ControlChannelContainer = styled.div`\n  margin: 0px 20px;\n  flex-direction: column;\n  align-items: center;\n  display: flex;\n`\n\nconst ControlChannelImage = styled.img`\n    width: 20%;\n    margin-bottom: 10px;\n    transition: transform .2s ease-out;\n    ${ props => props.active && css`\n      transform: scale(3.5) translate(-40px, 5px);\n      opacity: 0.2;\n      z-index: 1;\n    `};\n`\n\nconst ControlChannelText = styled.label`\n  font-size: 16px;\n  font-weight: 300;\n  opacity: ${(props) => props.active ? \"1\" : \"0.75\"};\n  transition: transform .2s ease-out;\n  background: -webkit-linear-gradient(#db268a, #34c6f3);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  z-index: 2;\n  ${ props => props.active && css`\n    transform: scale(1.1) translate(0px, -20px);\n  `};\n\n`\n\nconst Interface = styled.div`\n  flex: 1;\n  display: flex;\n\n  box-shadow: 0px 15px 20px -5px rgba(0, 0, 0, 0.1);\n  border-radius: 20px;\n  border: 1px solid rgb(225,225,225);\n\n  margin: 15px;\n  overflow: hidden;\n`\n\n// Export Default\nexport default Home;\n","// Usage:\n//   create component file (e.g. BlockiesIdenticon.js) using uncommented code below\n//   npm install blockies-identicon\n//   in the file you want to use the component (e.g. BlockiesIdenticon.js):\n//   import Blockies from \"blockies/react-component\";\n//   <Blockies opts={{seed: \"foo\", color: \"#dfe\", bgcolor: \"#a71\", size: 15, scale: 3, spotcolor: \"#000\"}}/>\n\nimport React from 'react';\nimport blockies from \"./blockies\";\n\nexport default class BlockiesIdenticon extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  getOpts () {\n    return {\n      seed: this.props.opts.seed || \"foo\",\n      color: this.props.opts.color || \"#dfe\",\n      bgcolor: this.props.opts.bgcolor || \"#a71\",\n      size: this.props.opts.size || 15,\n      scale: this.props.opts.scale || 3,\n      spotcolor: this.props.opts.spotcolor || \"#000\"\n    };\n  }\n  componentDidMount() {\n    this.draw();\n  }\n  componentDidUpdate(prevProps) {\n    // Check for prop change\n    if (this.props.seed !== prevProps.seed) {\n      this.draw();\n    }\n  }\n  draw() {\n    blockies.render({\n      seed: this.props.opts.seed,\n      size: this.props.opts.size,\n      scale: this.props.opts.scale\n    }, this.canvas);\n  }\n  render() {\n    return React.createElement(\"canvas\", {ref: canvas => this.canvas = canvas});\n  }\n}\n","import React from \"react\";\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\n\nimport styled, { css } from 'styled-components';\n\nimport Loader from 'react-loader-spinner'\nimport Blockies from \"components/BlockiesIdenticon\";\n//   <Blockies opts={{seed: \"foo\", color: \"#dfe\", bgcolor: \"#a71\", size: 15, scale: 3, spotcolor: \"#000\"}}/>\n\n// Create Header\nfunction Profile() {\n  const { active, error, account, library, chainId } = useWeb3React();\n\n  const [address, setAddress] = React.useState('');\n  const [ens, setENS] = React.useState('');\n  const [ensFetched, setENSFetched] = React.useState(false);\n\n  React.useEffect(() => {\n    if (account && account != '') {\n      // Check if the address is the same\n      if (address !== account) {\n        setENS('');\n        setENSFetched(false);\n\n        // get ens\n        library\n          .lookupAddress(account).then(function(name) {\n            setENS(name);\n            setENSFetched(true);\n            setAddress(account);\n          })\n          .catch(() => {\n            setENSFetched(true);\n            setAddress(account);\n          })\n      }\n\n    }\n  }, [account]);\n\n  // to create blockies\n\n  return (\n    <>\n    {account && account !== '' && !error &&\n      <Container>\n        <Blocky>\n          <BlockyInner>\n             <Blockies seed={account.toLowerCase()} opts={{seed: account.toLowerCase(), size: 7, scale: 7}}/>\n          </BlockyInner>\n        </Blocky>\n        <Wallet>\n        {!ensFetched &&\n          <Loader\n      \t     type=\"Oval\"\n      \t     color=\"#FFF\"\n      \t     height={16}\n      \t     width={16}\n      \t  />\n        }\n        {ensFetched && ens &&\n          <>{ens}</>\n        }\n        {ensFetched && !ens &&\n          <>{account.substring(0, 6)}.....{account.substring(account.length - 6)}</>\n        }\n        </Wallet>\n      </Container>\n    }\n    </>\n  );\n}\n\n// css styles\nconst Container = styled.button`\n  margin: 0;\n  padding: 0;\n  background: none;\n  border: 0;\n  outline: 0;\n  justify-content: flex-start;\n  flex: 1,\n  flex-direction: row;\n  align-items: center;\n  display: flex;\n`\n\nconst Blocky = styled.div`\n  position: relative;\n  width: 50px;\n  height: 50px;\n  border-radius: 100%;\n  overflow: hidden;\n  transform: scale(0.85);\n  outline-width: 2px;\n  outline-color: rgba(225,225,225,1);\n`\n\nconst BlockyInner = styled.div`\n`\n\nconst Wallet = styled.span`\n  margin: 0px 10px;\n  padding: 8px 15px;\n  height: 16px;\n  display: flex;\n  align-items: baseline;\n  justify-content: center;\n  font-weight: bold;\n  font-size: 14px;\n  color: #fff;\n  border-radius: 15px;\n  background: rgb(226,8,128);\n  background: linear-gradient(107deg, rgba(226,8,128,1) 30%, rgba(103,76,159,1) 70%, rgba(53,197,243,1) 100%);\n  &:hover {\n    opacity: 0.9;\n    cursor: pointer;\n    pointer: hand;\n  }\n  &:active {\n    opacity: 0.75;\n    cursor: pointer;\n    pointer: hand;\n  }\n`\n\n// Export Default\nexport default Profile;\n","import React from \"react\";\nimport styled, { css, keyframes } from 'styled-components';\nimport { AnimateOnChange } from 'react-animation';\n\n// Create Header\nfunction Bell({ badgeCount, bellPressedCB, width, height }) {\n  const [badge, setBadge] = React.useState(0);\n  const [ring, setRing] = React.useState(false);\n\n  React.useEffect(() => {\n    // Set new badge count and ring the bell\n    setBadge(badgeCount);\n\n    if (badge > 0) {\n      setResetRinger();\n    }\n  }, [badgeCount]);\n\n  const setResetRinger = () => {\n    setRing(true);\n\n    setTimeout(() => {\n        setRing(false)\n    }, 500);\n  }\n\n  return (\n    <Container\n      onClick={() => {\n        if (bellPressedCB) {bellPressedCB();}\n      }}\n      width={width}\n      height={height}\n    >\n      <BellImage ring={ring} src=\"./bell.png\" className=\"tadaaa\" ringme={ring} width={width} height={height} />\n      <BellImageAbs src=\"./bellball.png\" width={width} height={height} />\n      <BellImageAbs src=\"./ring.png\" width={width} height={height} />\n      {badge != 0 &&\n        <AnimateOnChange\n          animationIn=\"fadeIn\"\n          animationOut=\"fadeOut\"\n          durationOut={200}\n        >\n          <Badge>{badge}</Badge>\n        </AnimateOnChange>\n      }\n    </Container>\n  );\n}\n\n// css styles\nconst Container = styled.button`\n  border: 0;\n  outline: 0;\n  background: transparent;\n  border: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 10px;\n  position: relative;\n  height: ${props => props.height || 40}px;\n  width: ${props => props.width || 40}px;\n  &:hover {\n    opacity: 0.9;\n    cursor: pointer;\n    pointer: hand;\n  }\n  &:active {\n    opacity: 0.75;\n    cursor: pointer;\n    pointer: hand;\n  }\n`\n\nconst tadaaa = keyframes`\n  0% {\n    -webkit-transform: scale3d(1, 1, 1);\n    -ms-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n\n  10%, 20% {\n    -webkit-transform: scale3d(.98, .98, .98) rotate3d(0, 0, 1, -5deg);\n    -ms-transform: scale3d(.98, .98, .98) rotate3d(0, 0, 1, -5deg);\n    transform: scale3d(.98, .98, .98) rotate3d(0, 0, 1, -5deg);\n  }\n\n  30%, 50%, 70%, 90% {\n    -webkit-transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 10, 5deg);\n    -ms-transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 10, 5deg);\n    transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 10, 5deg);\n  }\n\n  40%, 60%, 80% {\n    -webkit-transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 1, -5deg);\n    -ms-transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 1, -5deg);\n    transform: scale3d(1.08, 1.08, 1.08) rotate3d(0, 0, 1, -5deg);\n  }\n\n  100% {\n    -webkit-transform: scale3d(1, 1, 1);\n    -ms-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n`;\n\nconst BellImage = styled.img`\n  position: absolute;\n  height: ${props => props.height || 40}px;\n  width: ${props => props.width || 40}px;\n\n  transition: transform .2s ease-out;\n  ${ props => props.ringme && css`\n    animation: ${tadaaa} 1s ease-out;\n  `};\n\n\n`\n\nconst BellImageAbs = styled(BellImage)`\n  left: 0,\n`\n\nconst Badge = styled.span`\n  position: absolute;\n  font-size: 10px;\n  color: #fff;\n  padding: 2px 4px;\n  border-radius: 100%;\n  background: rgba(208.0, 44.0, 30.0, 1.0);\n  top: 0px;\n  left: 5px;\n  font-weight: bold;\n`\n\n// Export Default\nexport default Bell;\n","import React from \"react\";\nimport { useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\nimport {\n  NoEthereumProviderError,\n  UserRejectedRequestError as UserRejectedRequestErrorInjected\n} from '@web3-react/injected-connector'\n\nimport styled, { css } from 'styled-components';\n\nimport Profile from 'components/Profile';\nimport Bell from 'components/Bell';\n\n\n// Create Header\nfunction Header({ badgeCount, bellPressedCB }) {\n  const { active, error, account, chainId } = useWeb3React();\n  const randseed = new Array(4);\n\n  React.useEffect(() => {\n    if (account && account != '') {\n\n    }\n  }, [account]);\n\n  function getErrorMessage(error: Error) {\n    if (error instanceof NoEthereumProviderError) {\n      return 'Web3 not enabled, install MetaMask on desktop or visit from a dApp browser on mobile'\n    } else if (error instanceof UnsupportedChainIdError) {\n      return \"Unsupported Network, please connect to Ropsten\"\n    } else if (\n      error instanceof UserRejectedRequestErrorInjected\n    ) {\n      return 'Please authorize this website to access the dApp'\n    } else {\n      console.error(error)\n      return 'An unknown error occurred. Check the console for more details'\n    }\n  }\n\n  // to create blockies\n\n  return (\n    <HeaderStyle>\n      <ProfileContainer>\n      {active && !error &&\n        <Profile />\n      }\n      {!active &&\n        <Logo src=\"epns.png\" />\n      }\n      </ProfileContainer>\n      <UserControls>\n        {active && !error &&\n          <Bell\n            badgeCount={badgeCount}\n            bellPressedCB={bellPressedCB}\n            width={40}\n            height={40}\n          />\n        }\n      </UserControls>\n      <NetworkDisplayer>\n        {!!error &&\n          <PrimaryTheme>{getErrorMessage(error)}</PrimaryTheme>\n        }\n        {!active && !error &&\n          <ThirdTheme>Please connect to a Web3 Network</ThirdTheme>\n        }\n        <Connection phase={active ? 'active' : error ? 'error' : 'waiting'} />\n      </NetworkDisplayer>\n\n    </HeaderStyle>\n  );\n}\n\n// CSS Styles\nconst HeaderStyle = styled.div`\n  height: 100%;\n  padding: 10px 15px;\n  background: rgb(255,255,255);\n  background: linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 21%);\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end;\n`\n\nconst ProfileContainer = styled.div`\n  display: flex;\n  flex: 1;\n  justfy-content: flex-start;\n`\n\nconst Logo = styled.img`\n  height: 45px;\n`\n\nconst UserControls = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst ImageButton = styled.button`\n\n`\n\nconst NetworkDisplayer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst Notice = styled.span`\n  border: 0;\n  outline: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 15px;\n  margin: 10px;\n  color: #fff;\n  border-radius: 20px;\n  font-size: 14px;\n`\n\nconst PrimaryTheme = styled(Notice)`\n  background: #e20880;\n`\n\nconst ThirdTheme = styled(Notice)`\n  background: #674c9f;\n`\n\nconst Connection = styled.span`\n  height: 10px;\n  width: 10px;\n  border-radius: 100%;\n  flex-shrink: 0;\n\n  ${props => props.phase === 'active' && css`\n    background: #77DD77;\n  `};\n\n  ${props => props.phase === 'waiting' && css`\n    background: #FFAE42;\n  `};\n\n  ${props => props.phase === 'error' && css`\n    background: #DC143C;\n  `};\n`\n\n// Export Default\nexport default Header;\n","import React from \"react\";\nimport ReactGA from 'react-ga';\n\nimport Loader from 'react-loader-spinner'\nimport styled from 'styled-components';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\n\nimport { AbstractConnector } from '@web3-react/abstract-connector'\nimport { Web3ReactProvider, useWeb3React, UnsupportedChainIdError } from '@web3-react/core'\nimport {\n  NoEthereumProviderError,\n  UserRejectedRequestError as UserRejectedRequestErrorInjected\n} from '@web3-react/injected-connector'\nimport { Web3Provider } from 'ethers/providers'\n\nimport { useEagerConnect, useInactiveListener } from 'hooks'\nimport {\n  injected,\n  portis,\n  network\n} from 'connectors'\nimport { addresses, abis } from \"@project/contracts\";\nimport { ethers } from \"ethers\";\n\nimport Home from 'pages/Home';\nimport Header from 'segments/Header';\n\nimport * as dotenv from \"dotenv\";\ndotenv.config();\n\nconst connectorsByName: { [name: string]: AbstractConnector } = {\n  Injected: injected,\n  Network: network,\n  Portis: portis\n}\n\nfunction getErrorMessage(error: Error) {\n  if (error instanceof NoEthereumProviderError) {\n    return 'No Ethereum browser extension detected, install MetaMask on desktop or visit from a dApp browser on mobile.'\n  } else if (error instanceof UnsupportedChainIdError) {\n    return \"You're connected to an unsupported network.\"\n  } else if (\n    error instanceof UserRejectedRequestErrorInjected\n  ) {\n    return 'Please authorize this website to access your Ethereum account.'\n  } else {\n    console.error(error)\n    return 'An unknown error occurred. Check the console for more details.'\n  }\n}\n\nfunction getLibrary(provider, connector) {\n  return new ethers.providers.Web3Provider(provider); // this will vary according to whether you use e.g. ethers or web3.js\n}\n\nexport default function() {\n  return (\n    <Web3ReactProvider getLibrary={getLibrary}>\n      <App />\n    </Web3ReactProvider>\n  )\n}\n\nfunction ChainId() {\n  const { chainId } = useWeb3React()\n\n  return (\n    <>\n      <span>Chain Id</span>\n      <span role=\"img\" aria-label=\"chain\">\n        ⛓\n      </span>\n      <span>{Number.isInteger(chainId) ? chainId : ''}</span>\n    </>\n  )\n}\n\nfunction BlockNumber() {\n  const { chainId, library } = useWeb3React()\n\n  const [blockNumber, setBlockNumber] = React.useState<number>()\n  React.useEffect((): any => {\n    if (!!library) {\n      let stale = false\n\n      library\n        .getBlockNumber()\n        .then((blockNumber: number) => {\n          if (!stale) {\n            setBlockNumber(blockNumber)\n          }\n        })\n        .catch(() => {\n          if (!stale) {\n            setBlockNumber(null)\n          }\n        })\n\n      const updateBlockNumber = (blockNumber: number) => {\n        setBlockNumber(blockNumber)\n      }\n      library.on('block', updateBlockNumber)\n\n      return () => {\n        stale = true\n        library.removeListener('block', updateBlockNumber)\n        setBlockNumber(undefined)\n      }\n    }\n  }, [library, chainId]) // ensures refresh if referential identity of library doesn't change across chainIds\n\n  return (\n    <>\n      <span>Block Number</span>\n      <span role=\"img\" aria-label=\"numbers\">\n        🔢\n      </span>\n      <span>\n        {Number.isInteger(blockNumber)\n          ? blockNumber.toLocaleString()\n          : blockNumber === null\n          ? 'Error'\n          : !!library\n          ? '...'\n          : ''}\n      </span>\n    </>\n  )\n}\n\nfunction Account() {\n  const { account } = useWeb3React()\n\n  return (\n    <>\n      <span>Account</span>\n      <span role=\"img\" aria-label=\"robot\">\n        🤖\n      </span>\n      <span>\n        {account === undefined\n          ? ''\n          : account === null\n          ? '-'\n          : `${account.substring(0, 6)}...${account.substring(account.length - 4)}`}\n      </span>\n    </>\n  )\n}\n\nfunction Balance() {\n  const { account, library, chainId } = useWeb3React()\n\n  const [balance, setBalance] = React.useState()\n  React.useEffect((): any => {\n    if (!!account && !!library) {\n      let stale = false\n\n      library\n        .getBalance(account)\n        .then((balance: any) => {\n          if (!stale) {\n            setBalance(balance)\n          }\n        })\n        .catch(() => {\n          if (!stale) {\n            setBalance(null)\n          }\n        })\n\n      return () => {\n        stale = true\n        setBalance(undefined)\n      }\n    }\n  }, [account, library, chainId]) // ensures refresh if referential identity of library doesn't change across chainIds\n\n  return (\n    <>\n      <span>Balance</span>\n      <span role=\"img\" aria-label=\"gold\">\n        💰\n      </span>\n      <span>\n        {!!balance\n          ? `Ξ${parseFloat(balance).toPrecision(4)}`\n          : balance === null\n          ? 'Error'\n          : account === null\n          ? '-'\n          : !!account && !!library\n          ? '...'\n          : ''}\n      </span>\n    </>\n  )\n}\n\nfunction HeaderOld() {\n  const { active, error } = useWeb3React()\n\n  return (\n    <>\n\n      <h5\n        style={{\n          display: 'grid',\n          gridGap: '0rem',\n          gridTemplateColumns: '1fr min-content 1fr',\n          maxWidth: '20rem',\n          lineHeight: '2rem',\n          margin: 'auto'\n        }}\n      >\n        <ChainId />\n        <BlockNumber />\n        <Account />\n        <Balance />\n      </h5>\n    </>\n  )\n}\n\nfunction initializeGA() {\n  ReactGA.initialize('231212683');\n  ReactGA.pageview('/homepage');\n}\n\nfunction App() {\n  const context = useWeb3React<Web3Provider>()\n  const { connector, library, chainId, account, activate, deactivate, active, error } = context\n\n  const [ badgeCount, setBadgeCount ] = React.useState(0);\n  const [ bellPressed, setBellPressed ] = React.useState(0);\n\n  // Initialize GA\n  ReactGA.initialize('UA-165415629-1');\n  ReactGA.pageview('/login');\n\n  // handle logic to recognize the connector currently being activated\n  const [activatingConnector, setActivatingConnector] = React.useState<AbstractConnector>()\n  React.useEffect(() => {\n    if (activatingConnector && activatingConnector === connector) {\n      setActivatingConnector(undefined)\n    }\n  }, [activatingConnector, connector])\n\n  // handle logic to eagerly connect to the injected ethereum provider, if it exists and has granted access already\n  const triedEager = useEagerConnect()\n\n  // handle logic to connect in reaction to certain events on the injected ethereum provider, if it exists\n  useInactiveListener(!triedEager || !!activatingConnector)\n\n  return (\n      <>\n        <HeaderContainer>\n          <Header\n            badgeCount={badgeCount}\n            bellPressedCB={() => {setBellPressed(bellPressed + 1)}}\n          />\n        </HeaderContainer>\n\n        <ParentContainer>\n        {(active) && !error && (\n          <HomeContainer>\n            <Home\n              setBadgeCount={setBadgeCount}\n              bellPressed={bellPressed}\n            />\n          </HomeContainer>\n\n        )}\n\n        {!active &&\n          <ProviderUpperContainer>\n            <ProviderLogo src=\"./epnsbell.png\" />\n            <ProviderContainer>\n              {Object.keys(connectorsByName).map(name => {\n                const currentConnector = connectorsByName[name]\n                const activating = currentConnector === activatingConnector\n                const connected = currentConnector === connector\n                const disabled = !triedEager || !!activatingConnector || connected || !!error\n                const image = name === 'Injected' ? './metamask.png' : name === 'Portis' ? './portis.png' : './ninja.png';\n\n                return (\n                  <ProviderButton\n                    disabled={disabled}\n                    key={name}\n                    onClick={() => {\n                      setActivatingConnector(currentConnector)\n                      activate(connectorsByName[name])\n                    }}\n                    border={name === 'Injected' ? '#e20880' : name === 'Portis' ? '#35c5f3' : '#674c9f'}\n                  >\n                    <ProviderImage src={image} />\n\n                    <ProviderLabel>\n                      {activating &&\n                        <Loader\n                           type=\"Oval\"\n                           color=\"#35c5f3\"\n                           height={20}\n                           width={20}\n                        />\n                      }\n                      {!activating &&\n                        <>\n                        {name === 'Injected' ? 'Connect with MetaMask' : name === 'Portis' ? 'Connect with Portis' : 'Login as Ninja'}\n                        </>\n                      }\n\n                    </ProviderLabel>\n\n                  </ProviderButton>\n                )\n              })}\n            </ProviderContainer>\n          </ProviderUpperContainer>\n        }\n\n        {active &&\n          <div\n            style={{\n              display: 'grid',\n              gridGap: '1rem',\n              gridTemplateColumns: 'fit-content',\n              maxWidth: '20rem',\n              margin: 'auto',\n              marginTop: '1200px'\n            }}\n          >\n            {(active || error) && (\n              <button\n                style={{\n                  height: '3rem',\n                  marginTop: '2rem',\n                  borderRadius: '1rem',\n                  borderColor: 'red',\n                  cursor: 'pointer'\n                }}\n                onClick={() => {\n                  deactivate()\n                }}\n              >\n                Deactivate\n              </button>\n            )}\n\n            {!!(library && account) && (\n              <button\n                style={{\n                  height: '3rem',\n                  borderRadius: '1rem',\n                  cursor: 'pointer'\n                }}\n                onClick={() => {\n                  library\n                    .getSigner(account)\n                    .signMessage('👋')\n                    .then((signature: any) => {\n                      window.alert(`Success!\\n\\n${signature}`)\n                    })\n                    .catch((error: any) => {\n                      window.alert('Failure!' + (error && error.message ? `\\n\\n${error.message}` : ''))\n                    })\n                }}\n              >\n                Sign Message\n              </button>\n            )}\n            {!!(connector === network && chainId) && (\n              <button\n                style={{\n                  height: '3rem',\n                  borderRadius: '1rem',\n                  cursor: 'pointer'\n                }}\n                onClick={() => {\n                  ;(connector as any).changeChainId(chainId === 1 ? 3 : 1)\n                }}\n              >\n                Switch Networks\n              </button>\n            )}\n            {connector === portis && (\n              <>\n                {chainId !== undefined && (\n                  <button\n                    style={{\n                      height: '3rem',\n                      borderRadius: '1rem',\n                      cursor: 'pointer'\n                    }}\n                    onClick={() => {\n                      ;(connector as any).changeNetwork(chainId === 1 ? 100 : 1)\n                    }}\n                  >\n                    Switch Networks\n                  </button>\n                )}\n                <button\n                  style={{\n                    height: '3rem',\n                    borderRadius: '1rem',\n                    cursor: 'pointer'\n                  }}\n                  onClick={() => {\n                    ;(connector as any).close()\n                  }}\n                >\n                  Kill Portis Session\n                </button>\n              </>\n            )}\n          </div>\n        }\n        </ParentContainer>\n\n        <ToastContainer\n          position=\"bottom-right\"\n          autoClose={false}\n          newestOnTop\n          closeOnClick\n          rtl={false}\n          pauseOnFocusLoss\n          draggable\n        />\n      </>\n  );\n}\n\n\n// CSS STYLES\nconst HeaderContainer = styled.div`\n  height: 55px;\n  left: 0;\n  right: 0;\n  width: 100%;\n  position: fixed;\n  top: 0;\n  z-index: 999;\n`\n\nconst ParentContainer = styled.div`\n  flex-wrap: wrap;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin: 80px 20px 20px 20px;\n  flex: 1;\n`\n\nconst HomeContainer = styled.div`\n  display: flex;\n  flex: 1;\n  align-self: center;\n  width: 100%;\n  max-width: 1100px;\n`\n\nconst ProviderUpperContainer = styled.div`\n  display: flex;\n  flex: 1,\n  align-self: center;\n  flex-direction: column;\n`\n\nconst ProviderLogo = styled.img`\n  width: 15vw;\n  align-self: center;\n  display: flex;\n  margin: 20px;\n  min-width: 200px;\n`\n\nconst ProviderContainer = styled.div`\n  flex-wrap: wrap;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n\nconst ProviderButton = styled.button`\n  flex: 1 1 0;\n  min-width: 200px;\n  background: #fff;\n  outline: 0;\n  max-width: 200px;\n\n  box-shadow: 0px 15px 20px -5px rgba(0, 0, 0, 0.1);\n  border-radius: 15px;\n  border: 1px solid rgb(225,225,225);\n\n  margin: 20px;\n  overflow: hidden;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n\n  &:hover {\n    opacity: 0.9;\n    cursor: pointer;\n    pointer: hand;\n    border: 1px solid ${props => props.border}\n  }\n  &:active {\n    opacity: 0.75;\n    cursor: pointer;\n    pointer: hand;\n    border: 1px solid ${props => props.border}\n  }\n`\n\nconst ProviderImage = styled.img`\n  height: 60px;\n  padding: 10px;\n`\n\nconst ProviderLabel = styled.span`\n  font-size: 12px;\n  margin: 5px;\n`\n\nconst StyledContainer = styled(ToastContainer).attrs({\n  // custom props\n})`\n  .Toastify__toast-container {}\n  .Toastify__toast {}\n  .Toastify__toast--error {}\n  .Toastify__toast--warning {}\n  .Toastify__toast--success {}\n  .Toastify__toast-body {\n    font-size: 12px;\n  }\n  .Toastify__progress-bar {}\n`;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\",\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\",\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\"No internet connection found. App is running in offline mode.\");\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport ApolloClient from \"apollo-boost\";\nimport { ApolloProvider } from \"@apollo/react-hooks\";\n\nimport './index.css';\n\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport { Web3ReactProvider } from '@web3-react/core'\nimport { ethers } from \"ethers\";\n\nimport * as dotenv from \"dotenv\";\ndotenv.config();\n\n// You should replace this uri with your own and put it into a .env file\nconst client = new ApolloClient({\n  uri: \"https://api.thegraph.com/subgraphs/name/paulrberg/create-eth-app\",\n});\n\nReactDOM.render(\n\n    <ApolloProvider client={client}>\n      <App />\n    </ApolloProvider>,\n    document.getElementById(\"root\"),\n\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","(function() {\n\t// The random number is a js implementation of the Xorshift PRNG\n\tvar randseed = new Array(4); // Xorshift: [x, y, z, w] 32 bit values\n\n\tfunction seedrand(seed) {\n\t\tfor (var i = 0; i < randseed.length; i++) {\n\t\t\trandseed[i] = 0;\n\t\t}\n\t\tfor (var i = 0; i < seed.length; i++) {\n\t\t\trandseed[i%4] = ((randseed[i%4] << 5) - randseed[i%4]) + seed.charCodeAt(i);\n\t\t}\n\t}\n\n\tfunction rand() {\n\t\t// based on Java's String.hashCode(), expanded to 4 32bit values\n\t\tvar t = randseed[0] ^ (randseed[0] << 11);\n\n\t\trandseed[0] = randseed[1];\n\t\trandseed[1] = randseed[2];\n\t\trandseed[2] = randseed[3];\n\t\trandseed[3] = (randseed[3] ^ (randseed[3] >> 19) ^ t ^ (t >> 8));\n\n\t\treturn (randseed[3]>>>0) / ((1 << 31)>>>0);\n\t}\n\n\tfunction createColor() {\n\t\t//saturation is the whole color spectrum\n\t\tvar h = Math.floor(rand() * 360);\n\t\t//saturation goes from 40 to 100, it avoids greyish colors\n\t\tvar s = ((rand() * 60) + 40) + '%';\n\t\t//lightness can be anything from 0 to 100, but probabilities are a bell curve around 50%\n\t\tvar l = ((rand()+rand()+rand()+rand()) * 25) + '%';\n\n\t\tvar color = 'hsl(' + h + ',' + s + ',' + l + ')';\n\t\treturn color;\n\t}\n\n\tfunction createImageData(size) {\n\t\tvar width = size; // Only support square icons for now\n\t\tvar height = size;\n\n\t\tvar dataWidth = Math.ceil(width / 2);\n\t\tvar mirrorWidth = width - dataWidth;\n\n\t\tvar data = [];\n\t\tfor(var y = 0; y < height; y++) {\n\t\t\tvar row = [];\n\t\t\tfor(var x = 0; x < dataWidth; x++) {\n\t\t\t\t// this makes foreground and background color to have a 43% (1/2.3) probability\n\t\t\t\t// spot color has 13% chance\n\t\t\t\trow[x] = Math.floor(rand()*2.3);\n\t\t\t}\n\t\t\tvar r = row.slice(0, mirrorWidth);\n\t\t\tr.reverse();\n\t\t\trow = row.concat(r);\n\n\t\t\tfor(var i = 0; i < row.length; i++) {\n\t\t\t\tdata.push(row[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tfunction buildOpts(opts) {\n\t\tvar newOpts = {};\n\n\t\tnewOpts.seed = opts.seed || Math.floor((Math.random()*Math.pow(10,16))).toString(16);\n\n\t\tseedrand(newOpts.seed);\n\n\t\tnewOpts.size = opts.size || 8;\n\t\tnewOpts.scale = opts.scale || 4;\n\t\tnewOpts.color = opts.color || createColor();\n\t\tnewOpts.bgcolor = opts.bgcolor || createColor();\n\t\tnewOpts.spotcolor = opts.spotcolor || createColor();\n\n\t\treturn newOpts;\n\t}\n\n\tfunction renderIcon(opts, canvas) {\n\t\topts = buildOpts(opts || {});\n\t\tvar imageData = createImageData(opts.size);\n\t\tvar width = Math.sqrt(imageData.length);\n\n\t\tcanvas.width = canvas.height = opts.size * opts.scale;\n\n\t\tvar cc = canvas.getContext('2d');\n\t\tcc.fillStyle = opts.bgcolor;\n\t\tcc.fillRect(0, 0, canvas.width, canvas.height);\n\t\tcc.fillStyle = opts.color;\n\n\t\tfor(var i = 0; i < imageData.length; i++) {\n\n\t\t\t// if data is 0, leave the background\n\t\t\tif(imageData[i]) {\n\t\t\t\tvar row = Math.floor(i / width);\n\t\t\t\tvar col = i % width;\n\n\t\t\t\t// if data is 2, choose spot color, if 1 choose foreground\n\t\t\t\tcc.fillStyle = (imageData[i] == 1) ? opts.color : opts.spotcolor;\n\n\t\t\t\tcc.fillRect(col * opts.scale, row * opts.scale, opts.scale, opts.scale);\n\t\t\t}\n\t\t}\n\t\treturn canvas;\n\t}\n\n\tfunction createIcon(opts) {\n\t\tvar canvas = document.createElement('canvas');\n\n\t\trenderIcon(opts, canvas);\n\n\t\treturn canvas;\n\t}\n\n\tvar api = {\n\t\tcreate: createIcon,\n\t\trender: renderIcon\n\t};\n\n\tif (typeof module !== \"undefined\") {\n\t\tmodule.exports = api;\n\t}\n\tif (typeof window !== \"undefined\") {\n\t\t window.blockies = api;\n\t}\n\n})();\n"],"sourceRoot":""}